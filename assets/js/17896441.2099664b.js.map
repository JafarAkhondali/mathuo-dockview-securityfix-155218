{"version":3,"file":"assets/js/17896441.2099664b.js","mappings":"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","sources":["webpack://dockview-docs/../dockview-core/dist/esm/dnd/dataTransfer.js","webpack://dockview-docs/../dockview-core/dist/esm/events.js","webpack://dockview-docs/../dockview-core/dist/esm/lifecycle.js","webpack://dockview-docs/../dockview-core/dist/esm/dom.js","webpack://dockview-docs/../dockview-core/dist/esm/array.js","webpack://dockview-docs/../dockview-core/dist/esm/math.js","webpack://dockview-docs/../dockview-core/dist/esm/splitview/viewItem.js","webpack://dockview-docs/../dockview-core/dist/esm/splitview/splitview.js","webpack://dockview-docs/../dockview-core/dist/esm/paneview/paneview.js","webpack://dockview-docs/../dockview-core/dist/esm/gridview/leafNode.js","webpack://dockview-docs/../dockview-core/dist/esm/gridview/branchNode.js","webpack://dockview-docs/../dockview-core/dist/esm/gridview/gridview.js","webpack://dockview-docs/../dockview-core/dist/esm/resizable.js","webpack://dockview-docs/../dockview-core/dist/esm/gridview/baseComponentGridview.js","webpack://dockview-docs/../dockview-core/dist/esm/api/component.api.js","webpack://dockview-docs/../dockview-core/dist/esm/dnd/abstractDragHandler.js","webpack://dockview-docs/../dockview-core/dist/esm/dnd/dnd.js","webpack://dockview-docs/../dockview-core/dist/esm/dnd/droptarget.js","webpack://dockview-docs/../dockview-core/dist/esm/api/panelApi.js","webpack://dockview-docs/../dockview-core/dist/esm/api/splitviewPanelApi.js","webpack://dockview-docs/../dockview-core/dist/esm/api/paneviewPanelApi.js","webpack://dockview-docs/../dockview-core/dist/esm/gridview/basePanelView.js","webpack://dockview-docs/../dockview-core/dist/esm/paneview/paneviewPanel.js","webpack://dockview-docs/../dockview-core/dist/esm/paneview/draggablePaneviewPanel.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/components/panel/content.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/components/tab/tab.js","webpack://dockview-docs/../dockview-core/dist/esm/dnd/groupDragHandler.js","webpack://dockview-docs/../dockview-core/dist/esm/dnd/ghost.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/components/titlebar/voidContainer.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/components/titlebar/tabsContainer.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/options.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/dockviewGroupPanelModel.js","webpack://dockview-docs/../dockview-core/dist/esm/api/gridviewPanelApi.js","webpack://dockview-docs/../dockview-core/dist/esm/gridview/gridviewPanel.js","webpack://dockview-docs/../dockview-core/dist/esm/api/dockviewGroupPanelApi.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/dockviewGroupPanel.js","webpack://dockview-docs/../dockview-core/dist/esm/api/dockviewPanelApi.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/dockviewPanel.js","webpack://dockview-docs/../dockview-core/dist/esm/svg.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/components/tab/defaultTab.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/dockviewPanelModel.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/deserializer.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/components/watermark/watermark.js","webpack://dockview-docs/../dockview-core/dist/esm/overlay/overlay.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/dockviewFloatingGroupPanel.js","webpack://dockview-docs/../dockview-core/dist/esm/constants.js","webpack://dockview-docs/../dockview-core/dist/esm/overlay/overlayRenderContainer.js","webpack://dockview-docs/../dockview-core/dist/esm/popoutWindow.js","webpack://dockview-docs/../dockview-core/dist/esm/dockview/dockviewComponent.js","webpack://dockview-docs/../dockview-core/dist/esm/panel/componentFactory.js","webpack://dockview-docs/../dockview-core/dist/esm/gridview/gridviewComponent.js","webpack://dockview-docs/../dockview-core/dist/esm/splitview/splitviewComponent.js","webpack://dockview-docs/../dockview-core/dist/esm/paneview/defaultPaneviewHeader.js","webpack://dockview-docs/../dockview-core/dist/esm/paneview/paneviewComponent.js","webpack://dockview-docs/../dockview-core/dist/esm/splitview/splitviewPanel.js","webpack://dockview-docs/../dockview-core/dist/esm/api/entryPoints.js","webpack://dockview-docs/../dockview/dist/esm/react.js","webpack://dockview-docs/../dockview/dist/esm/dockview/reactContentPart.js","webpack://dockview-docs/../dockview/dist/esm/dockview/reactHeaderPart.js","webpack://dockview-docs/../dockview/dist/esm/dockview/reactWatermarkPart.js","webpack://dockview-docs/../dockview/dist/esm/dockview/headerActionsRenderer.js","webpack://dockview-docs/../dockview/dist/esm/dockview/dockview.js","webpack://dockview-docs/../dockview/dist/esm/svg.js","webpack://dockview-docs/../dockview/dist/esm/dockview/defaultTab.js","webpack://dockview-docs/../dockview/dist/esm/splitview/view.js","webpack://dockview-docs/../dockview/dist/esm/splitview/splitview.js","webpack://dockview-docs/../dockview/dist/esm/gridview/view.js","webpack://dockview-docs/../dockview/dist/esm/gridview/gridview.js","webpack://dockview-docs/../dockview/dist/esm/paneview/view.js","webpack://dockview-docs/../dockview/dist/esm/paneview/paneview.js","webpack://dockview-docs/./src/theme/Admonition/Layout/styles.module.css","webpack://dockview-docs/./src/theme/Admonition/Layout/index.js","webpack://dockview-docs/./src/theme/Admonition/Icon/Note.js","webpack://dockview-docs/./src/theme/Admonition/Type/Note.js","webpack://dockview-docs/./src/theme/Admonition/Icon/Tip.js","webpack://dockview-docs/./src/theme/Admonition/Type/Tip.js","webpack://dockview-docs/./src/theme/Admonition/Icon/Info.js","webpack://dockview-docs/./src/theme/Admonition/Type/Info.js","webpack://dockview-docs/./src/theme/Admonition/Icon/Warning.js","webpack://dockview-docs/./src/theme/Admonition/Type/Warning.js","webpack://dockview-docs/./src/theme/Admonition/Icon/Danger.js","webpack://dockview-docs/./src/theme/Admonition/Type/Danger.js","webpack://dockview-docs/./src/theme/Admonition/Type/Caution.js","webpack://dockview-docs/./src/theme/Admonition/Types.js","webpack://dockview-docs/./src/theme/Admonition/index.js","webpack://dockview-docs/./src/theme/DocItem/Content/index.js","webpack://dockview-docs/./src/theme/DocItem/Layout/styles.module.css","webpack://dockview-docs/./src/theme/DocItem/Layout/index.js","webpack://dockview-docs/./src/theme/MDXComponents.js","webpack://dockview-docs/./src/components/frameworkSpecific.tsx","webpack://dockview-docs/./src/components/ui/codeRunner.tsx"],"sourcesContent":["class TransferObject {\n}\nexport class PanelTransfer extends TransferObject {\n    constructor(viewId, groupId, panelId) {\n        super();\n        this.viewId = viewId;\n        this.groupId = groupId;\n        this.panelId = panelId;\n    }\n}\nexport class PaneTransfer extends TransferObject {\n    constructor(viewId, paneId) {\n        super();\n        this.viewId = viewId;\n        this.paneId = paneId;\n    }\n}\n/**\n * A singleton to store transfer data during drag & drop operations that are only valid within the application.\n */\nexport class LocalSelectionTransfer {\n    constructor() {\n        // protect against external instantiation\n    }\n    static getInstance() {\n        return LocalSelectionTransfer.INSTANCE;\n    }\n    hasData(proto) {\n        return proto && proto === this.proto;\n    }\n    clearData(proto) {\n        if (this.hasData(proto)) {\n            this.proto = undefined;\n            this.data = undefined;\n        }\n    }\n    getData(proto) {\n        if (this.hasData(proto)) {\n            return this.data;\n        }\n        return undefined;\n    }\n    setData(data, proto) {\n        if (proto) {\n            this.data = data;\n            this.proto = proto;\n        }\n    }\n}\nLocalSelectionTransfer.INSTANCE = new LocalSelectionTransfer();\nexport function getPanelData() {\n    const panelTransfer = LocalSelectionTransfer.getInstance();\n    const isPanelEvent = panelTransfer.hasData(PanelTransfer.prototype);\n    if (!isPanelEvent) {\n        return undefined;\n    }\n    return panelTransfer.getData(PanelTransfer.prototype)[0];\n}\nexport function getPaneData() {\n    const paneTransfer = LocalSelectionTransfer.getInstance();\n    const isPanelEvent = paneTransfer.hasData(PaneTransfer.prototype);\n    if (!isPanelEvent) {\n        return undefined;\n    }\n    return paneTransfer.getData(PaneTransfer.prototype)[0];\n}\n","export var Event;\n(function (Event) {\n    Event.any = (...children) => {\n        return (listener) => {\n            const disposables = children.map((child) => child(listener));\n            return {\n                dispose: () => {\n                    disposables.forEach((d) => {\n                        d.dispose();\n                    });\n                },\n            };\n        };\n    };\n})(Event || (Event = {}));\nexport class DockviewEvent {\n    constructor() {\n        this._defaultPrevented = false;\n    }\n    get defaultPrevented() {\n        return this._defaultPrevented;\n    }\n    preventDefault() {\n        this._defaultPrevented = true;\n    }\n}\nclass LeakageMonitor {\n    constructor() {\n        this.events = new Map();\n    }\n    get size() {\n        return this.events.size;\n    }\n    add(event, stacktrace) {\n        this.events.set(event, stacktrace);\n    }\n    delete(event) {\n        this.events.delete(event);\n    }\n    clear() {\n        this.events.clear();\n    }\n}\nclass Stacktrace {\n    static create() {\n        var _a;\n        return new Stacktrace((_a = new Error().stack) !== null && _a !== void 0 ? _a : '');\n    }\n    constructor(value) {\n        this.value = value;\n    }\n    print() {\n        console.warn('dockview: stacktrace', this.value);\n    }\n}\nclass Listener {\n    constructor(callback, stacktrace) {\n        this.callback = callback;\n        this.stacktrace = stacktrace;\n    }\n}\n// relatively simple event emitter taken from https://github.com/microsoft/vscode/blob/master/src/vs/base/common/event.ts\nexport class Emitter {\n    static setLeakageMonitorEnabled(isEnabled) {\n        if (isEnabled !== Emitter.ENABLE_TRACKING) {\n            Emitter.MEMORY_LEAK_WATCHER.clear();\n        }\n        Emitter.ENABLE_TRACKING = isEnabled;\n    }\n    get value() {\n        return this._last;\n    }\n    constructor(options) {\n        this.options = options;\n        this._listeners = [];\n        this._disposed = false;\n    }\n    get event() {\n        if (!this._event) {\n            this._event = (callback) => {\n                var _a;\n                if (((_a = this.options) === null || _a === void 0 ? void 0 : _a.replay) && this._last !== undefined) {\n                    callback(this._last);\n                }\n                const listener = new Listener(callback, Emitter.ENABLE_TRACKING ? Stacktrace.create() : undefined);\n                this._listeners.push(listener);\n                return {\n                    dispose: () => {\n                        const index = this._listeners.indexOf(listener);\n                        if (index > -1) {\n                            this._listeners.splice(index, 1);\n                        }\n                        else if (Emitter.ENABLE_TRACKING) {\n                            // console.warn(\n                            //     `dockview: listener already disposed`,\n                            //     Stacktrace.create().print()\n                            // );\n                        }\n                    },\n                };\n            };\n            if (Emitter.ENABLE_TRACKING) {\n                Emitter.MEMORY_LEAK_WATCHER.add(this._event, Stacktrace.create());\n            }\n        }\n        return this._event;\n    }\n    fire(e) {\n        this._last = e;\n        for (const listener of this._listeners) {\n            listener.callback(e);\n        }\n    }\n    dispose() {\n        if (!this._disposed) {\n            this._disposed = true;\n            if (this._listeners.length > 0) {\n                if (Emitter.ENABLE_TRACKING) {\n                    queueMicrotask(() => {\n                        var _a;\n                        // don't check until stack of execution is completed to allow for out-of-order disposals within the same execution block\n                        for (const listener of this._listeners) {\n                            console.warn('dockview: stacktrace', (_a = listener.stacktrace) === null || _a === void 0 ? void 0 : _a.print());\n                        }\n                    });\n                }\n                this._listeners = [];\n            }\n            if (Emitter.ENABLE_TRACKING && this._event) {\n                Emitter.MEMORY_LEAK_WATCHER.delete(this._event);\n            }\n        }\n    }\n}\nEmitter.ENABLE_TRACKING = false;\nEmitter.MEMORY_LEAK_WATCHER = new LeakageMonitor();\nexport function addDisposableWindowListener(element, type, listener, options) {\n    element.addEventListener(type, listener, options);\n    return {\n        dispose: () => {\n            element.removeEventListener(type, listener, options);\n        },\n    };\n}\nexport function addDisposableListener(element, type, listener, options) {\n    element.addEventListener(type, listener, options);\n    return {\n        dispose: () => {\n            element.removeEventListener(type, listener, options);\n        },\n    };\n}\n/**\n *\n * Event Emitter that fires events from a Microtask callback, only one event will fire per event-loop cycle.\n *\n * It's kind of like using an `asapScheduler` in RxJs with additional logic to only fire once per event-loop cycle.\n * This implementation exists to avoid external dependencies.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/queueMicrotask\n * @see https://rxjs.dev/api/index/const/asapScheduler\n */\nexport class AsapEvent {\n    constructor() {\n        this._onFired = new Emitter();\n        this._currentFireCount = 0;\n        this._queued = false;\n        this.onEvent = (e) => {\n            /**\n             * when the event is first subscribed to take note of the current fire count\n             */\n            const fireCountAtTimeOfEventSubscription = this._currentFireCount;\n            return this._onFired.event(() => {\n                /**\n                 * if the current fire count is greater than the fire count at event subscription\n                 * then the event has been fired since we subscribed and it's ok to \"on_next\" the event.\n                 *\n                 * if the count is not greater then what we are recieving is an event from the microtask\n                 * queue that was triggered before we actually subscribed and therfore we should ignore it.\n                 */\n                if (this._currentFireCount > fireCountAtTimeOfEventSubscription) {\n                    e();\n                }\n            });\n        };\n    }\n    fire() {\n        this._currentFireCount++;\n        if (this._queued) {\n            return;\n        }\n        this._queued = true;\n        queueMicrotask(() => {\n            this._queued = false;\n            this._onFired.fire();\n        });\n    }\n    dispose() {\n        this._onFired.dispose();\n    }\n}\n","export var Disposable;\n(function (Disposable) {\n    Disposable.NONE = {\n        dispose: () => {\n            // noop\n        },\n    };\n    function from(func) {\n        return {\n            dispose: () => {\n                func();\n            },\n        };\n    }\n    Disposable.from = from;\n})(Disposable || (Disposable = {}));\nexport class CompositeDisposable {\n    get isDisposed() {\n        return this._isDisposed;\n    }\n    constructor(...args) {\n        this._isDisposed = false;\n        this._disposables = args;\n    }\n    addDisposables(...args) {\n        args.forEach((arg) => this._disposables.push(arg));\n    }\n    dispose() {\n        if (this._isDisposed) {\n            return;\n        }\n        this._isDisposed = true;\n        this._disposables.forEach((arg) => arg.dispose());\n        this._disposables = [];\n    }\n}\nexport class MutableDisposable {\n    constructor() {\n        this._disposable = Disposable.NONE;\n    }\n    set value(disposable) {\n        if (this._disposable) {\n            this._disposable.dispose();\n        }\n        this._disposable = disposable;\n    }\n    dispose() {\n        if (this._disposable) {\n            this._disposable.dispose();\n            this._disposable = Disposable.NONE;\n        }\n    }\n}\n","import { Emitter, addDisposableListener, addDisposableWindowListener, } from './events';\nimport { CompositeDisposable } from './lifecycle';\nexport function watchElementResize(element, cb) {\n    const observer = new ResizeObserver((entires) => {\n        /**\n         * Fast browser window resize produces Error: ResizeObserver loop limit exceeded.\n         * The error isn't visible in browser console, doesn't affect functionality, but degrades performance.\n         * See https://stackoverflow.com/questions/49384120/resizeobserver-loop-limit-exceeded/58701523#58701523\n         */\n        requestAnimationFrame(() => {\n            const firstEntry = entires[0];\n            cb(firstEntry);\n        });\n    });\n    observer.observe(element);\n    return {\n        dispose: () => {\n            observer.unobserve(element);\n            observer.disconnect();\n        },\n    };\n}\nexport const removeClasses = (element, ...classes) => {\n    for (const classname of classes) {\n        if (element.classList.contains(classname)) {\n            element.classList.remove(classname);\n        }\n    }\n};\nexport const addClasses = (element, ...classes) => {\n    for (const classname of classes) {\n        if (!element.classList.contains(classname)) {\n            element.classList.add(classname);\n        }\n    }\n};\nexport const toggleClass = (element, className, isToggled) => {\n    const hasClass = element.classList.contains(className);\n    if (isToggled && !hasClass) {\n        element.classList.add(className);\n    }\n    if (!isToggled && hasClass) {\n        element.classList.remove(className);\n    }\n};\nexport function isAncestor(testChild, testAncestor) {\n    while (testChild) {\n        if (testChild === testAncestor) {\n            return true;\n        }\n        testChild = testChild.parentNode;\n    }\n    return false;\n}\nexport function getElementsByTagName(tag) {\n    return Array.prototype.slice.call(document.getElementsByTagName(tag), 0);\n}\nexport function trackFocus(element) {\n    return new FocusTracker(element);\n}\n/**\n * Track focus on an element. Ensure tabIndex is set when an HTMLElement is not focusable by default\n */\nclass FocusTracker extends CompositeDisposable {\n    constructor(element) {\n        super();\n        this._onDidFocus = new Emitter();\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidBlur = new Emitter();\n        this.onDidBlur = this._onDidBlur.event;\n        this.addDisposables(this._onDidFocus, this._onDidBlur);\n        let hasFocus = isAncestor(document.activeElement, element);\n        let loosingFocus = false;\n        const onFocus = () => {\n            loosingFocus = false;\n            if (!hasFocus) {\n                hasFocus = true;\n                this._onDidFocus.fire();\n            }\n        };\n        const onBlur = () => {\n            if (hasFocus) {\n                loosingFocus = true;\n                window.setTimeout(() => {\n                    if (loosingFocus) {\n                        loosingFocus = false;\n                        hasFocus = false;\n                        this._onDidBlur.fire();\n                    }\n                }, 0);\n            }\n        };\n        this._refreshStateHandler = () => {\n            const currentNodeHasFocus = isAncestor(document.activeElement, element);\n            if (currentNodeHasFocus !== hasFocus) {\n                if (hasFocus) {\n                    onBlur();\n                }\n                else {\n                    onFocus();\n                }\n            }\n        };\n        if (element instanceof HTMLElement) {\n            this.addDisposables(addDisposableListener(element, 'focus', onFocus, true));\n            this.addDisposables(addDisposableListener(element, 'blur', onBlur, true));\n        }\n        else {\n            this.addDisposables(addDisposableWindowListener(element, 'focus', onFocus, true));\n            this.addDisposables(addDisposableWindowListener(element, 'blur', onBlur, true));\n        }\n    }\n    refreshState() {\n        this._refreshStateHandler();\n    }\n}\n// quasi: apparently, but not really; seemingly\nconst QUASI_PREVENT_DEFAULT_KEY = 'dv-quasiPreventDefault';\n// mark an event directly for other listeners to check\nexport function quasiPreventDefault(event) {\n    event[QUASI_PREVENT_DEFAULT_KEY] = true;\n}\n// check if this event has been marked\nexport function quasiDefaultPrevented(event) {\n    return event[QUASI_PREVENT_DEFAULT_KEY];\n}\nexport function addStyles(document, styleSheetList) {\n    const styleSheets = Array.from(styleSheetList);\n    for (const styleSheet of styleSheets) {\n        if (styleSheet.href) {\n            const link = document.createElement('link');\n            link.href = styleSheet.href;\n            link.type = styleSheet.type;\n            link.rel = 'stylesheet';\n            document.head.appendChild(link);\n        }\n        let cssTexts = [];\n        try {\n            if (styleSheet.cssRules) {\n                cssTexts = Array.from(styleSheet.cssRules).map((rule) => rule.cssText);\n            }\n        }\n        catch (err) {\n            // security errors (lack of permissions), ignore\n        }\n        for (const rule of cssTexts) {\n            const style = document.createElement('style');\n            style.appendChild(document.createTextNode(rule));\n            document.head.appendChild(style);\n        }\n    }\n}\nexport function getDomNodePagePosition(domNode) {\n    const { left, top, width, height } = domNode.getBoundingClientRect();\n    return {\n        left: left + window.scrollX,\n        top: top + window.scrollY,\n        width: width,\n        height: height,\n    };\n}\n/**\n * Check whether an element is in the DOM (including the Shadow DOM)\n * @see https://terodox.tech/how-to-tell-if-an-element-is-in-the-dom-including-the-shadow-dom/\n */\nexport function isInDocument(element) {\n    let currentElement = element;\n    while (currentElement === null || currentElement === void 0 ? void 0 : currentElement.parentNode) {\n        if (currentElement.parentNode === document) {\n            return true;\n        }\n        else if (currentElement.parentNode instanceof DocumentFragment) {\n            // handle shadow DOMs\n            currentElement = currentElement.parentNode.host;\n        }\n        else {\n            currentElement = currentElement.parentNode;\n        }\n    }\n    return false;\n}\nexport function addTestId(element, id) {\n    element.setAttribute('data-testid', id);\n}\nexport function disableIframePointEvents() {\n    const iframes = [\n        ...getElementsByTagName('iframe'),\n        ...getElementsByTagName('webview'),\n    ];\n    const original = new WeakMap(); // don't hold onto HTMLElement references longer than required\n    for (const iframe of iframes) {\n        original.set(iframe, iframe.style.pointerEvents);\n        iframe.style.pointerEvents = 'none';\n    }\n    return {\n        release: () => {\n            var _a;\n            for (const iframe of iframes) {\n                iframe.style.pointerEvents = (_a = original.get(iframe)) !== null && _a !== void 0 ? _a : 'auto';\n            }\n            iframes.splice(0, iframes.length); // don't hold onto HTMLElement references longer than required\n        },\n    };\n}\n","export function tail(arr) {\n    if (arr.length === 0) {\n        throw new Error('Invalid tail call');\n    }\n    return [arr.slice(0, arr.length - 1), arr[arr.length - 1]];\n}\nexport function last(arr) {\n    return arr.length > 0 ? arr[arr.length - 1] : undefined;\n}\nexport function sequenceEquals(arr1, arr2) {\n    if (arr1.length !== arr2.length) {\n        return false;\n    }\n    for (let i = 0; i < arr1.length; i++) {\n        if (arr1[i] !== arr2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Pushes an element to the start of the array, if found.\n */\nexport function pushToStart(arr, value) {\n    const index = arr.indexOf(value);\n    if (index > -1) {\n        arr.splice(index, 1);\n        arr.unshift(value);\n    }\n}\n/**\n * Pushes an element to the end of the array, if found.\n */\nexport function pushToEnd(arr, value) {\n    const index = arr.indexOf(value);\n    if (index > -1) {\n        arr.splice(index, 1);\n        arr.push(value);\n    }\n}\nexport function firstIndex(array, fn) {\n    for (let i = 0; i < array.length; i++) {\n        const element = array[i];\n        if (fn(element)) {\n            return i;\n        }\n    }\n    return -1;\n}\nexport function remove(array, value) {\n    const index = array.findIndex((t) => t === value);\n    if (index > -1) {\n        array.splice(index, 1);\n        return true;\n    }\n    return false;\n}\n","export const clamp = (value, min, max) => {\n    if (min > max) {\n        /**\n         * caveat: an error should be thrown here if this was a proper `clamp` function but we need to handle\n         * cases where `min` > `max` and in those cases return `min`.\n         */\n        return min;\n    }\n    return Math.min(max, Math.max(value, min));\n};\nexport const sequentialNumberGenerator = () => {\n    let value = 1;\n    return { next: () => (value++).toString() };\n};\nexport const range = (from, to) => {\n    const result = [];\n    if (typeof to !== 'number') {\n        to = from;\n        from = 0;\n    }\n    if (from <= to) {\n        for (let i = from; i < to; i++) {\n            result.push(i);\n        }\n    }\n    else {\n        for (let i = from; i > to; i--) {\n            result.push(i);\n        }\n    }\n    return result;\n};\n","import { clamp } from '../math';\nexport class ViewItem {\n    set size(size) {\n        this._size = size;\n    }\n    get size() {\n        return this._size;\n    }\n    get cachedVisibleSize() {\n        return this._cachedVisibleSize;\n    }\n    get visible() {\n        return typeof this._cachedVisibleSize === 'undefined';\n    }\n    get minimumSize() {\n        return this.visible ? this.view.minimumSize : 0;\n    }\n    get viewMinimumSize() {\n        return this.view.minimumSize;\n    }\n    get maximumSize() {\n        return this.visible ? this.view.maximumSize : 0;\n    }\n    get viewMaximumSize() {\n        return this.view.maximumSize;\n    }\n    get priority() {\n        return this.view.priority;\n    }\n    get snap() {\n        return !!this.view.snap;\n    }\n    set enabled(enabled) {\n        this.container.style.pointerEvents = enabled ? '' : 'none';\n    }\n    constructor(container, view, size, disposable) {\n        this.container = container;\n        this.view = view;\n        this.disposable = disposable;\n        this._cachedVisibleSize = undefined;\n        if (typeof size === 'number') {\n            this._size = size;\n            this._cachedVisibleSize = undefined;\n            container.classList.add('visible');\n        }\n        else {\n            this._size = 0;\n            this._cachedVisibleSize = size.cachedVisibleSize;\n        }\n    }\n    setVisible(visible, size) {\n        var _a;\n        if (visible === this.visible) {\n            return;\n        }\n        if (visible) {\n            this.size = clamp((_a = this._cachedVisibleSize) !== null && _a !== void 0 ? _a : 0, this.viewMinimumSize, this.viewMaximumSize);\n            this._cachedVisibleSize = undefined;\n        }\n        else {\n            this._cachedVisibleSize =\n                typeof size === 'number' ? size : this.size;\n            this.size = 0;\n        }\n        this.container.classList.toggle('visible', visible);\n        if (this.view.setVisible) {\n            this.view.setVisible(visible);\n        }\n    }\n    dispose() {\n        this.disposable.dispose();\n        return this.view;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n * Accreditation: This file is largly based upon the MIT licenced VSCode sourcecode found at:\n * https://github.com/microsoft/vscode/tree/main/src/vs/base/browser/ui/splitview\n *--------------------------------------------------------------------------------------------*/\nimport { removeClasses, addClasses, toggleClass, disableIframePointEvents, } from '../dom';\nimport { Emitter } from '../events';\nimport { pushToStart, pushToEnd, firstIndex } from '../array';\nimport { range, clamp } from '../math';\nimport { ViewItem } from './viewItem';\nexport var Orientation;\n(function (Orientation) {\n    Orientation[\"HORIZONTAL\"] = \"HORIZONTAL\";\n    Orientation[\"VERTICAL\"] = \"VERTICAL\";\n})(Orientation || (Orientation = {}));\nexport var SashState;\n(function (SashState) {\n    SashState[SashState[\"MAXIMUM\"] = 0] = \"MAXIMUM\";\n    SashState[SashState[\"MINIMUM\"] = 1] = \"MINIMUM\";\n    SashState[SashState[\"DISABLED\"] = 2] = \"DISABLED\";\n    SashState[SashState[\"ENABLED\"] = 3] = \"ENABLED\";\n})(SashState || (SashState = {}));\nexport var LayoutPriority;\n(function (LayoutPriority) {\n    LayoutPriority[\"Low\"] = \"low\";\n    LayoutPriority[\"High\"] = \"high\";\n    LayoutPriority[\"Normal\"] = \"normal\";\n})(LayoutPriority || (LayoutPriority = {}));\nexport var Sizing;\n(function (Sizing) {\n    Sizing.Distribute = { type: 'distribute' };\n    function Split(index) {\n        return { type: 'split', index };\n    }\n    Sizing.Split = Split;\n    function Invisible(cachedVisibleSize) {\n        return { type: 'invisible', cachedVisibleSize };\n    }\n    Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\nexport class Splitview {\n    get contentSize() {\n        return this._contentSize;\n    }\n    get size() {\n        return this._size;\n    }\n    set size(value) {\n        this._size = value;\n    }\n    get orthogonalSize() {\n        return this._orthogonalSize;\n    }\n    set orthogonalSize(value) {\n        this._orthogonalSize = value;\n    }\n    get length() {\n        return this.viewItems.length;\n    }\n    get proportions() {\n        return this._proportions ? [...this._proportions] : undefined;\n    }\n    get orientation() {\n        return this._orientation;\n    }\n    set orientation(value) {\n        this._orientation = value;\n        const tmp = this.size;\n        this.size = this.orthogonalSize;\n        this.orthogonalSize = tmp;\n        removeClasses(this.element, 'horizontal', 'vertical');\n        this.element.classList.add(this.orientation == Orientation.HORIZONTAL\n            ? 'horizontal'\n            : 'vertical');\n    }\n    get minimumSize() {\n        return this.viewItems.reduce((r, item) => r + item.minimumSize, 0);\n    }\n    get maximumSize() {\n        return this.length === 0\n            ? Number.POSITIVE_INFINITY\n            : this.viewItems.reduce((r, item) => r + item.maximumSize, 0);\n    }\n    get startSnappingEnabled() {\n        return this._startSnappingEnabled;\n    }\n    set startSnappingEnabled(startSnappingEnabled) {\n        if (this._startSnappingEnabled === startSnappingEnabled) {\n            return;\n        }\n        this._startSnappingEnabled = startSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    get endSnappingEnabled() {\n        return this._endSnappingEnabled;\n    }\n    set endSnappingEnabled(endSnappingEnabled) {\n        if (this._endSnappingEnabled === endSnappingEnabled) {\n            return;\n        }\n        this._endSnappingEnabled = endSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    get disabled() {\n        return this._disabled;\n    }\n    set disabled(value) {\n        this._disabled = value;\n        toggleClass(this.element, 'dv-splitview-disabled', value);\n    }\n    get margin() {\n        return this._margin;\n    }\n    set margin(value) {\n        this._margin = value;\n    }\n    constructor(container, options) {\n        var _a;\n        this.container = container;\n        this.viewItems = [];\n        this.sashes = [];\n        this._size = 0;\n        this._orthogonalSize = 0;\n        this._contentSize = 0;\n        this._proportions = undefined;\n        this._startSnappingEnabled = true;\n        this._endSnappingEnabled = true;\n        this._disabled = false;\n        this._margin = 0;\n        this._onDidSashEnd = new Emitter();\n        this.onDidSashEnd = this._onDidSashEnd.event;\n        this._onDidAddView = new Emitter();\n        this.onDidAddView = this._onDidAddView.event;\n        this._onDidRemoveView = new Emitter();\n        this.onDidRemoveView = this._onDidRemoveView.event;\n        this.resize = (index, delta, sizes = this.viewItems.map((x) => x.size), lowPriorityIndexes, highPriorityIndexes, overloadMinDelta = Number.NEGATIVE_INFINITY, overloadMaxDelta = Number.POSITIVE_INFINITY, snapBefore, snapAfter) => {\n            if (index < 0 || index > this.viewItems.length) {\n                return 0;\n            }\n            const upIndexes = range(index, -1);\n            const downIndexes = range(index + 1, this.viewItems.length);\n            //\n            if (highPriorityIndexes) {\n                for (const i of highPriorityIndexes) {\n                    pushToStart(upIndexes, i);\n                    pushToStart(downIndexes, i);\n                }\n            }\n            if (lowPriorityIndexes) {\n                for (const i of lowPriorityIndexes) {\n                    pushToEnd(upIndexes, i);\n                    pushToEnd(downIndexes, i);\n                }\n            }\n            //\n            const upItems = upIndexes.map((i) => this.viewItems[i]);\n            const upSizes = upIndexes.map((i) => sizes[i]);\n            //\n            const downItems = downIndexes.map((i) => this.viewItems[i]);\n            const downSizes = downIndexes.map((i) => sizes[i]);\n            //\n            const minDeltaUp = upIndexes.reduce((_, i) => _ + this.viewItems[i].minimumSize - sizes[i], 0);\n            const maxDeltaUp = upIndexes.reduce((_, i) => _ + this.viewItems[i].maximumSize - sizes[i], 0);\n            //\n            const maxDeltaDown = downIndexes.length === 0\n                ? Number.POSITIVE_INFINITY\n                : downIndexes.reduce((_, i) => _ + sizes[i] - this.viewItems[i].minimumSize, 0);\n            const minDeltaDown = downIndexes.length === 0\n                ? Number.NEGATIVE_INFINITY\n                : downIndexes.reduce((_, i) => _ + sizes[i] - this.viewItems[i].maximumSize, 0);\n            //\n            const minDelta = Math.max(minDeltaUp, minDeltaDown);\n            const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n            //\n            let snapped = false;\n            if (snapBefore) {\n                const snapView = this.viewItems[snapBefore.index];\n                const visible = delta >= snapBefore.limitDelta;\n                snapped = visible !== snapView.visible;\n                snapView.setVisible(visible, snapBefore.size);\n            }\n            if (!snapped && snapAfter) {\n                const snapView = this.viewItems[snapAfter.index];\n                const visible = delta < snapAfter.limitDelta;\n                snapped = visible !== snapView.visible;\n                snapView.setVisible(visible, snapAfter.size);\n            }\n            if (snapped) {\n                return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n            }\n            //\n            const tentativeDelta = clamp(delta, minDelta, maxDelta);\n            let actualDelta = 0;\n            //\n            let deltaUp = tentativeDelta;\n            for (let i = 0; i < upItems.length; i++) {\n                const item = upItems[i];\n                const size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n                const viewDelta = size - upSizes[i];\n                actualDelta += viewDelta;\n                deltaUp -= viewDelta;\n                item.size = size;\n            }\n            //\n            let deltaDown = actualDelta;\n            for (let i = 0; i < downItems.length; i++) {\n                const item = downItems[i];\n                const size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n                const viewDelta = size - downSizes[i];\n                deltaDown += viewDelta;\n                item.size = size;\n            }\n            //\n            return delta;\n        };\n        this._orientation = options.orientation;\n        this.element = this.createContainer();\n        this.margin = (_a = options.margin) !== null && _a !== void 0 ? _a : 0;\n        this.proportionalLayout =\n            options.proportionalLayout === undefined\n                ? true\n                : !!options.proportionalLayout;\n        this.viewContainer = this.createViewContainer();\n        this.sashContainer = this.createSashContainer();\n        this.element.appendChild(this.sashContainer);\n        this.element.appendChild(this.viewContainer);\n        this.container.appendChild(this.element);\n        this.style(options.styles);\n        // We have an existing set of view, add them now\n        if (options.descriptor) {\n            this._size = options.descriptor.size;\n            options.descriptor.views.forEach((viewDescriptor, index) => {\n                const sizing = viewDescriptor.visible === undefined ||\n                    viewDescriptor.visible\n                    ? viewDescriptor.size\n                    : {\n                        type: 'invisible',\n                        cachedVisibleSize: viewDescriptor.size,\n                    };\n                const view = viewDescriptor.view;\n                this.addView(view, sizing, index, true\n                // true skip layout\n                );\n            });\n            // Initialize content size and proportions for first layout\n            this._contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n            this.saveProportions();\n        }\n    }\n    style(styles) {\n        if ((styles === null || styles === void 0 ? void 0 : styles.separatorBorder) === 'transparent') {\n            removeClasses(this.element, 'separator-border');\n            this.element.style.removeProperty('--dv-separator-border');\n        }\n        else {\n            addClasses(this.element, 'separator-border');\n            if (styles === null || styles === void 0 ? void 0 : styles.separatorBorder) {\n                this.element.style.setProperty('--dv-separator-border', styles.separatorBorder);\n            }\n        }\n    }\n    isViewVisible(index) {\n        if (index < 0 || index >= this.viewItems.length) {\n            throw new Error('Index out of bounds');\n        }\n        const viewItem = this.viewItems[index];\n        return viewItem.visible;\n    }\n    setViewVisible(index, visible) {\n        if (index < 0 || index >= this.viewItems.length) {\n            throw new Error('Index out of bounds');\n        }\n        const viewItem = this.viewItems[index];\n        viewItem.setVisible(visible, viewItem.size);\n        this.distributeEmptySpace(index);\n        this.layoutViews();\n        this.saveProportions();\n    }\n    getViewSize(index) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return -1;\n        }\n        return this.viewItems[index].size;\n    }\n    resizeView(index, size) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        const indexes = range(this.viewItems.length).filter((i) => i !== index);\n        const lowPriorityIndexes = [\n            ...indexes.filter((i) => this.viewItems[i].priority === LayoutPriority.Low),\n            index,\n        ];\n        const highPriorityIndexes = indexes.filter((i) => this.viewItems[i].priority === LayoutPriority.High);\n        const item = this.viewItems[index];\n        size = Math.round(size);\n        size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this._size));\n        item.size = size;\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    }\n    getViews() {\n        return this.viewItems.map((x) => x.view);\n    }\n    onDidChange(item, size) {\n        const index = this.viewItems.indexOf(item);\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        size = typeof size === 'number' ? size : item.size;\n        size = clamp(size, item.minimumSize, item.maximumSize);\n        item.size = size;\n        const indexes = range(this.viewItems.length).filter((i) => i !== index);\n        const lowPriorityIndexes = [\n            ...indexes.filter((i) => this.viewItems[i].priority === LayoutPriority.Low),\n            index,\n        ];\n        const highPriorityIndexes = indexes.filter((i) => this.viewItems[i].priority === LayoutPriority.High);\n        /**\n         * add this view we are changing to the low-index list since we have determined the size\n         * here and don't want it changed\n         */\n        this.relayout([...lowPriorityIndexes, index], highPriorityIndexes);\n    }\n    addView(view, size = { type: 'distribute' }, index = this.viewItems.length, skipLayout) {\n        const container = document.createElement('div');\n        container.className = 'view';\n        container.appendChild(view.element);\n        let viewSize;\n        if (typeof size === 'number') {\n            viewSize = size;\n        }\n        else if (size.type === 'split') {\n            viewSize = this.getViewSize(size.index) / 2;\n        }\n        else if (size.type === 'invisible') {\n            viewSize = { cachedVisibleSize: size.cachedVisibleSize };\n        }\n        else {\n            viewSize = view.minimumSize;\n        }\n        const disposable = view.onDidChange((newSize) => this.onDidChange(viewItem, newSize.size));\n        const viewItem = new ViewItem(container, view, viewSize, {\n            dispose: () => {\n                disposable.dispose();\n                this.viewContainer.removeChild(container);\n            },\n        });\n        if (index === this.viewItems.length) {\n            this.viewContainer.appendChild(container);\n        }\n        else {\n            this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n        }\n        this.viewItems.splice(index, 0, viewItem);\n        if (this.viewItems.length > 1) {\n            //add sash\n            const sash = document.createElement('div');\n            sash.className = 'sash';\n            const onPointerStart = (event) => {\n                for (const item of this.viewItems) {\n                    item.enabled = false;\n                }\n                const iframes = disableIframePointEvents();\n                const start = this._orientation === Orientation.HORIZONTAL\n                    ? event.clientX\n                    : event.clientY;\n                const sashIndex = firstIndex(this.sashes, (s) => s.container === sash);\n                //\n                const sizes = this.viewItems.map((x) => x.size);\n                //\n                let snapBefore;\n                let snapAfter;\n                const upIndexes = range(sashIndex, -1);\n                const downIndexes = range(sashIndex + 1, this.viewItems.length);\n                const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n                const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].viewMaximumSize - sizes[i]), 0);\n                const maxDeltaDown = downIndexes.length === 0\n                    ? Number.POSITIVE_INFINITY\n                    : downIndexes.reduce((r, i) => r +\n                        (sizes[i] - this.viewItems[i].minimumSize), 0);\n                const minDeltaDown = downIndexes.length === 0\n                    ? Number.NEGATIVE_INFINITY\n                    : downIndexes.reduce((r, i) => r +\n                        (sizes[i] -\n                            this.viewItems[i].viewMaximumSize), 0);\n                const minDelta = Math.max(minDeltaUp, minDeltaDown);\n                const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number') {\n                    const snappedViewItem = this.viewItems[snapBeforeIndex];\n                    const halfSize = Math.floor(snappedViewItem.viewMinimumSize / 2);\n                    snapBefore = {\n                        index: snapBeforeIndex,\n                        limitDelta: snappedViewItem.visible\n                            ? minDelta - halfSize\n                            : minDelta + halfSize,\n                        size: snappedViewItem.size,\n                    };\n                }\n                if (typeof snapAfterIndex === 'number') {\n                    const snappedViewItem = this.viewItems[snapAfterIndex];\n                    const halfSize = Math.floor(snappedViewItem.viewMinimumSize / 2);\n                    snapAfter = {\n                        index: snapAfterIndex,\n                        limitDelta: snappedViewItem.visible\n                            ? maxDelta + halfSize\n                            : maxDelta - halfSize,\n                        size: snappedViewItem.size,\n                    };\n                }\n                const onPointerMove = (event) => {\n                    const current = this._orientation === Orientation.HORIZONTAL\n                        ? event.clientX\n                        : event.clientY;\n                    const delta = current - start;\n                    this.resize(sashIndex, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n                    this.distributeEmptySpace();\n                    this.layoutViews();\n                };\n                const end = () => {\n                    for (const item of this.viewItems) {\n                        item.enabled = true;\n                    }\n                    iframes.release();\n                    this.saveProportions();\n                    document.removeEventListener('pointermove', onPointerMove);\n                    document.removeEventListener('pointerup', end);\n                    document.removeEventListener('pointercancel', end);\n                    this._onDidSashEnd.fire(undefined);\n                };\n                document.addEventListener('pointermove', onPointerMove);\n                document.addEventListener('pointerup', end);\n                document.addEventListener('pointercancel', end);\n            };\n            sash.addEventListener('pointerdown', onPointerStart);\n            const sashItem = {\n                container: sash,\n                disposable: () => {\n                    sash.removeEventListener('pointerdown', onPointerStart);\n                    this.sashContainer.removeChild(sash);\n                },\n            };\n            this.sashContainer.appendChild(sash);\n            this.sashes.push(sashItem);\n        }\n        if (!skipLayout) {\n            this.relayout([index]);\n        }\n        if (!skipLayout &&\n            typeof size !== 'number' &&\n            size.type === 'distribute') {\n            this.distributeViewSizes();\n        }\n        this._onDidAddView.fire(view);\n    }\n    distributeViewSizes() {\n        const flexibleViewItems = [];\n        let flexibleSize = 0;\n        for (const item of this.viewItems) {\n            if (item.maximumSize - item.minimumSize > 0) {\n                flexibleViewItems.push(item);\n                flexibleSize += item.size;\n            }\n        }\n        const size = Math.floor(flexibleSize / flexibleViewItems.length);\n        for (const item of flexibleViewItems) {\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\n        }\n        const indexes = range(this.viewItems.length);\n        const lowPriorityIndexes = indexes.filter((i) => this.viewItems[i].priority === LayoutPriority.Low);\n        const highPriorityIndexes = indexes.filter((i) => this.viewItems[i].priority === LayoutPriority.High);\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    }\n    removeView(index, sizing, skipLayout = false) {\n        // Remove view\n        const viewItem = this.viewItems.splice(index, 1)[0];\n        viewItem.dispose();\n        // Remove sash\n        if (this.viewItems.length >= 1) {\n            const sashIndex = Math.max(index - 1, 0);\n            const sashItem = this.sashes.splice(sashIndex, 1)[0];\n            sashItem.disposable();\n        }\n        if (!skipLayout) {\n            this.relayout();\n        }\n        if (sizing && sizing.type === 'distribute') {\n            this.distributeViewSizes();\n        }\n        this._onDidRemoveView.fire(viewItem.view);\n        return viewItem.view;\n    }\n    getViewCachedVisibleSize(index) {\n        if (index < 0 || index >= this.viewItems.length) {\n            throw new Error('Index out of bounds');\n        }\n        const viewItem = this.viewItems[index];\n        return viewItem.cachedVisibleSize;\n    }\n    moveView(from, to) {\n        const cachedVisibleSize = this.getViewCachedVisibleSize(from);\n        const sizing = typeof cachedVisibleSize === 'undefined'\n            ? this.getViewSize(from)\n            : Sizing.Invisible(cachedVisibleSize);\n        const view = this.removeView(from, undefined, true);\n        this.addView(view, sizing, to);\n    }\n    layout(size, orthogonalSize) {\n        const previousSize = Math.max(this.size, this._contentSize);\n        this.size = size;\n        this.orthogonalSize = orthogonalSize;\n        if (!this.proportions) {\n            const indexes = range(this.viewItems.length);\n            const lowPriorityIndexes = indexes.filter((i) => this.viewItems[i].priority === LayoutPriority.Low);\n            const highPriorityIndexes = indexes.filter((i) => this.viewItems[i].priority === LayoutPriority.High);\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        }\n        else {\n            let total = 0;\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    total += proportion;\n                }\n                else {\n                    size -= item.size;\n                }\n            }\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number' && total > 0) {\n                    item.size = clamp(Math.round((proportion * size) / total), item.minimumSize, item.maximumSize);\n                }\n            }\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    relayout(lowPriorityIndexes, highPriorityIndexes) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        this.resize(this.viewItems.length - 1, this._size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        this.distributeEmptySpace();\n        this.layoutViews();\n        this.saveProportions();\n    }\n    distributeEmptySpace(lowPriorityIndex) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        let emptyDelta = this.size - contentSize;\n        const indexes = range(this.viewItems.length - 1, -1);\n        const lowPriorityIndexes = indexes.filter((i) => this.viewItems[i].priority === LayoutPriority.Low);\n        const highPriorityIndexes = indexes.filter((i) => this.viewItems[i].priority === LayoutPriority.High);\n        for (const index of highPriorityIndexes) {\n            pushToStart(indexes, index);\n        }\n        for (const index of lowPriorityIndexes) {\n            pushToEnd(indexes, index);\n        }\n        if (typeof lowPriorityIndex === 'number') {\n            pushToEnd(indexes, lowPriorityIndex);\n        }\n        for (let i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n            const item = this.viewItems[indexes[i]];\n            const size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n            const viewDelta = size - item.size;\n            emptyDelta -= viewDelta;\n            item.size = size;\n        }\n    }\n    saveProportions() {\n        if (this.proportionalLayout && this._contentSize > 0) {\n            this._proportions = this.viewItems.map((i) => i.visible ? i.size / this._contentSize : undefined);\n        }\n    }\n    /**\n     * Margin explain:\n     *\n     * For `n` views in a splitview there will be `n-1` margins `m`.\n     *\n     * To fit the margins each view must reduce in size by `(m * (n - 1)) / n`.\n     *\n     * For each view `i` the offet must be adjusted by `m * i/(n - 1)`.\n     */\n    layoutViews() {\n        this._contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        this.updateSashEnablement();\n        if (this.viewItems.length === 0) {\n            return;\n        }\n        const visibleViewItems = this.viewItems.filter((i) => i.visible);\n        const sashCount = Math.max(0, visibleViewItems.length - 1);\n        const marginReducedSize = (this.margin * sashCount) / Math.max(1, visibleViewItems.length);\n        let totalLeftOffset = 0;\n        const viewLeftOffsets = [];\n        const sashWidth = 4; // hardcoded in css\n        const runningVisiblePanelCount = this.viewItems.reduce((arr, viewItem, i) => {\n            const flag = viewItem.visible ? 1 : 0;\n            if (i === 0) {\n                arr.push(flag);\n            }\n            else {\n                arr.push(arr[i - 1] + flag);\n            }\n            return arr;\n        }, []);\n        // calculate both view and cash positions\n        this.viewItems.forEach((view, i) => {\n            totalLeftOffset += this.viewItems[i].size;\n            viewLeftOffsets.push(totalLeftOffset);\n            const size = view.visible ? view.size - marginReducedSize : 0;\n            const visiblePanelsBeforeThisView = Math.max(0, runningVisiblePanelCount[i] - 1);\n            const offset = i === 0 || visiblePanelsBeforeThisView === 0\n                ? 0\n                : viewLeftOffsets[i - 1] +\n                    (visiblePanelsBeforeThisView / sashCount) * marginReducedSize;\n            if (i < this.viewItems.length - 1) {\n                // calculate sash position\n                const newSize = view.visible\n                    ? offset + size - sashWidth / 2 + this.margin / 2\n                    : offset;\n                if (this._orientation === Orientation.HORIZONTAL) {\n                    this.sashes[i].container.style.left = `${newSize}px`;\n                    this.sashes[i].container.style.top = `0px`;\n                }\n                if (this._orientation === Orientation.VERTICAL) {\n                    this.sashes[i].container.style.left = `0px`;\n                    this.sashes[i].container.style.top = `${newSize}px`;\n                }\n            }\n            // calculate view position\n            if (this._orientation === Orientation.HORIZONTAL) {\n                view.container.style.width = `${size}px`;\n                view.container.style.left = `${offset}px`;\n                view.container.style.top = '';\n                view.container.style.height = '';\n            }\n            if (this._orientation === Orientation.VERTICAL) {\n                view.container.style.height = `${size}px`;\n                view.container.style.top = `${offset}px`;\n                view.container.style.width = '';\n                view.container.style.left = '';\n            }\n            view.view.layout(view.size - marginReducedSize, this._orthogonalSize);\n        });\n    }\n    findFirstSnapIndex(indexes) {\n        // visible views first\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (!viewItem.visible) {\n                continue;\n            }\n            if (viewItem.snap) {\n                return index;\n            }\n        }\n        // then, hidden views\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (viewItem.visible &&\n                viewItem.maximumSize - viewItem.minimumSize > 0) {\n                return undefined;\n            }\n            if (!viewItem.visible && viewItem.snap) {\n                return index;\n            }\n        }\n        return undefined;\n    }\n    updateSashEnablement() {\n        let previous = false;\n        const collapsesDown = this.viewItems.map((i) => (previous = i.size - i.minimumSize > 0 || previous));\n        previous = false;\n        const expandsDown = this.viewItems.map((i) => (previous = i.maximumSize - i.size > 0 || previous));\n        const reverseViews = [...this.viewItems].reverse();\n        previous = false;\n        const collapsesUp = reverseViews\n            .map((i) => (previous = i.size - i.minimumSize > 0 || previous))\n            .reverse();\n        previous = false;\n        const expandsUp = reverseViews\n            .map((i) => (previous = i.maximumSize - i.size > 0 || previous))\n            .reverse();\n        let position = 0;\n        for (let index = 0; index < this.sashes.length; index++) {\n            const sash = this.sashes[index];\n            const viewItem = this.viewItems[index];\n            position += viewItem.size;\n            const min = !(collapsesDown[index] && expandsUp[index + 1]);\n            const max = !(expandsDown[index] && collapsesUp[index + 1]);\n            if (min && max) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                const snappedBefore = typeof snapBeforeIndex === 'number' &&\n                    !this.viewItems[snapBeforeIndex].visible;\n                const snappedAfter = typeof snapAfterIndex === 'number' &&\n                    !this.viewItems[snapAfterIndex].visible;\n                if (snappedBefore &&\n                    collapsesUp[index] &&\n                    (position > 0 || this.startSnappingEnabled)) {\n                    this.updateSash(sash, SashState.MINIMUM);\n                }\n                else if (snappedAfter &&\n                    collapsesDown[index] &&\n                    (position < this._contentSize || this.endSnappingEnabled)) {\n                    this.updateSash(sash, SashState.MAXIMUM);\n                }\n                else {\n                    this.updateSash(sash, SashState.DISABLED);\n                }\n            }\n            else if (min && !max) {\n                this.updateSash(sash, SashState.MINIMUM);\n            }\n            else if (!min && max) {\n                this.updateSash(sash, SashState.MAXIMUM);\n            }\n            else {\n                this.updateSash(sash, SashState.ENABLED);\n            }\n        }\n    }\n    updateSash(sash, state) {\n        toggleClass(sash.container, 'disabled', state === SashState.DISABLED);\n        toggleClass(sash.container, 'enabled', state === SashState.ENABLED);\n        toggleClass(sash.container, 'maximum', state === SashState.MAXIMUM);\n        toggleClass(sash.container, 'minimum', state === SashState.MINIMUM);\n    }\n    createViewContainer() {\n        const element = document.createElement('div');\n        element.className = 'view-container';\n        return element;\n    }\n    createSashContainer() {\n        const element = document.createElement('div');\n        element.className = 'sash-container';\n        return element;\n    }\n    createContainer() {\n        const element = document.createElement('div');\n        const orientationClassname = this._orientation === Orientation.HORIZONTAL\n            ? 'horizontal'\n            : 'vertical';\n        element.className = `split-view-container ${orientationClassname}`;\n        return element;\n    }\n    dispose() {\n        this._onDidSashEnd.dispose();\n        this._onDidAddView.dispose();\n        this._onDidRemoveView.dispose();\n        for (let i = 0; i < this.element.children.length; i++) {\n            if (this.element.children.item(i) === this.element) {\n                this.element.removeChild(this.element);\n                break;\n            }\n        }\n        for (const viewItem of this.viewItems) {\n            viewItem.dispose();\n        }\n        this.element.remove();\n    }\n}\n","import { Splitview, Orientation, } from '../splitview/splitview';\nimport { CompositeDisposable } from '../lifecycle';\nimport { Emitter } from '../events';\nimport { addClasses, removeClasses } from '../dom';\nexport class Paneview extends CompositeDisposable {\n    get onDidAddView() {\n        return this.splitview.onDidAddView;\n    }\n    get onDidRemoveView() {\n        return this.splitview.onDidRemoveView;\n    }\n    get minimumSize() {\n        return this.splitview.minimumSize;\n    }\n    get maximumSize() {\n        return this.splitview.maximumSize;\n    }\n    get orientation() {\n        return this.splitview.orientation;\n    }\n    get size() {\n        return this.splitview.size;\n    }\n    get orthogonalSize() {\n        return this.splitview.orthogonalSize;\n    }\n    constructor(container, options) {\n        var _a;\n        super();\n        this.paneItems = [];\n        this.skipAnimation = false;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._orientation = (_a = options.orientation) !== null && _a !== void 0 ? _a : Orientation.VERTICAL;\n        this.element = document.createElement('div');\n        this.element.className = 'pane-container';\n        container.appendChild(this.element);\n        this.splitview = new Splitview(this.element, {\n            orientation: this._orientation,\n            proportionalLayout: false,\n            descriptor: options.descriptor,\n        });\n        // if we've added views from the descriptor we need to\n        // add the panes to our Pane array and setup animation\n        this.getPanes().forEach((pane) => {\n            const disposable = new CompositeDisposable(pane.onDidChangeExpansionState(() => {\n                this.setupAnimation();\n                this._onDidChange.fire(undefined);\n            }));\n            const paneItem = {\n                pane,\n                disposable: {\n                    dispose: () => {\n                        disposable.dispose();\n                    },\n                },\n            };\n            this.paneItems.push(paneItem);\n            pane.orthogonalSize = this.splitview.orthogonalSize;\n        });\n        this.addDisposables(this._onDidChange, this.splitview.onDidSashEnd(() => {\n            this._onDidChange.fire(undefined);\n        }), this.splitview.onDidAddView(() => {\n            this._onDidChange.fire();\n        }), this.splitview.onDidRemoveView(() => {\n            this._onDidChange.fire();\n        }));\n    }\n    setViewVisible(index, visible) {\n        this.splitview.setViewVisible(index, visible);\n    }\n    addPane(pane, size, index = this.splitview.length, skipLayout = false) {\n        const disposable = pane.onDidChangeExpansionState(() => {\n            this.setupAnimation();\n            this._onDidChange.fire(undefined);\n        });\n        const paneItem = {\n            pane,\n            disposable: {\n                dispose: () => {\n                    disposable.dispose();\n                },\n            },\n        };\n        this.paneItems.splice(index, 0, paneItem);\n        pane.orthogonalSize = this.splitview.orthogonalSize;\n        this.splitview.addView(pane, size, index, skipLayout);\n    }\n    getViewSize(index) {\n        return this.splitview.getViewSize(index);\n    }\n    getPanes() {\n        return this.splitview.getViews();\n    }\n    removePane(index, options = { skipDispose: false }) {\n        const paneItem = this.paneItems.splice(index, 1)[0];\n        this.splitview.removeView(index);\n        if (!options.skipDispose) {\n            paneItem.disposable.dispose();\n            paneItem.pane.dispose();\n        }\n        return paneItem;\n    }\n    moveView(from, to) {\n        if (from === to) {\n            return;\n        }\n        const view = this.removePane(from, { skipDispose: true });\n        this.skipAnimation = true;\n        try {\n            this.addPane(view.pane, view.pane.size, to, false);\n        }\n        finally {\n            this.skipAnimation = false;\n        }\n    }\n    layout(size, orthogonalSize) {\n        this.splitview.layout(size, orthogonalSize);\n    }\n    setupAnimation() {\n        if (this.skipAnimation) {\n            return;\n        }\n        if (this.animationTimer) {\n            clearTimeout(this.animationTimer);\n            this.animationTimer = undefined;\n        }\n        addClasses(this.element, 'animated');\n        this.animationTimer = setTimeout(() => {\n            this.animationTimer = undefined;\n            removeClasses(this.element, 'animated');\n        }, 200);\n    }\n    dispose() {\n        super.dispose();\n        if (this.animationTimer) {\n            clearTimeout(this.animationTimer);\n            this.animationTimer = undefined;\n        }\n        this.paneItems.forEach((paneItem) => {\n            paneItem.disposable.dispose();\n            paneItem.pane.dispose();\n        });\n        this.paneItems = [];\n        this.splitview.dispose();\n        this.element.remove();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n * Accreditation: This file is largly based upon the MIT licenced VSCode sourcecode found at:\n * https://github.com/microsoft/vscode/tree/main/src/vs/base/browser/ui/grid\n *--------------------------------------------------------------------------------------------*/\nimport { Orientation } from '../splitview/splitview';\nimport { Emitter } from '../events';\nexport class LeafNode {\n    get minimumWidth() {\n        return this.view.minimumWidth;\n    }\n    get maximumWidth() {\n        return this.view.maximumWidth;\n    }\n    get minimumHeight() {\n        return this.view.minimumHeight;\n    }\n    get maximumHeight() {\n        return this.view.maximumHeight;\n    }\n    get priority() {\n        return this.view.priority;\n    }\n    get snap() {\n        return this.view.snap;\n    }\n    get minimumSize() {\n        return this.orientation === Orientation.HORIZONTAL\n            ? this.minimumHeight\n            : this.minimumWidth;\n    }\n    get maximumSize() {\n        return this.orientation === Orientation.HORIZONTAL\n            ? this.maximumHeight\n            : this.maximumWidth;\n    }\n    get minimumOrthogonalSize() {\n        return this.orientation === Orientation.HORIZONTAL\n            ? this.minimumWidth\n            : this.minimumHeight;\n    }\n    get maximumOrthogonalSize() {\n        return this.orientation === Orientation.HORIZONTAL\n            ? this.maximumWidth\n            : this.maximumHeight;\n    }\n    get orthogonalSize() {\n        return this._orthogonalSize;\n    }\n    get size() {\n        return this._size;\n    }\n    get element() {\n        return this.view.element;\n    }\n    get width() {\n        return this.orientation === Orientation.HORIZONTAL\n            ? this.orthogonalSize\n            : this.size;\n    }\n    get height() {\n        return this.orientation === Orientation.HORIZONTAL\n            ? this.size\n            : this.orthogonalSize;\n    }\n    constructor(view, orientation, orthogonalSize, size = 0) {\n        this.view = view;\n        this.orientation = orientation;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._orthogonalSize = orthogonalSize;\n        this._size = size;\n        this._disposable = this.view.onDidChange((event) => {\n            if (event) {\n                this._onDidChange.fire({\n                    size: this.orientation === Orientation.VERTICAL\n                        ? event.width\n                        : event.height,\n                    orthogonalSize: this.orientation === Orientation.VERTICAL\n                        ? event.height\n                        : event.width,\n                });\n            }\n            else {\n                this._onDidChange.fire({});\n            }\n        });\n    }\n    setVisible(visible) {\n        if (this.view.setVisible) {\n            this.view.setVisible(visible);\n        }\n    }\n    layout(size, orthogonalSize) {\n        this._size = size;\n        this._orthogonalSize = orthogonalSize;\n        this.view.layout(this.width, this.height);\n    }\n    dispose() {\n        this._onDidChange.dispose();\n        this._disposable.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n * Accreditation: This file is largly based upon the MIT licenced VSCode sourcecode found at:\n * https://github.com/microsoft/vscode/tree/main/src/vs/base/browser/ui/grid\n *--------------------------------------------------------------------------------------------*/\nimport { Splitview, Orientation, LayoutPriority, } from '../splitview/splitview';\nimport { Emitter, Event } from '../events';\nimport { LeafNode } from './leafNode';\nimport { CompositeDisposable, Disposable } from '../lifecycle';\nexport class BranchNode extends CompositeDisposable {\n    get width() {\n        return this.orientation === Orientation.HORIZONTAL\n            ? this.size\n            : this.orthogonalSize;\n    }\n    get height() {\n        return this.orientation === Orientation.HORIZONTAL\n            ? this.orthogonalSize\n            : this.size;\n    }\n    get minimumSize() {\n        return this.children.length === 0\n            ? 0\n            : Math.max(...this.children.map((c, index) => this.splitview.isViewVisible(index)\n                ? c.minimumOrthogonalSize\n                : 0));\n    }\n    get maximumSize() {\n        return Math.min(...this.children.map((c, index) => this.splitview.isViewVisible(index)\n            ? c.maximumOrthogonalSize\n            : Number.POSITIVE_INFINITY));\n    }\n    get minimumOrthogonalSize() {\n        return this.splitview.minimumSize;\n    }\n    get maximumOrthogonalSize() {\n        return this.splitview.maximumSize;\n    }\n    get orthogonalSize() {\n        return this._orthogonalSize;\n    }\n    get size() {\n        return this._size;\n    }\n    get minimumWidth() {\n        return this.orientation === Orientation.HORIZONTAL\n            ? this.minimumOrthogonalSize\n            : this.minimumSize;\n    }\n    get minimumHeight() {\n        return this.orientation === Orientation.HORIZONTAL\n            ? this.minimumSize\n            : this.minimumOrthogonalSize;\n    }\n    get maximumWidth() {\n        return this.orientation === Orientation.HORIZONTAL\n            ? this.maximumOrthogonalSize\n            : this.maximumSize;\n    }\n    get maximumHeight() {\n        return this.orientation === Orientation.HORIZONTAL\n            ? this.maximumSize\n            : this.maximumOrthogonalSize;\n    }\n    get priority() {\n        if (this.children.length === 0) {\n            return LayoutPriority.Normal;\n        }\n        const priorities = this.children.map((c) => typeof c.priority === 'undefined'\n            ? LayoutPriority.Normal\n            : c.priority);\n        if (priorities.some((p) => p === LayoutPriority.High)) {\n            return LayoutPriority.High;\n        }\n        else if (priorities.some((p) => p === LayoutPriority.Low)) {\n            return LayoutPriority.Low;\n        }\n        return LayoutPriority.Normal;\n    }\n    get disabled() {\n        return this.splitview.disabled;\n    }\n    set disabled(value) {\n        this.splitview.disabled = value;\n    }\n    get margin() {\n        return this.splitview.margin;\n    }\n    set margin(value) {\n        this.splitview.margin = value;\n        this.children.forEach((child) => {\n            if (child instanceof BranchNode) {\n                child.margin = value;\n            }\n        });\n    }\n    constructor(orientation, proportionalLayout, styles, size, orthogonalSize, disabled, margin, childDescriptors) {\n        super();\n        this.orientation = orientation;\n        this.proportionalLayout = proportionalLayout;\n        this.styles = styles;\n        this._childrenDisposable = Disposable.NONE;\n        this.children = [];\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onDidVisibilityChange = new Emitter();\n        this.onDidVisibilityChange = this._onDidVisibilityChange.event;\n        this._orthogonalSize = orthogonalSize;\n        this._size = size;\n        this.element = document.createElement('div');\n        this.element.className = 'branch-node';\n        if (!childDescriptors) {\n            this.splitview = new Splitview(this.element, {\n                orientation: this.orientation,\n                proportionalLayout,\n                styles,\n                margin,\n            });\n            this.splitview.layout(this.size, this.orthogonalSize);\n        }\n        else {\n            const descriptor = {\n                views: childDescriptors.map((childDescriptor) => {\n                    return {\n                        view: childDescriptor.node,\n                        size: childDescriptor.node.size,\n                        visible: childDescriptor.node instanceof LeafNode &&\n                            childDescriptor.visible !== undefined\n                            ? childDescriptor.visible\n                            : true,\n                    };\n                }),\n                size: this.orthogonalSize,\n            };\n            this.children = childDescriptors.map((c) => c.node);\n            this.splitview = new Splitview(this.element, {\n                orientation: this.orientation,\n                descriptor,\n                proportionalLayout,\n                styles,\n                margin,\n            });\n        }\n        this.disabled = disabled;\n        this.addDisposables(this._onDidChange, this._onDidVisibilityChange, this.splitview.onDidSashEnd(() => {\n            this._onDidChange.fire({});\n        }));\n        this.setupChildrenEvents();\n    }\n    setVisible(_visible) {\n        // noop\n    }\n    isChildVisible(index) {\n        if (index < 0 || index >= this.children.length) {\n            throw new Error('Invalid index');\n        }\n        return this.splitview.isViewVisible(index);\n    }\n    setChildVisible(index, visible) {\n        if (index < 0 || index >= this.children.length) {\n            throw new Error('Invalid index');\n        }\n        if (this.splitview.isViewVisible(index) === visible) {\n            return;\n        }\n        const wereAllChildrenHidden = this.splitview.contentSize === 0;\n        this.splitview.setViewVisible(index, visible);\n        // }\n        const areAllChildrenHidden = this.splitview.contentSize === 0;\n        // If all children are hidden then the parent should hide the entire splitview\n        // If the entire splitview is hidden then the parent should show the splitview when a child is shown\n        if ((visible && wereAllChildrenHidden) ||\n            (!visible && areAllChildrenHidden)) {\n            this._onDidVisibilityChange.fire({ visible });\n        }\n    }\n    moveChild(from, to) {\n        if (from === to) {\n            return;\n        }\n        if (from < 0 || from >= this.children.length) {\n            throw new Error('Invalid from index');\n        }\n        if (from < to) {\n            to--;\n        }\n        this.splitview.moveView(from, to);\n        const child = this._removeChild(from);\n        this._addChild(child, to);\n    }\n    getChildSize(index) {\n        if (index < 0 || index >= this.children.length) {\n            throw new Error('Invalid index');\n        }\n        return this.splitview.getViewSize(index);\n    }\n    resizeChild(index, size) {\n        if (index < 0 || index >= this.children.length) {\n            throw new Error('Invalid index');\n        }\n        this.splitview.resizeView(index, size);\n    }\n    layout(size, orthogonalSize) {\n        this._size = orthogonalSize;\n        this._orthogonalSize = size;\n        this.splitview.layout(orthogonalSize, size);\n    }\n    addChild(node, size, index, skipLayout) {\n        if (index < 0 || index > this.children.length) {\n            throw new Error('Invalid index');\n        }\n        this.splitview.addView(node, size, index, skipLayout);\n        this._addChild(node, index);\n    }\n    getChildCachedVisibleSize(index) {\n        if (index < 0 || index >= this.children.length) {\n            throw new Error('Invalid index');\n        }\n        return this.splitview.getViewCachedVisibleSize(index);\n    }\n    removeChild(index, sizing) {\n        if (index < 0 || index >= this.children.length) {\n            throw new Error('Invalid index');\n        }\n        this.splitview.removeView(index, sizing);\n        return this._removeChild(index);\n    }\n    _addChild(node, index) {\n        this.children.splice(index, 0, node);\n        this.setupChildrenEvents();\n    }\n    _removeChild(index) {\n        const [child] = this.children.splice(index, 1);\n        this.setupChildrenEvents();\n        return child;\n    }\n    setupChildrenEvents() {\n        this._childrenDisposable.dispose();\n        this._childrenDisposable = new CompositeDisposable(Event.any(...this.children.map((c) => c.onDidChange))((e) => {\n            /**\n             * indicate a change has occured to allows any re-rendering but don't bubble\n             * event because that was specific to this branch\n             */\n            this._onDidChange.fire({ size: e.orthogonalSize });\n        }), ...this.children.map((c, i) => {\n            if (c instanceof BranchNode) {\n                return c.onDidVisibilityChange(({ visible }) => {\n                    this.setChildVisible(i, visible);\n                });\n            }\n            return Disposable.NONE;\n        }));\n    }\n    dispose() {\n        this._childrenDisposable.dispose();\n        this.splitview.dispose();\n        this.children.forEach((child) => child.dispose());\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n * Accreditation: This file is largly based upon the MIT licenced VSCode sourcecode found at:\n * https://github.com/microsoft/vscode/tree/main/src/vs/base/browser/ui/grid\n *--------------------------------------------------------------------------------------------*/\nimport { Orientation, Sizing, } from '../splitview/splitview';\nimport { tail } from '../array';\nimport { LeafNode } from './leafNode';\nimport { BranchNode } from './branchNode';\nimport { Emitter } from '../events';\nimport { MutableDisposable } from '../lifecycle';\nfunction findLeaf(candiateNode, last) {\n    if (candiateNode instanceof LeafNode) {\n        return candiateNode;\n    }\n    if (candiateNode instanceof BranchNode) {\n        return findLeaf(candiateNode.children[last ? candiateNode.children.length - 1 : 0], last);\n    }\n    throw new Error('invalid node');\n}\nfunction flipNode(node, size, orthogonalSize) {\n    if (node instanceof BranchNode) {\n        const result = new BranchNode(orthogonal(node.orientation), node.proportionalLayout, node.styles, size, orthogonalSize, node.disabled, node.margin);\n        let totalSize = 0;\n        for (let i = node.children.length - 1; i >= 0; i--) {\n            const child = node.children[i];\n            const childSize = child instanceof BranchNode ? child.orthogonalSize : child.size;\n            let newSize = node.size === 0\n                ? 0\n                : Math.round((size * childSize) / node.size);\n            totalSize += newSize;\n            // The last view to add should adjust to rounding errors\n            if (i === 0) {\n                newSize += size - totalSize;\n            }\n            result.addChild(flipNode(child, orthogonalSize, newSize), newSize, 0, true);\n        }\n        return result;\n    }\n    else {\n        return new LeafNode(node.view, orthogonal(node.orientation), orthogonalSize);\n    }\n}\nexport function indexInParent(element) {\n    const parentElement = element.parentElement;\n    if (!parentElement) {\n        throw new Error('Invalid grid element');\n    }\n    let el = parentElement.firstElementChild;\n    let index = 0;\n    while (el !== element && el !== parentElement.lastElementChild && el) {\n        el = el.nextElementSibling;\n        index++;\n    }\n    return index;\n}\n/**\n * Find the grid location of a specific DOM element by traversing the parent\n * chain and finding each child index on the way.\n *\n * This will break as soon as DOM structures of the Splitview or Gridview change.\n */\nexport function getGridLocation(element) {\n    const parentElement = element.parentElement;\n    if (!parentElement) {\n        throw new Error('Invalid grid element');\n    }\n    if (/\\bgrid-view\\b/.test(parentElement.className)) {\n        return [];\n    }\n    const index = indexInParent(parentElement);\n    const ancestor = parentElement.parentElement.parentElement.parentElement;\n    return [...getGridLocation(ancestor), index];\n}\nexport function getRelativeLocation(rootOrientation, location, direction) {\n    const orientation = getLocationOrientation(rootOrientation, location);\n    const directionOrientation = getDirectionOrientation(direction);\n    if (orientation === directionOrientation) {\n        const [rest, _index] = tail(location);\n        let index = _index;\n        if (direction === 'right' || direction === 'bottom') {\n            index += 1;\n        }\n        return [...rest, index];\n    }\n    else {\n        const index = direction === 'right' || direction === 'bottom' ? 1 : 0;\n        return [...location, index];\n    }\n}\nexport function getDirectionOrientation(direction) {\n    return direction === 'top' || direction === 'bottom'\n        ? Orientation.VERTICAL\n        : Orientation.HORIZONTAL;\n}\nexport function getLocationOrientation(rootOrientation, location) {\n    return location.length % 2 === 0\n        ? orthogonal(rootOrientation)\n        : rootOrientation;\n}\nexport const orthogonal = (orientation) => orientation === Orientation.HORIZONTAL\n    ? Orientation.VERTICAL\n    : Orientation.HORIZONTAL;\nexport function isGridBranchNode(node) {\n    return !!node.children;\n}\nconst serializeBranchNode = (node, orientation) => {\n    const size = orientation === Orientation.VERTICAL ? node.box.width : node.box.height;\n    if (!isGridBranchNode(node)) {\n        if (typeof node.cachedVisibleSize === 'number') {\n            return {\n                type: 'leaf',\n                data: node.view.toJSON(),\n                size: node.cachedVisibleSize,\n                visible: false,\n            };\n        }\n        return { type: 'leaf', data: node.view.toJSON(), size };\n    }\n    return {\n        type: 'branch',\n        data: node.children.map((c) => serializeBranchNode(c, orthogonal(orientation))),\n        size,\n    };\n};\nexport class Gridview {\n    get length() {\n        return this._root ? this._root.children.length : 0;\n    }\n    get orientation() {\n        return this.root.orientation;\n    }\n    set orientation(orientation) {\n        if (this.root.orientation === orientation) {\n            return;\n        }\n        const { size, orthogonalSize } = this.root;\n        this.root = flipNode(this.root, orthogonalSize, size);\n        this.root.layout(size, orthogonalSize);\n    }\n    get width() {\n        return this.root.width;\n    }\n    get height() {\n        return this.root.height;\n    }\n    get minimumWidth() {\n        return this.root.minimumWidth;\n    }\n    get minimumHeight() {\n        return this.root.minimumHeight;\n    }\n    get maximumWidth() {\n        return this.root.maximumHeight;\n    }\n    get maximumHeight() {\n        return this.root.maximumHeight;\n    }\n    get locked() {\n        return this._locked;\n    }\n    set locked(value) {\n        this._locked = value;\n        const branch = [this.root];\n        /**\n         * simple depth-first-search to cover all nodes\n         *\n         * @see https://en.wikipedia.org/wiki/Depth-first_search\n         */\n        while (branch.length > 0) {\n            const node = branch.pop();\n            if (node instanceof BranchNode) {\n                node.disabled = value;\n                branch.push(...node.children);\n            }\n        }\n    }\n    get margin() {\n        return this._margin;\n    }\n    set margin(value) {\n        this._margin = value;\n        this.root.margin = value;\n    }\n    maximizedView() {\n        var _a;\n        return (_a = this._maximizedNode) === null || _a === void 0 ? void 0 : _a.leaf.view;\n    }\n    hasMaximizedView() {\n        return this._maximizedNode !== undefined;\n    }\n    maximizeView(view) {\n        var _a;\n        const location = getGridLocation(view.element);\n        const [_, node] = this.getNode(location);\n        if (!(node instanceof LeafNode)) {\n            return;\n        }\n        if (((_a = this._maximizedNode) === null || _a === void 0 ? void 0 : _a.leaf) === node) {\n            return;\n        }\n        if (this.hasMaximizedView()) {\n            this.exitMaximizedView();\n        }\n        const hiddenOnMaximize = [];\n        function hideAllViewsBut(parent, exclude) {\n            for (let i = 0; i < parent.children.length; i++) {\n                const child = parent.children[i];\n                if (child instanceof LeafNode) {\n                    if (child !== exclude) {\n                        if (parent.isChildVisible(i)) {\n                            parent.setChildVisible(i, false);\n                        }\n                        else {\n                            hiddenOnMaximize.push(child);\n                        }\n                    }\n                }\n                else {\n                    hideAllViewsBut(child, exclude);\n                }\n            }\n        }\n        hideAllViewsBut(this.root, node);\n        this._maximizedNode = { leaf: node, hiddenOnMaximize };\n        this._onDidMaximizedNodeChange.fire();\n    }\n    exitMaximizedView() {\n        if (!this._maximizedNode) {\n            return;\n        }\n        const hiddenOnMaximize = this._maximizedNode.hiddenOnMaximize;\n        function showViewsInReverseOrder(parent) {\n            for (let index = parent.children.length - 1; index >= 0; index--) {\n                const child = parent.children[index];\n                if (child instanceof LeafNode) {\n                    if (!hiddenOnMaximize.includes(child)) {\n                        parent.setChildVisible(index, true);\n                    }\n                }\n                else {\n                    showViewsInReverseOrder(child);\n                }\n            }\n        }\n        showViewsInReverseOrder(this.root);\n        this._maximizedNode = undefined;\n        this._onDidMaximizedNodeChange.fire();\n    }\n    serialize() {\n        if (this.hasMaximizedView()) {\n            /**\n             * do not persist maximized view state\n             * firstly exit any maximized views to ensure the correct dimensions are persisted\n             */\n            this.exitMaximizedView();\n        }\n        const root = serializeBranchNode(this.getView(), this.orientation);\n        return {\n            root,\n            width: this.width,\n            height: this.height,\n            orientation: this.orientation,\n        };\n    }\n    dispose() {\n        this.disposable.dispose();\n        this._onDidChange.dispose();\n        this._onDidMaximizedNodeChange.dispose();\n        this._onDidViewVisibilityChange.dispose();\n        this.root.dispose();\n        this._maximizedNode = undefined;\n        this.element.remove();\n    }\n    clear() {\n        const orientation = this.root.orientation;\n        this.root = new BranchNode(orientation, this.proportionalLayout, this.styles, this.root.size, this.root.orthogonalSize, this.locked, this.margin);\n    }\n    deserialize(json, deserializer) {\n        const orientation = json.orientation;\n        const height = orientation === Orientation.VERTICAL ? json.height : json.width;\n        this._deserialize(json.root, orientation, deserializer, height);\n    }\n    _deserialize(root, orientation, deserializer, orthogonalSize) {\n        this.root = this._deserializeNode(root, orientation, deserializer, orthogonalSize);\n    }\n    _deserializeNode(node, orientation, deserializer, orthogonalSize) {\n        var _a;\n        let result;\n        if (node.type === 'branch') {\n            const serializedChildren = node.data;\n            const children = serializedChildren.map((serializedChild) => {\n                return {\n                    node: this._deserializeNode(serializedChild, orthogonal(orientation), deserializer, node.size),\n                    visible: serializedChild.visible,\n                };\n            });\n            result = new BranchNode(orientation, this.proportionalLayout, this.styles, node.size, // <- orthogonal size - flips at each depth\n            orthogonalSize, // <- size - flips at each depth,\n            this.locked, this.margin, children);\n        }\n        else {\n            const view = deserializer.fromJSON(node);\n            if (typeof node.visible === 'boolean') {\n                (_a = view.setVisible) === null || _a === void 0 ? void 0 : _a.call(view, node.visible);\n            }\n            result = new LeafNode(view, orientation, orthogonalSize, node.size);\n        }\n        return result;\n    }\n    get root() {\n        return this._root;\n    }\n    set root(root) {\n        const oldRoot = this._root;\n        if (oldRoot) {\n            oldRoot.dispose();\n            this._maximizedNode = undefined;\n            this.element.removeChild(oldRoot.element);\n        }\n        this._root = root;\n        this.element.appendChild(this._root.element);\n        this.disposable.value = this._root.onDidChange((e) => {\n            this._onDidChange.fire(e);\n        });\n    }\n    /**\n     * If the root is orientated as a VERTICAL node then nest the existing root within a new HORIZIONTAL root node\n     * If the root is orientated as a HORIZONTAL node then nest the existing root within a new VERITCAL root node\n     */\n    insertOrthogonalSplitviewAtRoot() {\n        if (!this._root) {\n            return;\n        }\n        const oldRoot = this.root;\n        oldRoot.element.remove();\n        this._root = new BranchNode(orthogonal(oldRoot.orientation), this.proportionalLayout, this.styles, this.root.orthogonalSize, this.root.size, this.locked, this.margin);\n        if (oldRoot.children.length === 0) {\n            // no data so no need to add anything back in\n        }\n        else if (oldRoot.children.length === 1) {\n            // can remove one level of redundant branching if there is only a single child\n            const childReference = oldRoot.children[0];\n            const child = oldRoot.removeChild(0); // remove to prevent disposal when disposing of unwanted root\n            child.dispose();\n            oldRoot.dispose();\n            this._root.addChild(\n            /**\n             * the child node will have the same orientation as the new root since\n             * we are removing the inbetween node.\n             * the entire 'tree' must be flipped recursively to ensure that the orientation\n             * flips at each level\n             */\n            flipNode(childReference, childReference.orthogonalSize, childReference.size), Sizing.Distribute, 0);\n        }\n        else {\n            this._root.addChild(oldRoot, Sizing.Distribute, 0);\n        }\n        this.element.appendChild(this._root.element);\n        this.disposable.value = this._root.onDidChange((e) => {\n            this._onDidChange.fire(e);\n        });\n    }\n    next(location) {\n        return this.progmaticSelect(location);\n    }\n    previous(location) {\n        return this.progmaticSelect(location, true);\n    }\n    getView(location) {\n        const node = location ? this.getNode(location)[1] : this.root;\n        return this._getViews(node, this.orientation);\n    }\n    _getViews(node, orientation, cachedVisibleSize) {\n        const box = { height: node.height, width: node.width };\n        if (node instanceof LeafNode) {\n            return { box, view: node.view, cachedVisibleSize };\n        }\n        const children = [];\n        for (let i = 0; i < node.children.length; i++) {\n            const child = node.children[i];\n            const nodeCachedVisibleSize = node.getChildCachedVisibleSize(i);\n            children.push(this._getViews(child, orthogonal(orientation), nodeCachedVisibleSize));\n        }\n        return { box, children };\n    }\n    progmaticSelect(location, reverse = false) {\n        const [path, node] = this.getNode(location);\n        if (!(node instanceof LeafNode)) {\n            throw new Error('invalid location');\n        }\n        for (let i = path.length - 1; i > -1; i--) {\n            const n = path[i];\n            const l = location[i] || 0;\n            const canProgressInCurrentLevel = reverse\n                ? l - 1 > -1\n                : l + 1 < n.children.length;\n            if (canProgressInCurrentLevel) {\n                return findLeaf(n.children[reverse ? l - 1 : l + 1], reverse);\n            }\n        }\n        return findLeaf(this.root, reverse);\n    }\n    constructor(proportionalLayout, styles, orientation, locked, margin) {\n        this.proportionalLayout = proportionalLayout;\n        this.styles = styles;\n        this._locked = false;\n        this._margin = 0;\n        this._maximizedNode = undefined;\n        this.disposable = new MutableDisposable();\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onDidViewVisibilityChange = new Emitter();\n        this.onDidViewVisibilityChange = this._onDidViewVisibilityChange.event;\n        this._onDidMaximizedNodeChange = new Emitter();\n        this.onDidMaximizedNodeChange = this._onDidMaximizedNodeChange.event;\n        this.element = document.createElement('div');\n        this.element.className = 'grid-view';\n        this._locked = locked !== null && locked !== void 0 ? locked : false;\n        this._margin = margin !== null && margin !== void 0 ? margin : 0;\n        this.root = new BranchNode(orientation, proportionalLayout, styles, 0, 0, this.locked, this.margin);\n    }\n    isViewVisible(location) {\n        const [rest, index] = tail(location);\n        const [, parent] = this.getNode(rest);\n        if (!(parent instanceof BranchNode)) {\n            throw new Error('Invalid from location');\n        }\n        return parent.isChildVisible(index);\n    }\n    setViewVisible(location, visible) {\n        if (this.hasMaximizedView()) {\n            this.exitMaximizedView();\n        }\n        const [rest, index] = tail(location);\n        const [, parent] = this.getNode(rest);\n        if (!(parent instanceof BranchNode)) {\n            throw new Error('Invalid from location');\n        }\n        this._onDidViewVisibilityChange.fire();\n        parent.setChildVisible(index, visible);\n    }\n    moveView(parentLocation, from, to) {\n        if (this.hasMaximizedView()) {\n            this.exitMaximizedView();\n        }\n        const [, parent] = this.getNode(parentLocation);\n        if (!(parent instanceof BranchNode)) {\n            throw new Error('Invalid location');\n        }\n        parent.moveChild(from, to);\n    }\n    addView(view, size, location) {\n        if (this.hasMaximizedView()) {\n            this.exitMaximizedView();\n        }\n        const [rest, index] = tail(location);\n        const [pathToParent, parent] = this.getNode(rest);\n        if (parent instanceof BranchNode) {\n            const node = new LeafNode(view, orthogonal(parent.orientation), parent.orthogonalSize);\n            parent.addChild(node, size, index);\n        }\n        else {\n            const [grandParent, ..._] = [...pathToParent].reverse();\n            const [parentIndex, ...__] = [...rest].reverse();\n            let newSiblingSize = 0;\n            const newSiblingCachedVisibleSize = grandParent.getChildCachedVisibleSize(parentIndex);\n            if (typeof newSiblingCachedVisibleSize === 'number') {\n                newSiblingSize = Sizing.Invisible(newSiblingCachedVisibleSize);\n            }\n            const child = grandParent.removeChild(parentIndex);\n            child.dispose();\n            const newParent = new BranchNode(parent.orientation, this.proportionalLayout, this.styles, parent.size, parent.orthogonalSize, this.locked, this.margin);\n            grandParent.addChild(newParent, parent.size, parentIndex);\n            const newSibling = new LeafNode(parent.view, grandParent.orientation, parent.size);\n            newParent.addChild(newSibling, newSiblingSize, 0);\n            if (typeof size !== 'number' && size.type === 'split') {\n                size = { type: 'split', index: 0 };\n            }\n            const node = new LeafNode(view, grandParent.orientation, parent.size);\n            newParent.addChild(node, size, index);\n        }\n    }\n    remove(view, sizing) {\n        const location = getGridLocation(view.element);\n        return this.removeView(location, sizing);\n    }\n    removeView(location, sizing) {\n        if (this.hasMaximizedView()) {\n            this.exitMaximizedView();\n        }\n        const [rest, index] = tail(location);\n        const [pathToParent, parent] = this.getNode(rest);\n        if (!(parent instanceof BranchNode)) {\n            throw new Error('Invalid location');\n        }\n        const nodeToRemove = parent.children[index];\n        if (!(nodeToRemove instanceof LeafNode)) {\n            throw new Error('Invalid location');\n        }\n        parent.removeChild(index, sizing);\n        nodeToRemove.dispose();\n        if (parent.children.length !== 1) {\n            return nodeToRemove.view;\n        }\n        // if the parent has only one child and we know the parent is a BranchNode we can make the tree\n        // more efficiently spaced by replacing the parent BranchNode with the child.\n        // if that child is a LeafNode then we simply replace the BranchNode with the child otherwise if the child\n        // is a BranchNode too we should spread it's children into the grandparent.\n        // refer to the remaining child as the sibling\n        const sibling = parent.children[0];\n        if (pathToParent.length === 0) {\n            // if the parent is root\n            if (sibling instanceof LeafNode) {\n                // if the sibling is a leaf node no action is required\n                return nodeToRemove.view;\n            }\n            // otherwise the sibling is a branch node. since the parent is the root and the root has only one child\n            // which is a branch node we can just set this branch node to be the new root node\n            // for good housekeeping we'll removing the sibling from it's existing tree\n            parent.removeChild(0, sizing);\n            // and set that sibling node to be root\n            this.root = sibling;\n            return nodeToRemove.view;\n        }\n        // otherwise the parent is apart of a large sub-tree\n        const [grandParent, ..._] = [...pathToParent].reverse();\n        const [parentIndex, ...__] = [...rest].reverse();\n        const isSiblingVisible = parent.isChildVisible(0);\n        // either way we need to remove the sibling from it's existing tree\n        parent.removeChild(0, sizing);\n        // note the sizes of all of the grandparents children\n        const sizes = grandParent.children.map((_size, i) => grandParent.getChildSize(i));\n        // remove the parent from the grandparent since we are moving the sibling to take the parents place\n        // this parent is no longer used and can be disposed of\n        grandParent.removeChild(parentIndex, sizing).dispose();\n        if (sibling instanceof BranchNode) {\n            // replace the parent with the siblings children\n            sizes.splice(parentIndex, 1, ...sibling.children.map((c) => c.size));\n            // and add those siblings to the grandparent\n            for (let i = 0; i < sibling.children.length; i++) {\n                const child = sibling.children[i];\n                grandParent.addChild(child, child.size, parentIndex + i);\n            }\n            /**\n             * clean down the branch node since we need to dipose of it and\n             * when .dispose() it called on a branch it will dispose of any\n             * views it is holding onto.\n             */\n            while (sibling.children.length > 0) {\n                sibling.removeChild(0);\n            }\n        }\n        else {\n            // otherwise create a new leaf node and add that to the grandparent\n            const newSibling = new LeafNode(sibling.view, orthogonal(sibling.orientation), sibling.size);\n            const siblingSizing = isSiblingVisible\n                ? sibling.orthogonalSize\n                : Sizing.Invisible(sibling.orthogonalSize);\n            grandParent.addChild(newSibling, siblingSizing, parentIndex);\n        }\n        // the containing node of the sibling is no longer required and can be disposed of\n        sibling.dispose();\n        // resize everything\n        for (let i = 0; i < sizes.length; i++) {\n            grandParent.resizeChild(i, sizes[i]);\n        }\n        return nodeToRemove.view;\n    }\n    layout(width, height) {\n        const [size, orthogonalSize] = this.root.orientation === Orientation.HORIZONTAL\n            ? [height, width]\n            : [width, height];\n        this.root.layout(size, orthogonalSize);\n    }\n    getNode(location, node = this.root, path = []) {\n        if (location.length === 0) {\n            return [path, node];\n        }\n        if (!(node instanceof BranchNode)) {\n            throw new Error('Invalid location');\n        }\n        const [index, ...rest] = location;\n        if (index < 0 || index >= node.children.length) {\n            throw new Error('Invalid location');\n        }\n        const child = node.children[index];\n        path.push(node);\n        return this.getNode(rest, child, path);\n    }\n}\n","import { isInDocument, watchElementResize } from './dom';\nimport { CompositeDisposable } from './lifecycle';\nexport class Resizable extends CompositeDisposable {\n    get element() {\n        return this._element;\n    }\n    get disableResizing() {\n        return this._disableResizing;\n    }\n    set disableResizing(value) {\n        this._disableResizing = value;\n    }\n    constructor(parentElement, disableResizing = false) {\n        super();\n        this._disableResizing = disableResizing;\n        this._element = parentElement;\n        this.addDisposables(watchElementResize(this._element, (entry) => {\n            if (this.isDisposed) {\n                /**\n                 * resize is delayed through requestAnimationFrame so there is a small chance\n                 * the component has already been disposed of\n                 */\n                return;\n            }\n            if (this.disableResizing) {\n                return;\n            }\n            if (!this._element.offsetParent) {\n                /**\n                 * offsetParent === null is equivalent to display: none being set on the element or one\n                 * of it's parents. In the display: none case the size will become (0, 0) which we do\n                 * not want to propagate.\n                 *\n                 * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent\n                 *\n                 * You could use checkVisibility() but at the time of writing it's not supported across\n                 * all Browsers\n                 *\n                 * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/checkVisibility\n                 */\n                return;\n            }\n            if (!isInDocument(this._element)) {\n                /**\n                 * since the event is dispatched through requestAnimationFrame there is a small chance\n                 * the component is no longer attached to the DOM, if that is the case the dimensions\n                 * are mostly likely all zero and meaningless. we should skip this case.\n                 */\n                return;\n            }\n            const { width, height } = entry.contentRect;\n            this.layout(width, height);\n        }));\n    }\n}\n","import { Emitter, Event, AsapEvent } from '../events';\nimport { getGridLocation, Gridview } from './gridview';\nimport { Disposable } from '../lifecycle';\nimport { sequentialNumberGenerator } from '../math';\nimport { Sizing } from '../splitview/splitview';\nimport { Resizable } from '../resizable';\nconst nextLayoutId = sequentialNumberGenerator();\nexport function toTarget(direction) {\n    switch (direction) {\n        case 'left':\n            return 'left';\n        case 'right':\n            return 'right';\n        case 'above':\n            return 'top';\n        case 'below':\n            return 'bottom';\n        case 'within':\n        default:\n            return 'center';\n    }\n}\nexport class BaseGrid extends Resizable {\n    get id() {\n        return this._id;\n    }\n    get size() {\n        return this._groups.size;\n    }\n    get groups() {\n        return Array.from(this._groups.values()).map((_) => _.value);\n    }\n    get width() {\n        return this.gridview.width;\n    }\n    get height() {\n        return this.gridview.height;\n    }\n    get minimumHeight() {\n        return this.gridview.minimumHeight;\n    }\n    get maximumHeight() {\n        return this.gridview.maximumHeight;\n    }\n    get minimumWidth() {\n        return this.gridview.minimumWidth;\n    }\n    get maximumWidth() {\n        return this.gridview.maximumWidth;\n    }\n    get activeGroup() {\n        return this._activeGroup;\n    }\n    get locked() {\n        return this.gridview.locked;\n    }\n    set locked(value) {\n        this.gridview.locked = value;\n    }\n    constructor(options) {\n        super(document.createElement('div'), options.disableAutoResizing);\n        this._id = nextLayoutId.next();\n        this._groups = new Map();\n        this._onDidRemove = new Emitter();\n        this.onDidRemove = this._onDidRemove.event;\n        this._onDidAdd = new Emitter();\n        this.onDidAdd = this._onDidAdd.event;\n        this._onDidActiveChange = new Emitter();\n        this.onDidActiveChange = this._onDidActiveChange.event;\n        this._bufferOnDidLayoutChange = new AsapEvent();\n        this.onDidLayoutChange = this._bufferOnDidLayoutChange.onEvent;\n        this._onDidViewVisibilityChangeMicroTaskQueue = new AsapEvent();\n        this.onDidViewVisibilityChangeMicroTaskQueue = this._onDidViewVisibilityChangeMicroTaskQueue.onEvent;\n        this.element.style.height = '100%';\n        this.element.style.width = '100%';\n        if (typeof options.className === 'string') {\n            this.element.classList.add(options.className);\n        }\n        options.parentElement.appendChild(this.element);\n        this.gridview = new Gridview(!!options.proportionalLayout, options.styles, options.orientation, options.locked, options.margin);\n        this.gridview.locked = !!options.locked;\n        this.element.appendChild(this.gridview.element);\n        this.layout(0, 0, true); // set some elements height/widths\n        this.addDisposables(this.gridview.onDidViewVisibilityChange(() => this._onDidViewVisibilityChangeMicroTaskQueue.fire()), this.onDidViewVisibilityChangeMicroTaskQueue(() => {\n            this.layout(this.width, this.height, true);\n        }), Disposable.from(() => {\n            var _a;\n            (_a = this.element.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(this.element);\n        }), this.gridview.onDidChange(() => {\n            this._bufferOnDidLayoutChange.fire();\n        }), Event.any(this.onDidAdd, this.onDidRemove, this.onDidActiveChange)(() => {\n            this._bufferOnDidLayoutChange.fire();\n        }), this._bufferOnDidLayoutChange);\n    }\n    setVisible(panel, visible) {\n        this.gridview.setViewVisible(getGridLocation(panel.element), visible);\n        this._bufferOnDidLayoutChange.fire();\n    }\n    isVisible(panel) {\n        return this.gridview.isViewVisible(getGridLocation(panel.element));\n    }\n    maximizeGroup(panel) {\n        this.gridview.maximizeView(panel);\n        this.doSetGroupActive(panel);\n    }\n    isMaximizedGroup(panel) {\n        return this.gridview.maximizedView() === panel;\n    }\n    exitMaximizedGroup() {\n        this.gridview.exitMaximizedView();\n    }\n    hasMaximizedGroup() {\n        return this.gridview.hasMaximizedView();\n    }\n    get onDidMaximizedGroupChange() {\n        return this.gridview.onDidMaximizedNodeChange;\n    }\n    doAddGroup(group, location = [0], size) {\n        this.gridview.addView(group, size !== null && size !== void 0 ? size : Sizing.Distribute, location);\n        this._onDidAdd.fire(group);\n    }\n    doRemoveGroup(group, options) {\n        if (!this._groups.has(group.id)) {\n            throw new Error('invalid operation');\n        }\n        const item = this._groups.get(group.id);\n        const view = this.gridview.remove(group, Sizing.Distribute);\n        if (item && !(options === null || options === void 0 ? void 0 : options.skipDispose)) {\n            item.disposable.dispose();\n            item.value.dispose();\n            this._groups.delete(group.id);\n            this._onDidRemove.fire(group);\n        }\n        if (!(options === null || options === void 0 ? void 0 : options.skipActive) && this._activeGroup === group) {\n            const groups = Array.from(this._groups.values());\n            this.doSetGroupActive(groups.length > 0 ? groups[0].value : undefined);\n        }\n        return view;\n    }\n    getPanel(id) {\n        var _a;\n        return (_a = this._groups.get(id)) === null || _a === void 0 ? void 0 : _a.value;\n    }\n    doSetGroupActive(group) {\n        if (this._activeGroup === group) {\n            return;\n        }\n        if (this._activeGroup) {\n            this._activeGroup.setActive(false);\n        }\n        if (group) {\n            group.setActive(true);\n        }\n        this._activeGroup = group;\n        this._onDidActiveChange.fire(group);\n    }\n    removeGroup(group) {\n        this.doRemoveGroup(group);\n    }\n    moveToNext(options) {\n        var _a;\n        if (!options) {\n            options = {};\n        }\n        if (!options.group) {\n            if (!this.activeGroup) {\n                return;\n            }\n            options.group = this.activeGroup;\n        }\n        const location = getGridLocation(options.group.element);\n        const next = (_a = this.gridview.next(location)) === null || _a === void 0 ? void 0 : _a.view;\n        this.doSetGroupActive(next);\n    }\n    moveToPrevious(options) {\n        var _a;\n        if (!options) {\n            options = {};\n        }\n        if (!options.group) {\n            if (!this.activeGroup) {\n                return;\n            }\n            options.group = this.activeGroup;\n        }\n        const location = getGridLocation(options.group.element);\n        const next = (_a = this.gridview.previous(location)) === null || _a === void 0 ? void 0 : _a.view;\n        this.doSetGroupActive(next);\n    }\n    layout(width, height, forceResize) {\n        const different = forceResize || width !== this.width || height !== this.height;\n        if (!different) {\n            return;\n        }\n        this.gridview.element.style.height = `${height}px`;\n        this.gridview.element.style.width = `${width}px`;\n        this.gridview.layout(width, height);\n    }\n    dispose() {\n        this._onDidActiveChange.dispose();\n        this._onDidAdd.dispose();\n        this._onDidRemove.dispose();\n        for (const group of this.groups) {\n            group.dispose();\n        }\n        this.gridview.dispose();\n        super.dispose();\n    }\n}\n","import { Emitter } from '../events';\nexport class SplitviewApi {\n    /**\n     * The minimum size  the component can reach where size is measured in the direction of orientation provided.\n     */\n    get minimumSize() {\n        return this.component.minimumSize;\n    }\n    /**\n     * The maximum size the component can reach where size is measured in the direction of orientation provided.\n     */\n    get maximumSize() {\n        return this.component.maximumSize;\n    }\n    /**\n     * Width of the component.\n     */\n    get width() {\n        return this.component.width;\n    }\n    /**\n     * Height of the component.\n     */\n    get height() {\n        return this.component.height;\n    }\n    /**\n     * The current number of panels.\n     */\n    get length() {\n        return this.component.length;\n    }\n    /**\n     * The current orientation of the component.\n     */\n    get orientation() {\n        return this.component.orientation;\n    }\n    /**\n     * The list of current panels.\n     */\n    get panels() {\n        return this.component.panels;\n    }\n    /**\n     * Invoked after a layout is loaded through the `fromJSON` method.\n     */\n    get onDidLayoutFromJSON() {\n        return this.component.onDidLayoutFromJSON;\n    }\n    /**\n     * Invoked whenever any aspect of the layout changes.\n     * If listening to this event it may be worth debouncing ouputs.\n     */\n    get onDidLayoutChange() {\n        return this.component.onDidLayoutChange;\n    }\n    /**\n     * Invoked when a view is added.\n     */\n    get onDidAddView() {\n        return this.component.onDidAddView;\n    }\n    /**\n     * Invoked when a view is removed.\n     */\n    get onDidRemoveView() {\n        return this.component.onDidRemoveView;\n    }\n    constructor(component) {\n        this.component = component;\n    }\n    /**\n     * Removes an existing panel and optionally provide a `Sizing` method\n     * for the subsequent resize.\n     */\n    removePanel(panel, sizing) {\n        this.component.removePanel(panel, sizing);\n    }\n    /**\n     * Focus the component.\n     */\n    focus() {\n        this.component.focus();\n    }\n    /**\n     * Get the reference to a panel given it's `string` id.\n     */\n    getPanel(id) {\n        return this.component.getPanel(id);\n    }\n    /**\n     * Layout the panel with a width and height.\n     */\n    layout(width, height) {\n        return this.component.layout(width, height);\n    }\n    /**\n     * Add a new panel and return the created instance.\n     */\n    addPanel(options) {\n        return this.component.addPanel(options);\n    }\n    /**\n     * Move a panel given it's current and desired index.\n     */\n    movePanel(from, to) {\n        this.component.movePanel(from, to);\n    }\n    /**\n     * Deserialize a layout to built a splitivew.\n     */\n    fromJSON(data) {\n        this.component.fromJSON(data);\n    }\n    /** Serialize a layout */\n    toJSON() {\n        return this.component.toJSON();\n    }\n    /**\n     * Remove all panels and clear the component.\n     */\n    clear() {\n        this.component.clear();\n    }\n    /**\n     * Update configuratable options.\n     */\n    updateOptions(options) {\n        this.component.updateOptions(options);\n    }\n    /**\n     * Release resources and teardown component. Do not call when using framework versions of dockview.\n     */\n    dispose() {\n        this.component.dispose();\n    }\n}\nexport class PaneviewApi {\n    /**\n     * The minimum size  the component can reach where size is measured in the direction of orientation provided.\n     */\n    get minimumSize() {\n        return this.component.minimumSize;\n    }\n    /**\n     * The maximum size the component can reach where size is measured in the direction of orientation provided.\n     */\n    get maximumSize() {\n        return this.component.maximumSize;\n    }\n    /**\n     * Width of the component.\n     */\n    get width() {\n        return this.component.width;\n    }\n    /**\n     * Height of the component.\n     */\n    get height() {\n        return this.component.height;\n    }\n    /**\n     * All panel objects.\n     */\n    get panels() {\n        return this.component.panels;\n    }\n    /**\n     * Invoked when any layout change occures, an aggregation of many events.\n     */\n    get onDidLayoutChange() {\n        return this.component.onDidLayoutChange;\n    }\n    /**\n     * Invoked after a layout is deserialzied using the `fromJSON` method.\n     */\n    get onDidLayoutFromJSON() {\n        return this.component.onDidLayoutFromJSON;\n    }\n    /**\n     * Invoked when a panel is added. May be called multiple times when moving panels.\n     */\n    get onDidAddView() {\n        return this.component.onDidAddView;\n    }\n    /**\n     * Invoked when a panel is removed. May be called multiple times when moving panels.\n     */\n    get onDidRemoveView() {\n        return this.component.onDidRemoveView;\n    }\n    /**\n     * Invoked when a Drag'n'Drop event occurs that the component was unable to handle. Exposed for custom Drag'n'Drop functionality.\n     */\n    get onDidDrop() {\n        const emitter = new Emitter();\n        const disposable = this.component.onDidDrop((e) => {\n            emitter.fire(Object.assign(Object.assign({}, e), { api: this }));\n        });\n        emitter.dispose = () => {\n            disposable.dispose();\n            emitter.dispose();\n        };\n        return emitter.event;\n    }\n    constructor(component) {\n        this.component = component;\n    }\n    /**\n     * Remove a panel given the panel object.\n     */\n    removePanel(panel) {\n        this.component.removePanel(panel);\n    }\n    /**\n     * Get a panel object given a `string` id. May return `undefined`.\n     */\n    getPanel(id) {\n        return this.component.getPanel(id);\n    }\n    /**\n     * Move a panel given it's current and desired index.\n     */\n    movePanel(from, to) {\n        this.component.movePanel(from, to);\n    }\n    /**\n     *  Focus the component. Will try to focus an active panel if one exists.\n     */\n    focus() {\n        this.component.focus();\n    }\n    /**\n     * Force resize the component to an exact width and height. Read about auto-resizing before using.\n     */\n    layout(width, height) {\n        this.component.layout(width, height);\n    }\n    /**\n     * Add a panel and return the created object.\n     */\n    addPanel(options) {\n        return this.component.addPanel(options);\n    }\n    /**\n     * Create a component from a serialized object.\n     */\n    fromJSON(data) {\n        this.component.fromJSON(data);\n    }\n    /**\n     * Create a serialized object of the current component.\n     */\n    toJSON() {\n        return this.component.toJSON();\n    }\n    /**\n     * Reset the component back to an empty and default state.\n     */\n    clear() {\n        this.component.clear();\n    }\n    /**\n     * Update configuratable options.\n     */\n    updateOptions(options) {\n        this.component.updateOptions(options);\n    }\n    /**\n     * Release resources and teardown component. Do not call when using framework versions of dockview.\n     */\n    dispose() {\n        this.component.dispose();\n    }\n}\nexport class GridviewApi {\n    /**\n     * Width of the component.\n     */\n    get width() {\n        return this.component.width;\n    }\n    /**\n     * Height of the component.\n     */\n    get height() {\n        return this.component.height;\n    }\n    /**\n     * Minimum height of the component.\n     */\n    get minimumHeight() {\n        return this.component.minimumHeight;\n    }\n    /**\n     * Maximum height of the component.\n     */\n    get maximumHeight() {\n        return this.component.maximumHeight;\n    }\n    /**\n     * Minimum width of the component.\n     */\n    get minimumWidth() {\n        return this.component.minimumWidth;\n    }\n    /**\n     * Maximum width of the component.\n     */\n    get maximumWidth() {\n        return this.component.maximumWidth;\n    }\n    /**\n     * Invoked when any layout change occures, an aggregation of many events.\n     */\n    get onDidLayoutChange() {\n        return this.component.onDidLayoutChange;\n    }\n    /**\n     * Invoked when a panel is added. May be called multiple times when moving panels.\n     */\n    get onDidAddPanel() {\n        return this.component.onDidAddGroup;\n    }\n    /**\n     * Invoked when a panel is removed. May be called multiple times when moving panels.\n     */\n    get onDidRemovePanel() {\n        return this.component.onDidRemoveGroup;\n    }\n    /**\n     * Invoked when the active panel changes. May be undefined if no panel is active.\n     */\n    get onDidActivePanelChange() {\n        return this.component.onDidActiveGroupChange;\n    }\n    /**\n     * Invoked after a layout is deserialzied using the `fromJSON` method.\n     */\n    get onDidLayoutFromJSON() {\n        return this.component.onDidLayoutFromJSON;\n    }\n    /**\n     * All panel objects.\n     */\n    get panels() {\n        return this.component.groups;\n    }\n    /**\n     * Current orientation. Can be changed after initialization.\n     */\n    get orientation() {\n        return this.component.orientation;\n    }\n    set orientation(value) {\n        this.component.updateOptions({ orientation: value });\n    }\n    constructor(component) {\n        this.component = component;\n    }\n    /**\n     *  Focus the component. Will try to focus an active panel if one exists.\n     */\n    focus() {\n        this.component.focus();\n    }\n    /**\n     * Force resize the component to an exact width and height. Read about auto-resizing before using.\n     */\n    layout(width, height, force = false) {\n        this.component.layout(width, height, force);\n    }\n    /**\n     * Add a panel and return the created object.\n     */\n    addPanel(options) {\n        return this.component.addPanel(options);\n    }\n    /**\n     * Remove a panel given the panel object.\n     */\n    removePanel(panel, sizing) {\n        this.component.removePanel(panel, sizing);\n    }\n    /**\n     * Move a panel in a particular direction relative to another panel.\n     */\n    movePanel(panel, options) {\n        this.component.movePanel(panel, options);\n    }\n    /**\n     * Get a panel object given a `string` id. May return `undefined`.\n     */\n    getPanel(id) {\n        return this.component.getPanel(id);\n    }\n    /**\n     * Create a component from a serialized object.\n     */\n    fromJSON(data) {\n        return this.component.fromJSON(data);\n    }\n    /**\n     * Create a serialized object of the current component.\n     */\n    toJSON() {\n        return this.component.toJSON();\n    }\n    /**\n     * Reset the component back to an empty and default state.\n     */\n    clear() {\n        this.component.clear();\n    }\n    updateOptions(options) {\n        this.component.updateOptions(options);\n    }\n    /**\n     * Release resources and teardown component. Do not call when using framework versions of dockview.\n     */\n    dispose() {\n        this.component.dispose();\n    }\n}\nexport class DockviewApi {\n    /**\n     * The unique identifier for this instance. Used to manage scope of Drag'n'Drop events.\n     */\n    get id() {\n        return this.component.id;\n    }\n    /**\n     * Width of the component.\n     */\n    get width() {\n        return this.component.width;\n    }\n    /**\n     * Height of the component.\n     */\n    get height() {\n        return this.component.height;\n    }\n    /**\n     * Minimum height of the component.\n     */\n    get minimumHeight() {\n        return this.component.minimumHeight;\n    }\n    /**\n     * Maximum height of the component.\n     */\n    get maximumHeight() {\n        return this.component.maximumHeight;\n    }\n    /**\n     * Minimum width of the component.\n     */\n    get minimumWidth() {\n        return this.component.minimumWidth;\n    }\n    /**\n     * Maximum width of the component.\n     */\n    get maximumWidth() {\n        return this.component.maximumWidth;\n    }\n    /**\n     * Total number of groups.\n     */\n    get size() {\n        return this.component.size;\n    }\n    /**\n     * Total number of panels.\n     */\n    get totalPanels() {\n        return this.component.totalPanels;\n    }\n    get gap() {\n        return this.component.gap;\n    }\n    /**\n     * Invoked when the active group changes. May be undefined if no group is active.\n     */\n    get onDidActiveGroupChange() {\n        return this.component.onDidActiveGroupChange;\n    }\n    /**\n     * Invoked when a group is added. May be called multiple times when moving groups.\n     */\n    get onDidAddGroup() {\n        return this.component.onDidAddGroup;\n    }\n    /**\n     * Invoked when a group is removed. May be called multiple times when moving groups.\n     */\n    get onDidRemoveGroup() {\n        return this.component.onDidRemoveGroup;\n    }\n    /**\n     * Invoked when the active panel changes. May be undefined if no panel is active.\n     */\n    get onDidActivePanelChange() {\n        return this.component.onDidActivePanelChange;\n    }\n    /**\n     * Invoked when a panel is added. May be called multiple times when moving panels.\n     */\n    get onDidAddPanel() {\n        return this.component.onDidAddPanel;\n    }\n    /**\n     * Invoked when a panel is removed. May be called multiple times when moving panels.\n     */\n    get onDidRemovePanel() {\n        return this.component.onDidRemovePanel;\n    }\n    get onDidMovePanel() {\n        return this.component.onDidMovePanel;\n    }\n    /**\n     * Invoked after a layout is deserialzied using the `fromJSON` method.\n     */\n    get onDidLayoutFromJSON() {\n        return this.component.onDidLayoutFromJSON;\n    }\n    /**\n     * Invoked when any layout change occures, an aggregation of many events.\n     */\n    get onDidLayoutChange() {\n        return this.component.onDidLayoutChange;\n    }\n    /**\n     * Invoked when a Drag'n'Drop event occurs that the component was unable to handle. Exposed for custom Drag'n'Drop functionality.\n     */\n    get onDidDrop() {\n        return this.component.onDidDrop;\n    }\n    /**\n     * Invoked when a Drag'n'Drop event occurs but before dockview handles it giving the user an opportunity to intecept and\n     * prevent the event from occuring using the standard `preventDefault()` syntax.\n     *\n     * Preventing certain events may causes unexpected behaviours, use carefully.\n     */\n    get onWillDrop() {\n        return this.component.onWillDrop;\n    }\n    /**\n     * Invoked before an overlay is shown indicating a drop target.\n     *\n     * Calling `event.preventDefault()` will prevent the overlay being shown and prevent\n     * the any subsequent drop event.\n     */\n    get onWillShowOverlay() {\n        return this.component.onWillShowOverlay;\n    }\n    /**\n     * Invoked before a group is dragged.\n     *\n     * Calling `event.nativeEvent.preventDefault()` will prevent the group drag starting.\n     *\n     */\n    get onWillDragGroup() {\n        return this.component.onWillDragGroup;\n    }\n    /**\n     * Invoked before a panel is dragged.\n     *\n     * Calling `event.nativeEvent.preventDefault()` will prevent the panel drag starting.\n     */\n    get onWillDragPanel() {\n        return this.component.onWillDragPanel;\n    }\n    get onUnhandledDragOverEvent() {\n        return this.component.onUnhandledDragOverEvent;\n    }\n    /**\n     * All panel objects.\n     */\n    get panels() {\n        return this.component.panels;\n    }\n    /**\n     * All group objects.\n     */\n    get groups() {\n        return this.component.groups;\n    }\n    /**\n     *  Active panel object.\n     */\n    get activePanel() {\n        return this.component.activePanel;\n    }\n    /**\n     * Active group object.\n     */\n    get activeGroup() {\n        return this.component.activeGroup;\n    }\n    constructor(component) {\n        this.component = component;\n    }\n    /**\n     *  Focus the component. Will try to focus an active panel if one exists.\n     */\n    focus() {\n        this.component.focus();\n    }\n    /**\n     * Get a panel object given a `string` id. May return `undefined`.\n     */\n    getPanel(id) {\n        return this.component.getGroupPanel(id);\n    }\n    /**\n     * Force resize the component to an exact width and height. Read about auto-resizing before using.\n     */\n    layout(width, height, force = false) {\n        this.component.layout(width, height, force);\n    }\n    /**\n     * Add a panel and return the created object.\n     */\n    addPanel(options) {\n        return this.component.addPanel(options);\n    }\n    /**\n     * Remove a panel given the panel object.\n     */\n    removePanel(panel) {\n        this.component.removePanel(panel);\n    }\n    /**\n     * Add a group and return the created object.\n     */\n    addGroup(options) {\n        return this.component.addGroup(options);\n    }\n    /**\n     * Close all groups and panels.\n     */\n    closeAllGroups() {\n        return this.component.closeAllGroups();\n    }\n    /**\n     * Remove a group and any panels within the group.\n     */\n    removeGroup(group) {\n        this.component.removeGroup(group);\n    }\n    /**\n     * Get a group object given a `string` id. May return undefined.\n     */\n    getGroup(id) {\n        return this.component.getPanel(id);\n    }\n    /**\n     * Add a floating group\n     */\n    addFloatingGroup(item, options) {\n        return this.component.addFloatingGroup(item, options);\n    }\n    /**\n     * Create a component from a serialized object.\n     */\n    fromJSON(data) {\n        this.component.fromJSON(data);\n    }\n    /**\n     * Create a serialized object of the current component.\n     */\n    toJSON() {\n        return this.component.toJSON();\n    }\n    /**\n     * Reset the component back to an empty and default state.\n     */\n    clear() {\n        this.component.clear();\n    }\n    /**\n     * Move the focus progmatically to the next panel or group.\n     */\n    moveToNext(options) {\n        this.component.moveToNext(options);\n    }\n    /**\n     * Move the focus progmatically to the previous panel or group.\n     */\n    moveToPrevious(options) {\n        this.component.moveToPrevious(options);\n    }\n    maximizeGroup(panel) {\n        this.component.maximizeGroup(panel.group);\n    }\n    hasMaximizedGroup() {\n        return this.component.hasMaximizedGroup();\n    }\n    exitMaximizedGroup() {\n        this.component.exitMaximizedGroup();\n    }\n    get onDidMaximizedGroupChange() {\n        return this.component.onDidMaximizedGroupChange;\n    }\n    /**\n     * Add a popout group in a new Window\n     */\n    addPopoutGroup(item, options) {\n        return this.component.addPopoutGroup(item, options);\n    }\n    setGap(gap) {\n        this.component.updateOptions({ gap });\n    }\n    updateOptions(options) {\n        this.component.updateOptions(options);\n    }\n    /**\n     * Release resources and teardown component. Do not call when using framework versions of dockview.\n     */\n    dispose() {\n        this.component.dispose();\n    }\n}\n","import { disableIframePointEvents } from '../dom';\nimport { addDisposableListener, Emitter } from '../events';\nimport { CompositeDisposable, MutableDisposable, } from '../lifecycle';\nexport class DragHandler extends CompositeDisposable {\n    constructor(el) {\n        super();\n        this.el = el;\n        this.dataDisposable = new MutableDisposable();\n        this.pointerEventsDisposable = new MutableDisposable();\n        this._onDragStart = new Emitter();\n        this.onDragStart = this._onDragStart.event;\n        this.addDisposables(this._onDragStart, this.dataDisposable, this.pointerEventsDisposable);\n        this.configure();\n    }\n    isCancelled(_event) {\n        return false;\n    }\n    configure() {\n        this.addDisposables(this._onDragStart, addDisposableListener(this.el, 'dragstart', (event) => {\n            if (event.defaultPrevented || this.isCancelled(event)) {\n                event.preventDefault();\n                return;\n            }\n            const iframes = disableIframePointEvents();\n            this.pointerEventsDisposable.value = {\n                dispose: () => {\n                    iframes.release();\n                },\n            };\n            this.el.classList.add('dv-dragged');\n            setTimeout(() => this.el.classList.remove('dv-dragged'), 0);\n            this.dataDisposable.value = this.getData(event);\n            this._onDragStart.fire(event);\n            if (event.dataTransfer) {\n                event.dataTransfer.effectAllowed = 'move';\n                const hasData = event.dataTransfer.items.length > 0;\n                if (!hasData) {\n                    /**\n                     * Although this is not used by dockview many third party dnd libraries will check\n                     * dataTransfer.types to determine valid drag events.\n                     *\n                     * For example: in react-dnd if dataTransfer.types is not set then the dragStart event will be cancelled\n                     * through .preventDefault(). Since this is applied globally to all drag events this would break dockviews\n                     * dnd logic. You can see the code at\n                     * https://github.com/react-dnd/react-dnd/blob/main/packages/backend-html5/src/HTML5BackendImpl.ts#L542\n                     */\n                    event.dataTransfer.setData('text/plain', '__dockview_internal_drag_event__');\n                }\n            }\n        }), addDisposableListener(this.el, 'dragend', () => {\n            this.pointerEventsDisposable.dispose();\n            this.dataDisposable.dispose();\n        }));\n    }\n}\n","import { addDisposableListener } from '../events';\nimport { CompositeDisposable } from '../lifecycle';\nexport class DragAndDropObserver extends CompositeDisposable {\n    constructor(element, callbacks) {\n        super();\n        this.element = element;\n        this.callbacks = callbacks;\n        this.target = null;\n        this.registerListeners();\n    }\n    onDragEnter(e) {\n        this.target = e.target;\n        this.callbacks.onDragEnter(e);\n    }\n    onDragOver(e) {\n        e.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n        if (this.callbacks.onDragOver) {\n            this.callbacks.onDragOver(e);\n        }\n    }\n    onDragLeave(e) {\n        if (this.target === e.target) {\n            this.target = null;\n            this.callbacks.onDragLeave(e);\n        }\n    }\n    onDragEnd(e) {\n        this.target = null;\n        this.callbacks.onDragEnd(e);\n    }\n    onDrop(e) {\n        this.callbacks.onDrop(e);\n    }\n    registerListeners() {\n        this.addDisposables(addDisposableListener(this.element, 'dragenter', (e) => {\n            this.onDragEnter(e);\n        }, true));\n        this.addDisposables(addDisposableListener(this.element, 'dragover', (e) => {\n            this.onDragOver(e);\n        }, true));\n        this.addDisposables(addDisposableListener(this.element, 'dragleave', (e) => {\n            this.onDragLeave(e);\n        }));\n        this.addDisposables(addDisposableListener(this.element, 'dragend', (e) => {\n            this.onDragEnd(e);\n        }));\n        this.addDisposables(addDisposableListener(this.element, 'drop', (e) => {\n            this.onDrop(e);\n        }));\n    }\n}\n","import { toggleClass } from '../dom';\nimport { DockviewEvent, Emitter } from '../events';\nimport { CompositeDisposable } from '../lifecycle';\nimport { DragAndDropObserver } from './dnd';\nimport { clamp } from '../math';\nexport class WillShowOverlayEvent extends DockviewEvent {\n    get nativeEvent() {\n        return this.options.nativeEvent;\n    }\n    get position() {\n        return this.options.position;\n    }\n    constructor(options) {\n        super();\n        this.options = options;\n    }\n}\nexport function directionToPosition(direction) {\n    switch (direction) {\n        case 'above':\n            return 'top';\n        case 'below':\n            return 'bottom';\n        case 'left':\n            return 'left';\n        case 'right':\n            return 'right';\n        case 'within':\n            return 'center';\n        default:\n            throw new Error(`invalid direction '${direction}'`);\n    }\n}\nexport function positionToDirection(position) {\n    switch (position) {\n        case 'top':\n            return 'above';\n        case 'bottom':\n            return 'below';\n        case 'left':\n            return 'left';\n        case 'right':\n            return 'right';\n        case 'center':\n            return 'within';\n        default:\n            throw new Error(`invalid position '${position}'`);\n    }\n}\nconst DEFAULT_ACTIVATION_SIZE = {\n    value: 20,\n    type: 'percentage',\n};\nconst DEFAULT_SIZE = {\n    value: 50,\n    type: 'percentage',\n};\nconst SMALL_WIDTH_BOUNDARY = 100;\nconst SMALL_HEIGHT_BOUNDARY = 100;\nexport class Droptarget extends CompositeDisposable {\n    get state() {\n        return this._state;\n    }\n    constructor(element, options) {\n        super();\n        this.element = element;\n        this.options = options;\n        this._onDrop = new Emitter();\n        this.onDrop = this._onDrop.event;\n        this._onWillShowOverlay = new Emitter();\n        this.onWillShowOverlay = this._onWillShowOverlay.event;\n        // use a set to take advantage of #<set>.has\n        this._acceptedTargetZonesSet = new Set(this.options.acceptedTargetZones);\n        this.dnd = new DragAndDropObserver(this.element, {\n            onDragEnter: () => undefined,\n            onDragOver: (e) => {\n                if (this._acceptedTargetZonesSet.size === 0) {\n                    this.removeDropTarget();\n                    return;\n                }\n                const width = this.element.clientWidth;\n                const height = this.element.clientHeight;\n                if (width === 0 || height === 0) {\n                    return; // avoid div!0\n                }\n                const rect = e.currentTarget.getBoundingClientRect();\n                const x = e.clientX - rect.left;\n                const y = e.clientY - rect.top;\n                const quadrant = this.calculateQuadrant(this._acceptedTargetZonesSet, x, y, width, height);\n                /**\n                 * If the event has already been used by another DropTarget instance\n                 * then don't show a second drop target, only one target should be\n                 * active at any one time\n                 */\n                if (this.isAlreadyUsed(e) || quadrant === null) {\n                    // no drop target should be displayed\n                    this.removeDropTarget();\n                    return;\n                }\n                if (!this.options.canDisplayOverlay(e, quadrant)) {\n                    this.removeDropTarget();\n                    return;\n                }\n                const willShowOverlayEvent = new WillShowOverlayEvent({\n                    nativeEvent: e,\n                    position: quadrant,\n                });\n                /**\n                 * Provide an opportunity to prevent the overlay appearing and in turn\n                 * any dnd behaviours\n                 */\n                this._onWillShowOverlay.fire(willShowOverlayEvent);\n                if (willShowOverlayEvent.defaultPrevented) {\n                    this.removeDropTarget();\n                    return;\n                }\n                this.markAsUsed(e);\n                if (!this.targetElement) {\n                    this.targetElement = document.createElement('div');\n                    this.targetElement.className = 'drop-target-dropzone';\n                    this.overlayElement = document.createElement('div');\n                    this.overlayElement.className = 'drop-target-selection';\n                    this._state = 'center';\n                    this.targetElement.appendChild(this.overlayElement);\n                    this.element.classList.add('drop-target');\n                    this.element.append(this.targetElement);\n                }\n                this.toggleClasses(quadrant, width, height);\n                this._state = quadrant;\n            },\n            onDragLeave: () => {\n                this.removeDropTarget();\n            },\n            onDragEnd: () => {\n                this.removeDropTarget();\n            },\n            onDrop: (e) => {\n                e.preventDefault();\n                const state = this._state;\n                this.removeDropTarget();\n                if (state) {\n                    // only stop the propagation of the event if we are dealing with it\n                    // which is only when the target has state\n                    e.stopPropagation();\n                    this._onDrop.fire({ position: state, nativeEvent: e });\n                }\n            },\n        });\n        this.addDisposables(this._onDrop, this._onWillShowOverlay, this.dnd);\n    }\n    setTargetZones(acceptedTargetZones) {\n        this._acceptedTargetZonesSet = new Set(acceptedTargetZones);\n    }\n    setOverlayModel(model) {\n        this.options.overlayModel = model;\n    }\n    dispose() {\n        this.removeDropTarget();\n        super.dispose();\n    }\n    /**\n     * Add a property to the event object for other potential listeners to check\n     */\n    markAsUsed(event) {\n        event[Droptarget.USED_EVENT_ID] = true;\n    }\n    /**\n     * Check is the event has already been used by another instance of DropTarget\n     */\n    isAlreadyUsed(event) {\n        const value = event[Droptarget.USED_EVENT_ID];\n        return typeof value === 'boolean' && value;\n    }\n    toggleClasses(quadrant, width, height) {\n        var _a, _b;\n        if (!this.overlayElement) {\n            return;\n        }\n        const isSmallX = width < SMALL_WIDTH_BOUNDARY;\n        const isSmallY = height < SMALL_HEIGHT_BOUNDARY;\n        const isLeft = quadrant === 'left';\n        const isRight = quadrant === 'right';\n        const isTop = quadrant === 'top';\n        const isBottom = quadrant === 'bottom';\n        const rightClass = !isSmallX && isRight;\n        const leftClass = !isSmallX && isLeft;\n        const topClass = !isSmallY && isTop;\n        const bottomClass = !isSmallY && isBottom;\n        let size = 1;\n        const sizeOptions = (_b = (_a = this.options.overlayModel) === null || _a === void 0 ? void 0 : _a.size) !== null && _b !== void 0 ? _b : DEFAULT_SIZE;\n        if (sizeOptions.type === 'percentage') {\n            size = clamp(sizeOptions.value, 0, 100) / 100;\n        }\n        else {\n            if (rightClass || leftClass) {\n                size = clamp(0, sizeOptions.value, width) / width;\n            }\n            if (topClass || bottomClass) {\n                size = clamp(0, sizeOptions.value, height) / height;\n            }\n        }\n        const box = { top: '0px', left: '0px', width: '100%', height: '100%' };\n        /**\n         * You can also achieve the overlay placement using the transform CSS property\n         * to translate and scale the element however this has the undesired effect of\n         * 'skewing' the element. Comment left here for anybody that ever revisits this.\n         *\n         * @see https://developer.mozilla.org/en-US/docs/Web/CSS/transform\n         *\n         * right\n         * translateX(${100 * (1 - size) / 2}%) scaleX(${scale})\n         *\n         * left\n         * translateX(-${100 * (1 - size) / 2}%) scaleX(${scale})\n         *\n         * top\n         * translateY(-${100 * (1 - size) / 2}%) scaleY(${scale})\n         *\n         * bottom\n         * translateY(${100 * (1 - size) / 2}%) scaleY(${scale})\n         */\n        if (rightClass) {\n            box.left = `${100 * (1 - size)}%`;\n            box.width = `${100 * size}%`;\n        }\n        else if (leftClass) {\n            box.width = `${100 * size}%`;\n        }\n        else if (topClass) {\n            box.height = `${100 * size}%`;\n        }\n        else if (bottomClass) {\n            box.top = `${100 * (1 - size)}%`;\n            box.height = `${100 * size}%`;\n        }\n        this.overlayElement.style.top = box.top;\n        this.overlayElement.style.left = box.left;\n        this.overlayElement.style.width = box.width;\n        this.overlayElement.style.height = box.height;\n        toggleClass(this.overlayElement, 'dv-drop-target-small-vertical', isSmallY);\n        toggleClass(this.overlayElement, 'dv-drop-target-small-horizontal', isSmallX);\n        toggleClass(this.overlayElement, 'dv-drop-target-left', isLeft);\n        toggleClass(this.overlayElement, 'dv-drop-target-right', isRight);\n        toggleClass(this.overlayElement, 'dv-drop-target-top', isTop);\n        toggleClass(this.overlayElement, 'dv-drop-target-bottom', isBottom);\n        toggleClass(this.overlayElement, 'dv-drop-target-center', quadrant === 'center');\n    }\n    calculateQuadrant(overlayType, x, y, width, height) {\n        var _a, _b;\n        const activationSizeOptions = (_b = (_a = this.options.overlayModel) === null || _a === void 0 ? void 0 : _a.activationSize) !== null && _b !== void 0 ? _b : DEFAULT_ACTIVATION_SIZE;\n        const isPercentage = activationSizeOptions.type === 'percentage';\n        if (isPercentage) {\n            return calculateQuadrantAsPercentage(overlayType, x, y, width, height, activationSizeOptions.value);\n        }\n        return calculateQuadrantAsPixels(overlayType, x, y, width, height, activationSizeOptions.value);\n    }\n    removeDropTarget() {\n        if (this.targetElement) {\n            this._state = undefined;\n            this.element.removeChild(this.targetElement);\n            this.targetElement = undefined;\n            this.overlayElement = undefined;\n            this.element.classList.remove('drop-target');\n        }\n    }\n}\nDroptarget.USED_EVENT_ID = '__dockview_droptarget_event_is_used__';\nexport function calculateQuadrantAsPercentage(overlayType, x, y, width, height, threshold) {\n    const xp = (100 * x) / width;\n    const yp = (100 * y) / height;\n    if (overlayType.has('left') && xp < threshold) {\n        return 'left';\n    }\n    if (overlayType.has('right') && xp > 100 - threshold) {\n        return 'right';\n    }\n    if (overlayType.has('top') && yp < threshold) {\n        return 'top';\n    }\n    if (overlayType.has('bottom') && yp > 100 - threshold) {\n        return 'bottom';\n    }\n    if (!overlayType.has('center')) {\n        return null;\n    }\n    return 'center';\n}\nexport function calculateQuadrantAsPixels(overlayType, x, y, width, height, threshold) {\n    if (overlayType.has('left') && x < threshold) {\n        return 'left';\n    }\n    if (overlayType.has('right') && x > width - threshold) {\n        return 'right';\n    }\n    if (overlayType.has('top') && y < threshold) {\n        return 'top';\n    }\n    if (overlayType.has('bottom') && y > height - threshold) {\n        return 'bottom';\n    }\n    if (!overlayType.has('center')) {\n        return null;\n    }\n    return 'center';\n}\n","import { DockviewEvent, Emitter } from '../events';\nimport { CompositeDisposable, MutableDisposable } from '../lifecycle';\nexport class WillFocusEvent extends DockviewEvent {\n    constructor() {\n        super();\n    }\n}\n/**\n * A core api implementation that should be used across all panel-like objects\n */\nexport class PanelApiImpl extends CompositeDisposable {\n    get isFocused() {\n        return this._isFocused;\n    }\n    get isActive() {\n        return this._isActive;\n    }\n    get isVisible() {\n        return this._isVisible;\n    }\n    get width() {\n        return this._width;\n    }\n    get height() {\n        return this._height;\n    }\n    constructor(id, component) {\n        super();\n        this.id = id;\n        this.component = component;\n        this._isFocused = false;\n        this._isActive = false;\n        this._isVisible = true;\n        this._width = 0;\n        this._height = 0;\n        this._parameters = {};\n        this.panelUpdatesDisposable = new MutableDisposable();\n        this._onDidDimensionChange = new Emitter();\n        this.onDidDimensionsChange = this._onDidDimensionChange.event;\n        this._onDidChangeFocus = new Emitter();\n        this.onDidFocusChange = this._onDidChangeFocus.event;\n        //\n        this._onWillFocus = new Emitter();\n        this.onWillFocus = this._onWillFocus.event;\n        //\n        this._onDidVisibilityChange = new Emitter();\n        this.onDidVisibilityChange = this._onDidVisibilityChange.event;\n        this._onWillVisibilityChange = new Emitter();\n        this.onWillVisibilityChange = this._onWillVisibilityChange.event;\n        this._onDidActiveChange = new Emitter();\n        this.onDidActiveChange = this._onDidActiveChange.event;\n        this._onActiveChange = new Emitter();\n        this.onActiveChange = this._onActiveChange.event;\n        this._onDidParametersChange = new Emitter();\n        this.onDidParametersChange = this._onDidParametersChange.event;\n        this.addDisposables(this.onDidFocusChange((event) => {\n            this._isFocused = event.isFocused;\n        }), this.onDidActiveChange((event) => {\n            this._isActive = event.isActive;\n        }), this.onDidVisibilityChange((event) => {\n            this._isVisible = event.isVisible;\n        }), this.onDidDimensionsChange((event) => {\n            this._width = event.width;\n            this._height = event.height;\n        }), this.panelUpdatesDisposable, this._onDidDimensionChange, this._onDidChangeFocus, this._onDidVisibilityChange, this._onDidActiveChange, this._onWillFocus, this._onActiveChange, this._onWillFocus, this._onWillVisibilityChange, this._onDidParametersChange);\n    }\n    getParameters() {\n        return this._parameters;\n    }\n    initialize(panel) {\n        this.panelUpdatesDisposable.value = this._onDidParametersChange.event((parameters) => {\n            this._parameters = parameters;\n            panel.update({\n                params: parameters,\n            });\n        });\n    }\n    setVisible(isVisible) {\n        this._onWillVisibilityChange.fire({ isVisible });\n    }\n    setActive() {\n        this._onActiveChange.fire();\n    }\n    updateParameters(parameters) {\n        this._onDidParametersChange.fire(parameters);\n    }\n}\n","import { Emitter } from '../events';\nimport { PanelApiImpl } from './panelApi';\nexport class SplitviewPanelApiImpl extends PanelApiImpl {\n    //\n    constructor(id, component) {\n        super(id, component);\n        this._onDidConstraintsChangeInternal = new Emitter();\n        this.onDidConstraintsChangeInternal = this._onDidConstraintsChangeInternal.event;\n        //\n        this._onDidConstraintsChange = new Emitter({\n            replay: true,\n        });\n        this.onDidConstraintsChange = this._onDidConstraintsChange.event;\n        //\n        this._onDidSizeChange = new Emitter();\n        this.onDidSizeChange = this._onDidSizeChange.event;\n        this.addDisposables(this._onDidConstraintsChangeInternal, this._onDidConstraintsChange, this._onDidSizeChange);\n    }\n    setConstraints(value) {\n        this._onDidConstraintsChangeInternal.fire(value);\n    }\n    setSize(event) {\n        this._onDidSizeChange.fire(event);\n    }\n}\n","import { Emitter } from '../events';\nimport { SplitviewPanelApiImpl } from './splitviewPanelApi';\nexport class PaneviewPanelApiImpl extends SplitviewPanelApiImpl {\n    set pane(pane) {\n        this._pane = pane;\n    }\n    constructor(id, component) {\n        super(id, component);\n        this._onDidExpansionChange = new Emitter({\n            replay: true,\n        });\n        this.onDidExpansionChange = this._onDidExpansionChange.event;\n        this._onMouseEnter = new Emitter({});\n        this.onMouseEnter = this._onMouseEnter.event;\n        this._onMouseLeave = new Emitter({});\n        this.onMouseLeave = this._onMouseLeave.event;\n        this.addDisposables(this._onDidExpansionChange, this._onMouseEnter, this._onMouseLeave);\n    }\n    setExpanded(isExpanded) {\n        var _a;\n        (_a = this._pane) === null || _a === void 0 ? void 0 : _a.setExpanded(isExpanded);\n    }\n    get isExpanded() {\n        var _a;\n        return !!((_a = this._pane) === null || _a === void 0 ? void 0 : _a.isExpanded());\n    }\n}\n","import { trackFocus } from '../dom';\nimport { CompositeDisposable } from '../lifecycle';\nimport { WillFocusEvent } from '../api/panelApi';\nexport class BasePanelView extends CompositeDisposable {\n    get element() {\n        return this._element;\n    }\n    get width() {\n        return this._width;\n    }\n    get height() {\n        return this._height;\n    }\n    get params() {\n        var _a;\n        return (_a = this._params) === null || _a === void 0 ? void 0 : _a.params;\n    }\n    constructor(id, component, api) {\n        super();\n        this.id = id;\n        this.component = component;\n        this.api = api;\n        this._height = 0;\n        this._width = 0;\n        this._element = document.createElement('div');\n        this._element.tabIndex = -1;\n        this._element.style.outline = 'none';\n        this._element.style.height = '100%';\n        this._element.style.width = '100%';\n        this._element.style.overflow = 'hidden';\n        const focusTracker = trackFocus(this._element);\n        this.addDisposables(this.api, focusTracker.onDidFocus(() => {\n            this.api._onDidChangeFocus.fire({ isFocused: true });\n        }), focusTracker.onDidBlur(() => {\n            this.api._onDidChangeFocus.fire({ isFocused: false });\n        }), focusTracker);\n    }\n    focus() {\n        const event = new WillFocusEvent();\n        this.api._onWillFocus.fire(event);\n        if (event.defaultPrevented) {\n            return;\n        }\n        this._element.focus();\n    }\n    layout(width, height) {\n        this._width = width;\n        this._height = height;\n        this.api._onDidDimensionChange.fire({ width, height });\n        if (this.part) {\n            if (this._params) {\n                this.part.update(this._params.params);\n            }\n        }\n    }\n    init(parameters) {\n        this._params = parameters;\n        this.part = this.getComponent();\n    }\n    update(event) {\n        var _a, _b;\n        // merge the new parameters with the existing parameters\n        this._params = Object.assign(Object.assign({}, this._params), { params: Object.assign(Object.assign({}, (_a = this._params) === null || _a === void 0 ? void 0 : _a.params), event.params) });\n        /**\n         * delete new keys that have a value of undefined,\n         * allow values of null\n         */\n        for (const key of Object.keys(event.params)) {\n            if (event.params[key] === undefined) {\n                delete this._params.params[key];\n            }\n        }\n        // update the view with the updated props\n        (_b = this.part) === null || _b === void 0 ? void 0 : _b.update({ params: this._params.params });\n    }\n    toJSON() {\n        var _a, _b;\n        const params = (_b = (_a = this._params) === null || _a === void 0 ? void 0 : _a.params) !== null && _b !== void 0 ? _b : {};\n        return {\n            id: this.id,\n            component: this.component,\n            params: Object.keys(params).length > 0 ? params : undefined,\n        };\n    }\n    dispose() {\n        var _a;\n        this.api.dispose();\n        (_a = this.part) === null || _a === void 0 ? void 0 : _a.dispose();\n        super.dispose();\n    }\n}\n","import { PaneviewPanelApiImpl } from '../api/paneviewPanelApi';\nimport { addClasses, removeClasses } from '../dom';\nimport { addDisposableListener, Emitter } from '../events';\nimport { BasePanelView, } from '../gridview/basePanelView';\nimport { Orientation } from '../splitview/splitview';\nexport class PaneviewPanel extends BasePanelView {\n    set orientation(value) {\n        this._orientation = value;\n    }\n    get orientation() {\n        return this._orientation;\n    }\n    get minimumSize() {\n        const headerSize = this.headerSize;\n        const expanded = this.isExpanded();\n        const minimumBodySize = expanded ? this._minimumBodySize : 0;\n        return headerSize + minimumBodySize;\n    }\n    get maximumSize() {\n        const headerSize = this.headerSize;\n        const expanded = this.isExpanded();\n        const maximumBodySize = expanded ? this._maximumBodySize : 0;\n        return headerSize + maximumBodySize;\n    }\n    get size() {\n        return this._size;\n    }\n    get orthogonalSize() {\n        return this._orthogonalSize;\n    }\n    set orthogonalSize(size) {\n        this._orthogonalSize = size;\n    }\n    get minimumBodySize() {\n        return this._minimumBodySize;\n    }\n    set minimumBodySize(value) {\n        this._minimumBodySize = typeof value === 'number' ? value : 0;\n    }\n    get maximumBodySize() {\n        return this._maximumBodySize;\n    }\n    set maximumBodySize(value) {\n        this._maximumBodySize =\n            typeof value === 'number' ? value : Number.POSITIVE_INFINITY;\n    }\n    get headerVisible() {\n        return this._headerVisible;\n    }\n    set headerVisible(value) {\n        this._headerVisible = value;\n        this.header.style.display = value ? '' : 'none';\n    }\n    constructor(id, component, headerComponent, orientation, isExpanded, isHeaderVisible) {\n        super(id, component, new PaneviewPanelApiImpl(id, component));\n        this.headerComponent = headerComponent;\n        this._onDidChangeExpansionState = new Emitter({ replay: true });\n        this.onDidChangeExpansionState = this._onDidChangeExpansionState.event;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this.headerSize = 22;\n        this._orthogonalSize = 0;\n        this._size = 0;\n        this._minimumBodySize = 100;\n        this._maximumBodySize = Number.POSITIVE_INFINITY;\n        this._isExpanded = false;\n        this.expandedSize = 0;\n        this.api.pane = this; // TODO cannot use 'this' before 'super'\n        this.api.initialize(this);\n        this._isExpanded = isExpanded;\n        this._headerVisible = isHeaderVisible;\n        this._onDidChangeExpansionState.fire(this.isExpanded()); // initialize value\n        this._orientation = orientation;\n        this.element.classList.add('pane');\n        this.addDisposables(this.api.onWillVisibilityChange((event) => {\n            const { isVisible } = event;\n            const { accessor } = this._params;\n            accessor.setVisible(this, isVisible);\n        }), this.api.onDidSizeChange((event) => {\n            this._onDidChange.fire({ size: event.size });\n        }), addDisposableListener(this.element, 'mouseenter', (ev) => {\n            this.api._onMouseEnter.fire(ev);\n        }), addDisposableListener(this.element, 'mouseleave', (ev) => {\n            this.api._onMouseLeave.fire(ev);\n        }));\n        this.addDisposables(this._onDidChangeExpansionState, this.onDidChangeExpansionState((isPanelExpanded) => {\n            this.api._onDidExpansionChange.fire({\n                isExpanded: isPanelExpanded,\n            });\n        }), this.api.onDidFocusChange((e) => {\n            if (!this.header) {\n                return;\n            }\n            if (e.isFocused) {\n                addClasses(this.header, 'focused');\n            }\n            else {\n                removeClasses(this.header, 'focused');\n            }\n        }));\n        this.renderOnce();\n    }\n    setVisible(isVisible) {\n        this.api._onDidVisibilityChange.fire({ isVisible });\n    }\n    setActive(isActive) {\n        this.api._onDidActiveChange.fire({ isActive });\n    }\n    isExpanded() {\n        return this._isExpanded;\n    }\n    setExpanded(expanded) {\n        if (this._isExpanded === expanded) {\n            return;\n        }\n        this._isExpanded = expanded;\n        if (expanded) {\n            if (this.animationTimer) {\n                clearTimeout(this.animationTimer);\n            }\n            if (this.body) {\n                this.element.appendChild(this.body);\n            }\n        }\n        else {\n            this.animationTimer = setTimeout(() => {\n                var _a;\n                (_a = this.body) === null || _a === void 0 ? void 0 : _a.remove();\n            }, 200);\n        }\n        this._onDidChange.fire(expanded ? { size: this.width } : {});\n        this._onDidChangeExpansionState.fire(expanded);\n    }\n    layout(size, orthogonalSize) {\n        this._size = size;\n        this._orthogonalSize = orthogonalSize;\n        const [width, height] = this.orientation === Orientation.HORIZONTAL\n            ? [size, orthogonalSize]\n            : [orthogonalSize, size];\n        if (this.isExpanded()) {\n            this.expandedSize = width;\n        }\n        super.layout(width, height);\n    }\n    init(parameters) {\n        var _a, _b;\n        super.init(parameters);\n        if (typeof parameters.minimumBodySize === 'number') {\n            this.minimumBodySize = parameters.minimumBodySize;\n        }\n        if (typeof parameters.maximumBodySize === 'number') {\n            this.maximumBodySize = parameters.maximumBodySize;\n        }\n        this.bodyPart = this.getBodyComponent();\n        this.headerPart = this.getHeaderComponent();\n        this.bodyPart.init(Object.assign(Object.assign({}, parameters), { api: this.api }));\n        this.headerPart.init(Object.assign(Object.assign({}, parameters), { api: this.api }));\n        (_a = this.body) === null || _a === void 0 ? void 0 : _a.append(this.bodyPart.element);\n        (_b = this.header) === null || _b === void 0 ? void 0 : _b.append(this.headerPart.element);\n        if (typeof parameters.isExpanded === 'boolean') {\n            this.setExpanded(parameters.isExpanded);\n        }\n    }\n    toJSON() {\n        const params = this._params;\n        return Object.assign(Object.assign({}, super.toJSON()), { headerComponent: this.headerComponent, title: params.title });\n    }\n    renderOnce() {\n        this.header = document.createElement('div');\n        this.header.tabIndex = 0;\n        this.header.className = 'pane-header';\n        this.header.style.height = `${this.headerSize}px`;\n        this.header.style.lineHeight = `${this.headerSize}px`;\n        this.header.style.minHeight = `${this.headerSize}px`;\n        this.header.style.maxHeight = `${this.headerSize}px`;\n        this.element.appendChild(this.header);\n        this.body = document.createElement('div');\n        this.body.className = 'pane-body';\n        this.element.appendChild(this.body);\n    }\n    // TODO slightly hacky by-pass of the component to create a body and header component\n    getComponent() {\n        return {\n            update: (params) => {\n                var _a, _b;\n                (_a = this.bodyPart) === null || _a === void 0 ? void 0 : _a.update({ params });\n                (_b = this.headerPart) === null || _b === void 0 ? void 0 : _b.update({ params });\n            },\n            dispose: () => {\n                var _a, _b;\n                (_a = this.bodyPart) === null || _a === void 0 ? void 0 : _a.dispose();\n                (_b = this.headerPart) === null || _b === void 0 ? void 0 : _b.dispose();\n            },\n        };\n    }\n}\n","import { PaneviewApi } from '../api/component.api';\nimport { DragHandler } from '../dnd/abstractDragHandler';\nimport { getPaneData, LocalSelectionTransfer, PaneTransfer, } from '../dnd/dataTransfer';\nimport { Droptarget } from '../dnd/droptarget';\nimport { Emitter } from '../events';\nimport { PaneviewPanel, } from './paneviewPanel';\nexport class DraggablePaneviewPanel extends PaneviewPanel {\n    constructor(accessor, id, component, headerComponent, orientation, isExpanded, disableDnd) {\n        super(id, component, headerComponent, orientation, isExpanded, true);\n        this.accessor = accessor;\n        this._onDidDrop = new Emitter();\n        this.onDidDrop = this._onDidDrop.event;\n        if (!disableDnd) {\n            this.initDragFeatures();\n        }\n    }\n    initDragFeatures() {\n        if (!this.header) {\n            return;\n        }\n        const id = this.id;\n        const accessorId = this.accessor.id;\n        this.header.draggable = true;\n        this.handler = new (class PaneDragHandler extends DragHandler {\n            getData() {\n                LocalSelectionTransfer.getInstance().setData([new PaneTransfer(accessorId, id)], PaneTransfer.prototype);\n                return {\n                    dispose: () => {\n                        LocalSelectionTransfer.getInstance().clearData(PaneTransfer.prototype);\n                    },\n                };\n            }\n        })(this.header);\n        this.target = new Droptarget(this.element, {\n            acceptedTargetZones: ['top', 'bottom'],\n            overlayModel: {\n                activationSize: { type: 'percentage', value: 50 },\n            },\n            canDisplayOverlay: (event) => {\n                const data = getPaneData();\n                if (data) {\n                    if (data.paneId !== this.id &&\n                        data.viewId === this.accessor.id) {\n                        return true;\n                    }\n                }\n                if (this.accessor.options.showDndOverlay) {\n                    return this.accessor.options.showDndOverlay({\n                        nativeEvent: event,\n                        getData: getPaneData,\n                        panel: this,\n                    });\n                }\n                return false;\n            },\n        });\n        this.addDisposables(this._onDidDrop, this.handler, this.target, this.target.onDrop((event) => {\n            this.onDrop(event);\n        }));\n    }\n    onDrop(event) {\n        const data = getPaneData();\n        if (!data || data.viewId !== this.accessor.id) {\n            // if there is no local drag event for this panel\n            // or if the drag event was creating by another Paneview instance\n            this._onDidDrop.fire(Object.assign(Object.assign({}, event), { panel: this, api: new PaneviewApi(this.accessor), getData: getPaneData }));\n            return;\n        }\n        const containerApi = this._params\n            .containerApi;\n        const panelId = data.paneId;\n        const existingPanel = containerApi.getPanel(panelId);\n        if (!existingPanel) {\n            // if the panel doesn't exist\n            this._onDidDrop.fire(Object.assign(Object.assign({}, event), { panel: this, getData: getPaneData, api: new PaneviewApi(this.accessor) }));\n            return;\n        }\n        const allPanels = containerApi.panels;\n        const fromIndex = allPanels.indexOf(existingPanel);\n        let toIndex = containerApi.panels.indexOf(this);\n        if (event.position === 'left' || event.position === 'top') {\n            toIndex = Math.max(0, toIndex - 1);\n        }\n        if (event.position === 'right' || event.position === 'bottom') {\n            if (fromIndex > toIndex) {\n                toIndex++;\n            }\n            toIndex = Math.min(allPanels.length - 1, toIndex);\n        }\n        containerApi.movePanel(fromIndex, toIndex);\n    }\n}\n","import { CompositeDisposable, MutableDisposable, } from '../../../lifecycle';\nimport { Emitter, } from '../../../events';\nimport { trackFocus } from '../../../dom';\nimport { Droptarget } from '../../../dnd/droptarget';\nimport { getPanelData } from '../../../dnd/dataTransfer';\nexport class ContentContainer extends CompositeDisposable {\n    get element() {\n        return this._element;\n    }\n    constructor(accessor, group) {\n        super();\n        this.accessor = accessor;\n        this.group = group;\n        this.disposable = new MutableDisposable();\n        this._onDidFocus = new Emitter();\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidBlur = new Emitter();\n        this.onDidBlur = this._onDidBlur.event;\n        this._element = document.createElement('div');\n        this._element.className = 'content-container';\n        this._element.tabIndex = -1;\n        this.addDisposables(this._onDidFocus, this._onDidBlur);\n        this.dropTarget = new Droptarget(this.element, {\n            acceptedTargetZones: ['top', 'bottom', 'left', 'right', 'center'],\n            canDisplayOverlay: (event, position) => {\n                if (this.group.locked === 'no-drop-target' ||\n                    (this.group.locked && position === 'center')) {\n                    return false;\n                }\n                const data = getPanelData();\n                if (!data &&\n                    event.shiftKey &&\n                    this.group.location.type !== 'floating') {\n                    return false;\n                }\n                if (data && data.viewId === this.accessor.id) {\n                    if (data.groupId === this.group.id) {\n                        if (position === 'center') {\n                            // don't allow to drop on self for center position\n                            return false;\n                        }\n                        if (data.panelId === null) {\n                            // don't allow group move to drop anywhere on self\n                            return false;\n                        }\n                    }\n                    const groupHasOnePanelAndIsActiveDragElement = this.group.panels.length === 1 &&\n                        data.groupId === this.group.id;\n                    return !groupHasOnePanelAndIsActiveDragElement;\n                }\n                return this.group.canDisplayOverlay(event, position, 'content');\n            },\n        });\n        this.addDisposables(this.dropTarget);\n    }\n    show() {\n        this.element.style.display = '';\n    }\n    hide() {\n        this.element.style.display = 'none';\n    }\n    renderPanel(panel, options = { asActive: true }) {\n        const doRender = options.asActive ||\n            (this.panel && this.group.isPanelActive(this.panel));\n        if (this.panel &&\n            this.panel.view.content.element.parentElement === this._element) {\n            /**\n             * If the currently attached panel is mounted directly to the content then remove it\n             */\n            this._element.removeChild(this.panel.view.content.element);\n        }\n        this.panel = panel;\n        let container;\n        switch (panel.api.renderer) {\n            case 'onlyWhenVisible':\n                this.group.renderContainer.detatch(panel);\n                if (this.panel) {\n                    if (doRender) {\n                        this._element.appendChild(this.panel.view.content.element);\n                    }\n                }\n                container = this._element;\n                break;\n            case 'always':\n                if (panel.view.content.element.parentElement === this._element) {\n                    this._element.removeChild(panel.view.content.element);\n                }\n                container = this.group.renderContainer.attach({\n                    panel,\n                    referenceContainer: this,\n                });\n                break;\n        }\n        if (doRender) {\n            const focusTracker = trackFocus(container);\n            const disposable = new CompositeDisposable();\n            disposable.addDisposables(focusTracker, focusTracker.onDidFocus(() => this._onDidFocus.fire()), focusTracker.onDidBlur(() => this._onDidBlur.fire()));\n            this.disposable.value = disposable;\n        }\n    }\n    openPanel(panel) {\n        if (this.panel === panel) {\n            return;\n        }\n        this.renderPanel(panel);\n    }\n    layout(_width, _height) {\n        // noop\n    }\n    closePanel() {\n        var _a;\n        if (this.panel) {\n            if (this.panel.api.renderer === 'onlyWhenVisible') {\n                (_a = this.panel.view.content.element.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(this.panel.view.content.element);\n            }\n        }\n        this.panel = undefined;\n    }\n    dispose() {\n        this.disposable.dispose();\n        super.dispose();\n    }\n}\n","import { addDisposableListener, Emitter } from '../../../events';\nimport { CompositeDisposable } from '../../../lifecycle';\nimport { getPanelData, LocalSelectionTransfer, PanelTransfer, } from '../../../dnd/dataTransfer';\nimport { toggleClass } from '../../../dom';\nimport { Droptarget, } from '../../../dnd/droptarget';\nimport { DragHandler } from '../../../dnd/abstractDragHandler';\nclass TabDragHandler extends DragHandler {\n    constructor(element, accessor, group, panel) {\n        super(element);\n        this.accessor = accessor;\n        this.group = group;\n        this.panel = panel;\n        this.panelTransfer = LocalSelectionTransfer.getInstance();\n    }\n    getData(event) {\n        this.panelTransfer.setData([new PanelTransfer(this.accessor.id, this.group.id, this.panel.id)], PanelTransfer.prototype);\n        return {\n            dispose: () => {\n                this.panelTransfer.clearData(PanelTransfer.prototype);\n            },\n        };\n    }\n}\nexport class Tab extends CompositeDisposable {\n    get element() {\n        return this._element;\n    }\n    constructor(panel, accessor, group) {\n        super();\n        this.panel = panel;\n        this.accessor = accessor;\n        this.group = group;\n        this.content = undefined;\n        this._onChanged = new Emitter();\n        this.onChanged = this._onChanged.event;\n        this._onDropped = new Emitter();\n        this.onDrop = this._onDropped.event;\n        this._onDragStart = new Emitter();\n        this.onDragStart = this._onDragStart.event;\n        this._element = document.createElement('div');\n        this._element.className = 'tab';\n        this._element.tabIndex = 0;\n        this._element.draggable = true;\n        toggleClass(this.element, 'inactive-tab', true);\n        const dragHandler = new TabDragHandler(this._element, this.accessor, this.group, this.panel);\n        this.dropTarget = new Droptarget(this._element, {\n            acceptedTargetZones: ['center'],\n            canDisplayOverlay: (event, position) => {\n                if (this.group.locked) {\n                    return false;\n                }\n                const data = getPanelData();\n                if (data && this.accessor.id === data.viewId) {\n                    if (data.panelId === null &&\n                        data.groupId === this.group.id) {\n                        // don't allow group move to drop on self\n                        return false;\n                    }\n                    return this.panel.id !== data.panelId;\n                }\n                return this.group.model.canDisplayOverlay(event, position, 'tab');\n            },\n        });\n        this.onWillShowOverlay = this.dropTarget.onWillShowOverlay;\n        this.addDisposables(this._onChanged, this._onDropped, this._onDragStart, dragHandler.onDragStart((event) => {\n            this._onDragStart.fire(event);\n        }), dragHandler, addDisposableListener(this._element, 'mousedown', (event) => {\n            if (event.defaultPrevented) {\n                return;\n            }\n            this._onChanged.fire(event);\n        }), this.dropTarget.onDrop((event) => {\n            this._onDropped.fire(event);\n        }), this.dropTarget);\n    }\n    setActive(isActive) {\n        toggleClass(this.element, 'active-tab', isActive);\n        toggleClass(this.element, 'inactive-tab', !isActive);\n    }\n    setContent(part) {\n        if (this.content) {\n            this._element.removeChild(this.content.element);\n        }\n        this.content = part;\n        this._element.appendChild(this.content.element);\n    }\n    dispose() {\n        super.dispose();\n    }\n}\n","import { quasiPreventDefault } from '../dom';\nimport { addDisposableListener } from '../events';\nimport { DragHandler } from './abstractDragHandler';\nimport { LocalSelectionTransfer, PanelTransfer } from './dataTransfer';\nimport { addGhostImage } from './ghost';\nexport class GroupDragHandler extends DragHandler {\n    constructor(element, accessor, group) {\n        super(element);\n        this.accessor = accessor;\n        this.group = group;\n        this.panelTransfer = LocalSelectionTransfer.getInstance();\n        this.addDisposables(addDisposableListener(element, 'mousedown', (e) => {\n            if (e.shiftKey) {\n                /**\n                 * You cannot call e.preventDefault() because that will prevent drag events from firing\n                 * but we also need to stop any group overlay drag events from occuring\n                 * Use a custom event marker that can be checked by the overlay drag events\n                 */\n                quasiPreventDefault(e);\n            }\n        }, true));\n    }\n    isCancelled(_event) {\n        if (this.group.api.location.type === 'floating' && !_event.shiftKey) {\n            return true;\n        }\n        return false;\n    }\n    getData(dragEvent) {\n        const dataTransfer = dragEvent.dataTransfer;\n        this.panelTransfer.setData([new PanelTransfer(this.accessor.id, this.group.id, null)], PanelTransfer.prototype);\n        const style = window.getComputedStyle(this.el);\n        const bgColor = style.getPropertyValue('--dv-activegroup-visiblepanel-tab-background-color');\n        const color = style.getPropertyValue('--dv-activegroup-visiblepanel-tab-color');\n        if (dataTransfer) {\n            const ghostElement = document.createElement('div');\n            ghostElement.style.backgroundColor = bgColor;\n            ghostElement.style.color = color;\n            ghostElement.style.padding = '2px 8px';\n            ghostElement.style.height = '24px';\n            ghostElement.style.fontSize = '11px';\n            ghostElement.style.lineHeight = '20px';\n            ghostElement.style.borderRadius = '12px';\n            ghostElement.style.position = 'absolute';\n            ghostElement.textContent = `Multiple Panels (${this.group.size})`;\n            addGhostImage(dataTransfer, ghostElement);\n        }\n        return {\n            dispose: () => {\n                this.panelTransfer.clearData(PanelTransfer.prototype);\n            },\n        };\n    }\n}\n","import { addClasses, removeClasses } from '../dom';\nexport function addGhostImage(dataTransfer, ghostElement) {\n    // class dockview provides to force ghost image to be drawn on a different layer and prevent weird rendering issues\n    addClasses(ghostElement, 'dv-dragged');\n    document.body.appendChild(ghostElement);\n    dataTransfer.setDragImage(ghostElement, 0, 0);\n    setTimeout(() => {\n        removeClasses(ghostElement, 'dv-dragged');\n        ghostElement.remove();\n    }, 0);\n}\n","import { last } from '../../../array';\nimport { getPanelData } from '../../../dnd/dataTransfer';\nimport { Droptarget, } from '../../../dnd/droptarget';\nimport { GroupDragHandler } from '../../../dnd/groupDragHandler';\nimport { addDisposableListener, Emitter } from '../../../events';\nimport { CompositeDisposable } from '../../../lifecycle';\nexport class VoidContainer extends CompositeDisposable {\n    get element() {\n        return this._element;\n    }\n    constructor(accessor, group) {\n        super();\n        this.accessor = accessor;\n        this.group = group;\n        this._onDrop = new Emitter();\n        this.onDrop = this._onDrop.event;\n        this._onDragStart = new Emitter();\n        this.onDragStart = this._onDragStart.event;\n        this._element = document.createElement('div');\n        this._element.className = 'void-container';\n        this._element.tabIndex = 0;\n        this._element.draggable = true;\n        this.addDisposables(this._onDrop, this._onDragStart, addDisposableListener(this._element, 'pointerdown', () => {\n            this.accessor.doSetGroupActive(this.group);\n        }));\n        const handler = new GroupDragHandler(this._element, accessor, group);\n        this.dropTraget = new Droptarget(this._element, {\n            acceptedTargetZones: ['center'],\n            canDisplayOverlay: (event, position) => {\n                var _a;\n                const data = getPanelData();\n                if (data && this.accessor.id === data.viewId) {\n                    if (data.panelId === null &&\n                        data.groupId === this.group.id) {\n                        // don't allow group move to drop on self\n                        return false;\n                    }\n                    // don't show the overlay if the tab being dragged is the last panel of this group\n                    return ((_a = last(this.group.panels)) === null || _a === void 0 ? void 0 : _a.id) !== data.panelId;\n                }\n                return group.model.canDisplayOverlay(event, position, 'header_space');\n            },\n        });\n        this.onWillShowOverlay = this.dropTraget.onWillShowOverlay;\n        this.addDisposables(handler, handler.onDragStart((event) => {\n            this._onDragStart.fire(event);\n        }), this.dropTraget.onDrop((event) => {\n            this._onDrop.fire(event);\n        }), this.dropTraget);\n    }\n}\n","import { CompositeDisposable, } from '../../../lifecycle';\nimport { addDisposableListener, Emitter } from '../../../events';\nimport { Tab } from '../tab/tab';\nimport { VoidContainer } from './voidContainer';\nimport { toggleClass } from '../../../dom';\nimport { WillShowOverlayLocationEvent } from '../../dockviewGroupPanelModel';\nimport { getPanelData } from '../../../dnd/dataTransfer';\nexport class TabsContainer extends CompositeDisposable {\n    get panels() {\n        return this.tabs.map((_) => _.value.panel.id);\n    }\n    get size() {\n        return this.tabs.length;\n    }\n    get hidden() {\n        return this._hidden;\n    }\n    set hidden(value) {\n        this._hidden = value;\n        this.element.style.display = value ? 'none' : '';\n    }\n    show() {\n        if (!this.hidden) {\n            this.element.style.display = '';\n        }\n    }\n    hide() {\n        this._element.style.display = 'none';\n    }\n    setRightActionsElement(element) {\n        if (this.rightActions === element) {\n            return;\n        }\n        if (this.rightActions) {\n            this.rightActions.remove();\n            this.rightActions = undefined;\n        }\n        if (element) {\n            this.rightActionsContainer.appendChild(element);\n            this.rightActions = element;\n        }\n    }\n    setLeftActionsElement(element) {\n        if (this.leftActions === element) {\n            return;\n        }\n        if (this.leftActions) {\n            this.leftActions.remove();\n            this.leftActions = undefined;\n        }\n        if (element) {\n            this.leftActionsContainer.appendChild(element);\n            this.leftActions = element;\n        }\n    }\n    setPrefixActionsElement(element) {\n        if (this.preActions === element) {\n            return;\n        }\n        if (this.preActions) {\n            this.preActions.remove();\n            this.preActions = undefined;\n        }\n        if (element) {\n            this.preActionsContainer.appendChild(element);\n            this.preActions = element;\n        }\n    }\n    get element() {\n        return this._element;\n    }\n    isActive(tab) {\n        return (this.selectedIndex > -1 &&\n            this.tabs[this.selectedIndex].value === tab);\n    }\n    indexOf(id) {\n        return this.tabs.findIndex((tab) => tab.value.panel.id === id);\n    }\n    constructor(accessor, group) {\n        super();\n        this.accessor = accessor;\n        this.group = group;\n        this.tabs = [];\n        this.selectedIndex = -1;\n        this._hidden = false;\n        this._onDrop = new Emitter();\n        this.onDrop = this._onDrop.event;\n        this._onTabDragStart = new Emitter();\n        this.onTabDragStart = this._onTabDragStart.event;\n        this._onGroupDragStart = new Emitter();\n        this.onGroupDragStart = this._onGroupDragStart.event;\n        this._onWillShowOverlay = new Emitter();\n        this.onWillShowOverlay = this._onWillShowOverlay.event;\n        this._element = document.createElement('div');\n        this._element.className = 'tabs-and-actions-container';\n        toggleClass(this._element, 'dv-full-width-single-tab', this.accessor.options.singleTabMode === 'fullwidth');\n        this.rightActionsContainer = document.createElement('div');\n        this.rightActionsContainer.className = 'right-actions-container';\n        this.leftActionsContainer = document.createElement('div');\n        this.leftActionsContainer.className = 'left-actions-container';\n        this.preActionsContainer = document.createElement('div');\n        this.preActionsContainer.className = 'pre-actions-container';\n        this.tabContainer = document.createElement('div');\n        this.tabContainer.className = 'tabs-container';\n        this.voidContainer = new VoidContainer(this.accessor, this.group);\n        this._element.appendChild(this.preActionsContainer);\n        this._element.appendChild(this.tabContainer);\n        this._element.appendChild(this.leftActionsContainer);\n        this._element.appendChild(this.voidContainer.element);\n        this._element.appendChild(this.rightActionsContainer);\n        this.addDisposables(this.accessor.onDidAddPanel((e) => {\n            if (e.api.group === this.group) {\n                toggleClass(this._element, 'dv-single-tab', this.size === 1);\n            }\n        }), this.accessor.onDidRemovePanel((e) => {\n            if (e.api.group === this.group) {\n                toggleClass(this._element, 'dv-single-tab', this.size === 1);\n            }\n        }), this._onWillShowOverlay, this._onDrop, this._onTabDragStart, this._onGroupDragStart, this.voidContainer, this.voidContainer.onDragStart((event) => {\n            this._onGroupDragStart.fire({\n                nativeEvent: event,\n                group: this.group,\n            });\n        }), this.voidContainer.onDrop((event) => {\n            this._onDrop.fire({\n                event: event.nativeEvent,\n                index: this.tabs.length,\n            });\n        }), this.voidContainer.onWillShowOverlay((event) => {\n            this._onWillShowOverlay.fire(new WillShowOverlayLocationEvent(event, {\n                kind: 'header_space',\n                panel: this.group.activePanel,\n                api: this.accessor.api,\n                group: this.group,\n                getData: getPanelData,\n            }));\n        }), addDisposableListener(this.voidContainer.element, 'mousedown', (event) => {\n            const isFloatingGroupsEnabled = !this.accessor.options.disableFloatingGroups;\n            if (isFloatingGroupsEnabled &&\n                event.shiftKey &&\n                this.group.api.location.type !== 'floating') {\n                event.preventDefault();\n                const { top, left } = this.element.getBoundingClientRect();\n                const { top: rootTop, left: rootLeft } = this.accessor.element.getBoundingClientRect();\n                this.accessor.addFloatingGroup(this.group, {\n                    x: left - rootLeft + 20,\n                    y: top - rootTop + 20,\n                    inDragMode: true,\n                });\n            }\n        }), addDisposableListener(this.tabContainer, 'mousedown', (event) => {\n            if (event.defaultPrevented) {\n                return;\n            }\n            const isLeftClick = event.button === 0;\n            if (isLeftClick) {\n                this.accessor.doSetGroupActive(this.group);\n            }\n        }));\n    }\n    setActive(_isGroupActive) {\n        // noop\n    }\n    addTab(tab, index = this.tabs.length) {\n        if (index < 0 || index > this.tabs.length) {\n            throw new Error('invalid location');\n        }\n        this.tabContainer.insertBefore(tab.value.element, this.tabContainer.children[index]);\n        this.tabs = [\n            ...this.tabs.slice(0, index),\n            tab,\n            ...this.tabs.slice(index),\n        ];\n        if (this.selectedIndex < 0) {\n            this.selectedIndex = index;\n        }\n    }\n    delete(id) {\n        const index = this.tabs.findIndex((tab) => tab.value.panel.id === id);\n        const tabToRemove = this.tabs.splice(index, 1)[0];\n        const { value, disposable } = tabToRemove;\n        disposable.dispose();\n        value.dispose();\n        value.element.remove();\n    }\n    setActivePanel(panel) {\n        this.tabs.forEach((tab) => {\n            const isActivePanel = panel.id === tab.value.panel.id;\n            tab.value.setActive(isActivePanel);\n        });\n    }\n    openPanel(panel, index = this.tabs.length) {\n        var _a;\n        if (this.tabs.find((tab) => tab.value.panel.id === panel.id)) {\n            return;\n        }\n        const tab = new Tab(panel, this.accessor, this.group);\n        if (!((_a = panel.view) === null || _a === void 0 ? void 0 : _a.tab)) {\n            throw new Error('invalid header component');\n        }\n        tab.setContent(panel.view.tab);\n        const disposable = new CompositeDisposable(tab.onDragStart((event) => {\n            this._onTabDragStart.fire({ nativeEvent: event, panel });\n        }), tab.onChanged((event) => {\n            const isFloatingGroupsEnabled = !this.accessor.options.disableFloatingGroups;\n            const isFloatingWithOnePanel = this.group.api.location.type === 'floating' &&\n                this.size === 1;\n            if (isFloatingGroupsEnabled &&\n                !isFloatingWithOnePanel &&\n                event.shiftKey) {\n                event.preventDefault();\n                const panel = this.accessor.getGroupPanel(tab.panel.id);\n                const { top, left } = tab.element.getBoundingClientRect();\n                const { top: rootTop, left: rootLeft } = this.accessor.element.getBoundingClientRect();\n                this.accessor.addFloatingGroup(panel, {\n                    x: left - rootLeft,\n                    y: top - rootTop,\n                    inDragMode: true,\n                });\n                return;\n            }\n            const isLeftClick = event.button === 0;\n            if (!isLeftClick || event.defaultPrevented) {\n                return;\n            }\n            if (this.group.activePanel !== panel) {\n                this.group.model.openPanel(panel);\n            }\n        }), tab.onDrop((event) => {\n            this._onDrop.fire({\n                event: event.nativeEvent,\n                index: this.tabs.findIndex((x) => x.value === tab),\n            });\n        }), tab.onWillShowOverlay((event) => {\n            this._onWillShowOverlay.fire(new WillShowOverlayLocationEvent(event, {\n                kind: 'tab',\n                panel: this.group.activePanel,\n                api: this.accessor.api,\n                group: this.group,\n                getData: getPanelData,\n            }));\n        }));\n        const value = { value: tab, disposable };\n        this.addTab(value, index);\n    }\n    closePanel(panel) {\n        this.delete(panel.id);\n    }\n    dispose() {\n        super.dispose();\n        for (const { value, disposable } of this.tabs) {\n            disposable.dispose();\n            value.dispose();\n        }\n        this.tabs = [];\n    }\n}\n","export class DockviewUnhandledDragOverEvent {\n    get isAccepted() {\n        return this._isAccepted;\n    }\n    constructor(nativeEvent, target, position, getData, group) {\n        this.nativeEvent = nativeEvent;\n        this.target = target;\n        this.position = position;\n        this.getData = getData;\n        this.group = group;\n        this._isAccepted = false;\n    }\n    accept() {\n        this._isAccepted = true;\n    }\n}\nexport const PROPERTY_KEYS = (() => {\n    /**\n     * by readong the keys from an empty value object TypeScript will error\n     * when we add or remove new properties to `DockviewOptions`\n     */\n    const properties = {\n        disableAutoResizing: undefined,\n        hideBorders: undefined,\n        singleTabMode: undefined,\n        disableFloatingGroups: undefined,\n        floatingGroupBounds: undefined,\n        popoutUrl: undefined,\n        defaultRenderer: undefined,\n        debug: undefined,\n        rootOverlayModel: undefined,\n        locked: undefined,\n        disableDnd: undefined,\n        gap: undefined,\n        className: undefined,\n    };\n    return Object.keys(properties);\n})();\nexport function isPanelOptionsWithPanel(data) {\n    if (data.referencePanel) {\n        return true;\n    }\n    return false;\n}\nexport function isPanelOptionsWithGroup(data) {\n    if (data.referenceGroup) {\n        return true;\n    }\n    return false;\n}\nexport function isGroupOptionsWithPanel(data) {\n    if (data.referencePanel) {\n        return true;\n    }\n    return false;\n}\nexport function isGroupOptionsWithGroup(data) {\n    if (data.referenceGroup) {\n        return true;\n    }\n    return false;\n}\n","import { DockviewApi } from '../api/component.api';\nimport { getPanelData } from '../dnd/dataTransfer';\nimport { isAncestor, toggleClass } from '../dom';\nimport { addDisposableListener, DockviewEvent, Emitter, } from '../events';\nimport { CompositeDisposable } from '../lifecycle';\nimport { ContentContainer, } from './components/panel/content';\nimport { TabsContainer, } from './components/titlebar/tabsContainer';\nimport { DockviewUnhandledDragOverEvent, } from './options';\nexport class DockviewDidDropEvent extends DockviewEvent {\n    get nativeEvent() {\n        return this.options.nativeEvent;\n    }\n    get position() {\n        return this.options.position;\n    }\n    get panel() {\n        return this.options.panel;\n    }\n    get group() {\n        return this.options.group;\n    }\n    get api() {\n        return this.options.api;\n    }\n    constructor(options) {\n        super();\n        this.options = options;\n    }\n    getData() {\n        return this.options.getData();\n    }\n}\nexport class DockviewWillDropEvent extends DockviewDidDropEvent {\n    get kind() {\n        return this._kind;\n    }\n    constructor(options) {\n        super(options);\n        this._kind = options.kind;\n    }\n}\nexport class WillShowOverlayLocationEvent {\n    get kind() {\n        return this.options.kind;\n    }\n    get nativeEvent() {\n        return this.event.nativeEvent;\n    }\n    get position() {\n        return this.event.position;\n    }\n    get defaultPrevented() {\n        return this.event.defaultPrevented;\n    }\n    get panel() {\n        return this.options.panel;\n    }\n    get api() {\n        return this.options.api;\n    }\n    get group() {\n        return this.options.group;\n    }\n    preventDefault() {\n        this.event.preventDefault();\n    }\n    getData() {\n        return this.options.getData();\n    }\n    constructor(event, options) {\n        this.event = event;\n        this.options = options;\n    }\n}\nexport class DockviewGroupPanelModel extends CompositeDisposable {\n    get element() {\n        throw new Error('not supported');\n    }\n    get activePanel() {\n        return this._activePanel;\n    }\n    get locked() {\n        return this._locked;\n    }\n    set locked(value) {\n        this._locked = value;\n        toggleClass(this.container, 'locked-groupview', value === 'no-drop-target' || value);\n    }\n    get isActive() {\n        return this._isGroupActive;\n    }\n    get panels() {\n        return this._panels;\n    }\n    get size() {\n        return this._panels.length;\n    }\n    get isEmpty() {\n        return this._panels.length === 0;\n    }\n    get hasWatermark() {\n        return !!(this.watermark && this.container.contains(this.watermark.element));\n    }\n    get header() {\n        return this.tabsContainer;\n    }\n    get isContentFocused() {\n        if (!document.activeElement) {\n            return false;\n        }\n        return isAncestor(document.activeElement, this.contentContainer.element);\n    }\n    get location() {\n        return this._location;\n    }\n    set location(value) {\n        this._location = value;\n        toggleClass(this.container, 'dv-groupview-floating', false);\n        toggleClass(this.container, 'dv-groupview-popout', false);\n        switch (value.type) {\n            case 'grid':\n                this.contentContainer.dropTarget.setTargetZones([\n                    'top',\n                    'bottom',\n                    'left',\n                    'right',\n                    'center',\n                ]);\n                break;\n            case 'floating':\n                this.contentContainer.dropTarget.setTargetZones(['center']);\n                this.contentContainer.dropTarget.setTargetZones(value\n                    ? ['center']\n                    : ['top', 'bottom', 'left', 'right', 'center']);\n                toggleClass(this.container, 'dv-groupview-floating', true);\n                break;\n            case 'popout':\n                this.contentContainer.dropTarget.setTargetZones(['center']);\n                toggleClass(this.container, 'dv-groupview-popout', true);\n                break;\n        }\n        this.groupPanel.api._onDidLocationChange.fire({\n            location: this.location,\n        });\n    }\n    constructor(container, accessor, id, options, groupPanel) {\n        var _a;\n        super();\n        this.container = container;\n        this.accessor = accessor;\n        this.id = id;\n        this.options = options;\n        this.groupPanel = groupPanel;\n        this._isGroupActive = false;\n        this._locked = false;\n        this._location = { type: 'grid' };\n        this.mostRecentlyUsed = [];\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._width = 0;\n        this._height = 0;\n        this._panels = [];\n        this._panelDisposables = new Map();\n        this._onMove = new Emitter();\n        this.onMove = this._onMove.event;\n        this._onDidDrop = new Emitter();\n        this.onDidDrop = this._onDidDrop.event;\n        this._onWillDrop = new Emitter();\n        this.onWillDrop = this._onWillDrop.event;\n        this._onWillShowOverlay = new Emitter();\n        this.onWillShowOverlay = this._onWillShowOverlay.event;\n        this._onTabDragStart = new Emitter();\n        this.onTabDragStart = this._onTabDragStart.event;\n        this._onGroupDragStart = new Emitter();\n        this.onGroupDragStart = this._onGroupDragStart.event;\n        this._onDidAddPanel = new Emitter();\n        this.onDidAddPanel = this._onDidAddPanel.event;\n        this._onDidPanelTitleChange = new Emitter();\n        this.onDidPanelTitleChange = this._onDidPanelTitleChange.event;\n        this._onDidPanelParametersChange = new Emitter();\n        this.onDidPanelParametersChange = this._onDidPanelParametersChange.event;\n        this._onDidRemovePanel = new Emitter();\n        this.onDidRemovePanel = this._onDidRemovePanel.event;\n        this._onDidActivePanelChange = new Emitter();\n        this.onDidActivePanelChange = this._onDidActivePanelChange.event;\n        this._onUnhandledDragOverEvent = new Emitter();\n        this.onUnhandledDragOverEvent = this._onUnhandledDragOverEvent.event;\n        this._overwriteRenderContainer = null;\n        toggleClass(this.container, 'groupview', true);\n        this._api = new DockviewApi(this.accessor);\n        this.tabsContainer = new TabsContainer(this.accessor, this.groupPanel);\n        this.contentContainer = new ContentContainer(this.accessor, this);\n        container.append(this.tabsContainer.element, this.contentContainer.element);\n        this.header.hidden = !!options.hideHeader;\n        this.locked = (_a = options.locked) !== null && _a !== void 0 ? _a : false;\n        this.addDisposables(this._onTabDragStart, this._onGroupDragStart, this._onWillShowOverlay, this.tabsContainer.onTabDragStart((event) => {\n            this._onTabDragStart.fire(event);\n        }), this.tabsContainer.onGroupDragStart((event) => {\n            this._onGroupDragStart.fire(event);\n        }), this.tabsContainer.onDrop((event) => {\n            this.handleDropEvent('header', event.event, 'center', event.index);\n        }), this.contentContainer.onDidFocus(() => {\n            this.accessor.doSetGroupActive(this.groupPanel);\n        }), this.contentContainer.onDidBlur(() => {\n            // noop\n        }), this.contentContainer.dropTarget.onDrop((event) => {\n            this.handleDropEvent('content', event.nativeEvent, event.position);\n        }), this.tabsContainer.onWillShowOverlay((event) => {\n            this._onWillShowOverlay.fire(event);\n        }), this.contentContainer.dropTarget.onWillShowOverlay((event) => {\n            this._onWillShowOverlay.fire(new WillShowOverlayLocationEvent(event, {\n                kind: 'content',\n                panel: this.activePanel,\n                api: this._api,\n                group: this.groupPanel,\n                getData: getPanelData,\n            }));\n        }), this._onMove, this._onDidChange, this._onDidDrop, this._onWillDrop, this._onDidAddPanel, this._onDidRemovePanel, this._onDidActivePanelChange, this._onUnhandledDragOverEvent);\n    }\n    focusContent() {\n        this.contentContainer.element.focus();\n    }\n    set renderContainer(value) {\n        this.panels.forEach((panel) => {\n            this.renderContainer.detatch(panel);\n        });\n        this._overwriteRenderContainer = value;\n        this.panels.forEach((panel) => {\n            this.rerender(panel);\n        });\n    }\n    get renderContainer() {\n        var _a;\n        return ((_a = this._overwriteRenderContainer) !== null && _a !== void 0 ? _a : this.accessor.overlayRenderContainer);\n    }\n    initialize() {\n        if (this.options.panels) {\n            this.options.panels.forEach((panel) => {\n                this.doAddPanel(panel);\n            });\n        }\n        if (this.options.activePanel) {\n            this.openPanel(this.options.activePanel);\n        }\n        // must be run after the constructor otherwise this.parent may not be\n        // correctly initialized\n        this.setActive(this.isActive, true);\n        this.updateContainer();\n        if (this.accessor.options.createRightHeaderActionComponent) {\n            this._rightHeaderActions =\n                this.accessor.options.createRightHeaderActionComponent(this.groupPanel);\n            this.addDisposables(this._rightHeaderActions);\n            this._rightHeaderActions.init({\n                containerApi: this._api,\n                api: this.groupPanel.api,\n                group: this.groupPanel,\n            });\n            this.tabsContainer.setRightActionsElement(this._rightHeaderActions.element);\n        }\n        if (this.accessor.options.createLeftHeaderActionComponent) {\n            this._leftHeaderActions =\n                this.accessor.options.createLeftHeaderActionComponent(this.groupPanel);\n            this.addDisposables(this._leftHeaderActions);\n            this._leftHeaderActions.init({\n                containerApi: this._api,\n                api: this.groupPanel.api,\n                group: this.groupPanel,\n            });\n            this.tabsContainer.setLeftActionsElement(this._leftHeaderActions.element);\n        }\n        if (this.accessor.options.createPrefixHeaderActionComponent) {\n            this._prefixHeaderActions =\n                this.accessor.options.createPrefixHeaderActionComponent(this.groupPanel);\n            this.addDisposables(this._prefixHeaderActions);\n            this._prefixHeaderActions.init({\n                containerApi: this._api,\n                api: this.groupPanel.api,\n                group: this.groupPanel,\n            });\n            this.tabsContainer.setPrefixActionsElement(this._prefixHeaderActions.element);\n        }\n    }\n    rerender(panel) {\n        this.contentContainer.renderPanel(panel, { asActive: false });\n    }\n    indexOf(panel) {\n        return this.tabsContainer.indexOf(panel.id);\n    }\n    toJSON() {\n        var _a;\n        const result = {\n            views: this.tabsContainer.panels,\n            activeView: (_a = this._activePanel) === null || _a === void 0 ? void 0 : _a.id,\n            id: this.id,\n        };\n        if (this.locked !== false) {\n            result.locked = this.locked;\n        }\n        if (this.header.hidden) {\n            result.hideHeader = true;\n        }\n        return result;\n    }\n    moveToNext(options) {\n        if (!options) {\n            options = {};\n        }\n        if (!options.panel) {\n            options.panel = this.activePanel;\n        }\n        const index = options.panel ? this.panels.indexOf(options.panel) : -1;\n        let normalizedIndex;\n        if (index < this.panels.length - 1) {\n            normalizedIndex = index + 1;\n        }\n        else if (!options.suppressRoll) {\n            normalizedIndex = 0;\n        }\n        else {\n            return;\n        }\n        this.openPanel(this.panels[normalizedIndex]);\n    }\n    moveToPrevious(options) {\n        if (!options) {\n            options = {};\n        }\n        if (!options.panel) {\n            options.panel = this.activePanel;\n        }\n        if (!options.panel) {\n            return;\n        }\n        const index = this.panels.indexOf(options.panel);\n        let normalizedIndex;\n        if (index > 0) {\n            normalizedIndex = index - 1;\n        }\n        else if (!options.suppressRoll) {\n            normalizedIndex = this.panels.length - 1;\n        }\n        else {\n            return;\n        }\n        this.openPanel(this.panels[normalizedIndex]);\n    }\n    containsPanel(panel) {\n        return this.panels.includes(panel);\n    }\n    init(_params) {\n        //noop\n    }\n    update(_params) {\n        //noop\n    }\n    focus() {\n        var _a;\n        (_a = this._activePanel) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    openPanel(panel, options = {}) {\n        /**\n         * set the panel group\n         * add the panel\n         * check if group active\n         * check if panel active\n         */\n        if (typeof options.index !== 'number' ||\n            options.index > this.panels.length) {\n            options.index = this.panels.length;\n        }\n        const skipSetActive = !!options.skipSetActive;\n        // ensure the group is updated before we fire any events\n        panel.updateParentGroup(this.groupPanel, {\n            skipSetActive: options.skipSetActive,\n        });\n        this.doAddPanel(panel, options.index, {\n            skipSetActive: skipSetActive,\n        });\n        if (this._activePanel === panel) {\n            this.contentContainer.renderPanel(panel, { asActive: true });\n            return;\n        }\n        if (!skipSetActive) {\n            this.doSetActivePanel(panel);\n        }\n        if (!options.skipSetGroupActive) {\n            this.accessor.doSetGroupActive(this.groupPanel);\n        }\n        if (!options.skipSetActive) {\n            this.updateContainer();\n        }\n    }\n    removePanel(groupItemOrId, options = {\n        skipSetActive: false,\n    }) {\n        const id = typeof groupItemOrId === 'string'\n            ? groupItemOrId\n            : groupItemOrId.id;\n        const panelToRemove = this._panels.find((panel) => panel.id === id);\n        if (!panelToRemove) {\n            throw new Error('invalid operation');\n        }\n        return this._removePanel(panelToRemove, options);\n    }\n    closeAllPanels() {\n        if (this.panels.length > 0) {\n            // take a copy since we will be edting the array as we iterate through\n            const arrPanelCpy = [...this.panels];\n            for (const panel of arrPanelCpy) {\n                this.doClose(panel);\n            }\n        }\n        else {\n            this.accessor.removeGroup(this.groupPanel);\n        }\n    }\n    closePanel(panel) {\n        this.doClose(panel);\n    }\n    doClose(panel) {\n        this.accessor.removePanel(panel);\n    }\n    isPanelActive(panel) {\n        return this._activePanel === panel;\n    }\n    updateActions(element) {\n        this.tabsContainer.setRightActionsElement(element);\n    }\n    setActive(isGroupActive, force = false) {\n        if (!force && this.isActive === isGroupActive) {\n            return;\n        }\n        this._isGroupActive = isGroupActive;\n        toggleClass(this.container, 'active-group', isGroupActive);\n        toggleClass(this.container, 'inactive-group', !isGroupActive);\n        this.tabsContainer.setActive(this.isActive);\n        if (!this._activePanel && this.panels.length > 0) {\n            this.doSetActivePanel(this.panels[0]);\n        }\n        this.updateContainer();\n    }\n    layout(width, height) {\n        var _a;\n        this._width = width;\n        this._height = height;\n        this.contentContainer.layout(this._width, this._height);\n        if ((_a = this._activePanel) === null || _a === void 0 ? void 0 : _a.layout) {\n            this._activePanel.layout(this._width, this._height);\n        }\n    }\n    _removePanel(panel, options) {\n        const isActivePanel = this._activePanel === panel;\n        this.doRemovePanel(panel);\n        if (isActivePanel && this.panels.length > 0) {\n            const nextPanel = this.mostRecentlyUsed[0];\n            this.openPanel(nextPanel, {\n                skipSetActive: options.skipSetActive,\n                skipSetGroupActive: options.skipSetActiveGroup,\n            });\n        }\n        if (this._activePanel && this.panels.length === 0) {\n            this.doSetActivePanel(undefined);\n        }\n        if (!options.skipSetActive) {\n            this.updateContainer();\n        }\n        return panel;\n    }\n    doRemovePanel(panel) {\n        const index = this.panels.indexOf(panel);\n        if (this._activePanel === panel) {\n            this.contentContainer.closePanel();\n        }\n        this.tabsContainer.delete(panel.id);\n        this._panels.splice(index, 1);\n        if (this.mostRecentlyUsed.includes(panel)) {\n            const index = this.mostRecentlyUsed.indexOf(panel);\n            this.mostRecentlyUsed.splice(index, 1);\n        }\n        const disposable = this._panelDisposables.get(panel.id);\n        if (disposable) {\n            disposable.dispose();\n            this._panelDisposables.delete(panel.id);\n        }\n        this._onDidRemovePanel.fire({ panel });\n    }\n    doAddPanel(panel, index = this.panels.length, options = { skipSetActive: false }) {\n        const existingPanel = this._panels.indexOf(panel);\n        const hasExistingPanel = existingPanel > -1;\n        this.tabsContainer.show();\n        this.contentContainer.show();\n        this.tabsContainer.openPanel(panel, index);\n        if (!options.skipSetActive) {\n            this.contentContainer.openPanel(panel);\n        }\n        if (hasExistingPanel) {\n            // TODO - need to ensure ordering hasn't changed and if it has need to re-order this.panels\n            return;\n        }\n        this.updateMru(panel);\n        this.panels.splice(index, 0, panel);\n        this._panelDisposables.set(panel.id, new CompositeDisposable(panel.api.onDidTitleChange((event) => this._onDidPanelTitleChange.fire(event)), panel.api.onDidParametersChange((event) => this._onDidPanelParametersChange.fire(event))));\n        this._onDidAddPanel.fire({ panel });\n    }\n    doSetActivePanel(panel) {\n        if (this._activePanel === panel) {\n            return;\n        }\n        this._activePanel = panel;\n        if (panel) {\n            this.tabsContainer.setActivePanel(panel);\n            panel.layout(this._width, this._height);\n            this.updateMru(panel);\n            this._onDidActivePanelChange.fire({\n                panel,\n            });\n        }\n    }\n    updateMru(panel) {\n        if (this.mostRecentlyUsed.includes(panel)) {\n            this.mostRecentlyUsed.splice(this.mostRecentlyUsed.indexOf(panel), 1);\n        }\n        this.mostRecentlyUsed = [panel, ...this.mostRecentlyUsed];\n    }\n    updateContainer() {\n        var _a, _b;\n        toggleClass(this.container, 'empty', this.isEmpty);\n        this.panels.forEach((panel) => panel.runEvents());\n        if (this.isEmpty && !this.watermark) {\n            const watermark = this.accessor.createWatermarkComponent();\n            watermark.init({\n                containerApi: this._api,\n                group: this.groupPanel,\n            });\n            this.watermark = watermark;\n            addDisposableListener(this.watermark.element, 'pointerdown', () => {\n                if (!this.isActive) {\n                    this.accessor.doSetGroupActive(this.groupPanel);\n                }\n            });\n            this.tabsContainer.hide();\n            this.contentContainer.element.appendChild(this.watermark.element);\n            this.watermark.updateParentGroup(this.groupPanel, true);\n        }\n        if (!this.isEmpty && this.watermark) {\n            this.watermark.element.remove();\n            (_b = (_a = this.watermark).dispose) === null || _b === void 0 ? void 0 : _b.call(_a);\n            this.watermark = undefined;\n            this.tabsContainer.show();\n        }\n    }\n    canDisplayOverlay(event, position, target) {\n        const firedEvent = new DockviewUnhandledDragOverEvent(event, target, position, getPanelData, this.accessor.getPanel(this.id));\n        this._onUnhandledDragOverEvent.fire(firedEvent);\n        return firedEvent.isAccepted;\n    }\n    handleDropEvent(type, event, position, index) {\n        if (this.locked === 'no-drop-target') {\n            return;\n        }\n        function getKind() {\n            switch (type) {\n                case 'header':\n                    return typeof index === 'number' ? 'tab' : 'header_space';\n                case 'content':\n                    return 'content';\n            }\n        }\n        const panel = typeof index === 'number' ? this.panels[index] : undefined;\n        const willDropEvent = new DockviewWillDropEvent({\n            nativeEvent: event,\n            position,\n            panel,\n            getData: () => getPanelData(),\n            kind: getKind(),\n            group: this.groupPanel,\n            api: this._api,\n        });\n        this._onWillDrop.fire(willDropEvent);\n        if (willDropEvent.defaultPrevented) {\n            return;\n        }\n        const data = getPanelData();\n        if (data && data.viewId === this.accessor.id) {\n            if (data.panelId === null) {\n                // this is a group move dnd event\n                const { groupId } = data;\n                this._onMove.fire({\n                    target: position,\n                    groupId: groupId,\n                    index,\n                });\n                return;\n            }\n            const fromSameGroup = this.tabsContainer.indexOf(data.panelId) !== -1;\n            if (fromSameGroup && this.tabsContainer.size === 1) {\n                return;\n            }\n            const { groupId, panelId } = data;\n            const isSameGroup = this.id === groupId;\n            if (isSameGroup && !position) {\n                const oldIndex = this.tabsContainer.indexOf(panelId);\n                if (oldIndex === index) {\n                    return;\n                }\n            }\n            this._onMove.fire({\n                target: position,\n                groupId: data.groupId,\n                itemId: data.panelId,\n                index,\n            });\n        }\n        else {\n            this._onDidDrop.fire(new DockviewDidDropEvent({\n                nativeEvent: event,\n                position,\n                panel,\n                getData: () => getPanelData(),\n                group: this.groupPanel,\n                api: this._api,\n            }));\n        }\n    }\n    dispose() {\n        var _a, _b, _c;\n        super.dispose();\n        (_a = this.watermark) === null || _a === void 0 ? void 0 : _a.element.remove();\n        (_c = (_b = this.watermark) === null || _b === void 0 ? void 0 : _b.dispose) === null || _c === void 0 ? void 0 : _c.call(_b);\n        this.watermark = undefined;\n        for (const panel of this.panels) {\n            panel.dispose();\n        }\n        this.tabsContainer.dispose();\n        this.contentContainer.dispose();\n    }\n}\n","import { Emitter } from '../events';\nimport { PanelApiImpl } from './panelApi';\nexport class GridviewPanelApiImpl extends PanelApiImpl {\n    constructor(id, component, panel) {\n        super(id, component);\n        this._onDidConstraintsChangeInternal = new Emitter();\n        this.onDidConstraintsChangeInternal = this._onDidConstraintsChangeInternal.event;\n        this._onDidConstraintsChange = new Emitter();\n        this.onDidConstraintsChange = this._onDidConstraintsChange.event;\n        this._onDidSizeChange = new Emitter();\n        this.onDidSizeChange = this._onDidSizeChange.event;\n        this.addDisposables(this._onDidConstraintsChangeInternal, this._onDidConstraintsChange, this._onDidSizeChange);\n        if (panel) {\n            this.initialize(panel);\n        }\n    }\n    setConstraints(value) {\n        this._onDidConstraintsChangeInternal.fire(value);\n    }\n    setSize(event) {\n        this._onDidSizeChange.fire(event);\n    }\n}\n","import { BasePanelView, } from './basePanelView';\nimport { GridviewPanelApiImpl, } from '../api/gridviewPanelApi';\nimport { Emitter } from '../events';\nexport class GridviewPanel extends BasePanelView {\n    get priority() {\n        return this._priority;\n    }\n    get snap() {\n        return this._snap;\n    }\n    get minimumWidth() {\n        const width = typeof this._minimumWidth === 'function'\n            ? this._minimumWidth()\n            : this._minimumWidth;\n        if (width !== this._evaluatedMinimumWidth) {\n            this._evaluatedMinimumWidth = width;\n            this.updateConstraints();\n        }\n        return width;\n    }\n    get minimumHeight() {\n        const height = typeof this._minimumHeight === 'function'\n            ? this._minimumHeight()\n            : this._minimumHeight;\n        if (height !== this._evaluatedMinimumHeight) {\n            this._evaluatedMinimumHeight = height;\n            this.updateConstraints();\n        }\n        return height;\n    }\n    get maximumHeight() {\n        const height = typeof this._maximumHeight === 'function'\n            ? this._maximumHeight()\n            : this._maximumHeight;\n        if (height !== this._evaluatedMaximumHeight) {\n            this._evaluatedMaximumHeight = height;\n            this.updateConstraints();\n        }\n        return height;\n    }\n    get maximumWidth() {\n        const width = typeof this._maximumWidth === 'function'\n            ? this._maximumWidth()\n            : this._maximumWidth;\n        if (width !== this._evaluatedMaximumWidth) {\n            this._evaluatedMaximumWidth = width;\n            this.updateConstraints();\n        }\n        return width;\n    }\n    get isActive() {\n        return this.api.isActive;\n    }\n    get isVisible() {\n        return this.api.isVisible;\n    }\n    constructor(id, component, options, api) {\n        super(id, component, api !== null && api !== void 0 ? api : new GridviewPanelApiImpl(id, component));\n        this._evaluatedMinimumWidth = 0;\n        this._evaluatedMaximumWidth = Number.MAX_SAFE_INTEGER;\n        this._evaluatedMinimumHeight = 0;\n        this._evaluatedMaximumHeight = Number.MAX_SAFE_INTEGER;\n        this._minimumWidth = 0;\n        this._minimumHeight = 0;\n        this._maximumWidth = Number.MAX_SAFE_INTEGER;\n        this._maximumHeight = Number.MAX_SAFE_INTEGER;\n        this._snap = false;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        if (typeof (options === null || options === void 0 ? void 0 : options.minimumWidth) === 'number') {\n            this._minimumWidth = options.minimumWidth;\n        }\n        if (typeof (options === null || options === void 0 ? void 0 : options.maximumWidth) === 'number') {\n            this._maximumWidth = options.maximumWidth;\n        }\n        if (typeof (options === null || options === void 0 ? void 0 : options.minimumHeight) === 'number') {\n            this._minimumHeight = options.minimumHeight;\n        }\n        if (typeof (options === null || options === void 0 ? void 0 : options.maximumHeight) === 'number') {\n            this._maximumHeight = options.maximumHeight;\n        }\n        this.api.initialize(this); // TODO: required to by-pass 'super before this' requirement\n        this.addDisposables(this.api.onWillVisibilityChange((event) => {\n            const { isVisible } = event;\n            const { accessor } = this._params;\n            accessor.setVisible(this, isVisible);\n        }), this.api.onActiveChange(() => {\n            const { accessor } = this._params;\n            accessor.doSetGroupActive(this);\n        }), this.api.onDidConstraintsChangeInternal((event) => {\n            if (typeof event.minimumWidth === 'number' ||\n                typeof event.minimumWidth === 'function') {\n                this._minimumWidth = event.minimumWidth;\n            }\n            if (typeof event.minimumHeight === 'number' ||\n                typeof event.minimumHeight === 'function') {\n                this._minimumHeight = event.minimumHeight;\n            }\n            if (typeof event.maximumWidth === 'number' ||\n                typeof event.maximumWidth === 'function') {\n                this._maximumWidth = event.maximumWidth;\n            }\n            if (typeof event.maximumHeight === 'number' ||\n                typeof event.maximumHeight === 'function') {\n                this._maximumHeight = event.maximumHeight;\n            }\n        }), this.api.onDidSizeChange((event) => {\n            this._onDidChange.fire({\n                height: event.height,\n                width: event.width,\n            });\n        }), this._onDidChange);\n    }\n    setVisible(isVisible) {\n        this.api._onDidVisibilityChange.fire({ isVisible });\n    }\n    setActive(isActive) {\n        this.api._onDidActiveChange.fire({ isActive });\n    }\n    init(parameters) {\n        if (parameters.maximumHeight) {\n            this._maximumHeight = parameters.maximumHeight;\n        }\n        if (parameters.minimumHeight) {\n            this._minimumHeight = parameters.minimumHeight;\n        }\n        if (parameters.maximumWidth) {\n            this._maximumWidth = parameters.maximumWidth;\n        }\n        if (parameters.minimumWidth) {\n            this._minimumWidth = parameters.minimumWidth;\n        }\n        this._priority = parameters.priority;\n        this._snap = !!parameters.snap;\n        super.init(parameters);\n        if (typeof parameters.isVisible === 'boolean') {\n            this.setVisible(parameters.isVisible);\n        }\n    }\n    updateConstraints() {\n        this.api._onDidConstraintsChange.fire({\n            minimumWidth: this._evaluatedMinimumWidth,\n            maximumWidth: this._evaluatedMaximumWidth,\n            minimumHeight: this._evaluatedMinimumHeight,\n            maximumHeight: this._evaluatedMaximumHeight,\n        });\n    }\n    toJSON() {\n        const state = super.toJSON();\n        const maximum = (value) => value === Number.MAX_SAFE_INTEGER ? undefined : value;\n        const minimum = (value) => (value <= 0 ? undefined : value);\n        return Object.assign(Object.assign({}, state), { minimumHeight: minimum(this.minimumHeight), maximumHeight: maximum(this.maximumHeight), minimumWidth: minimum(this.minimumWidth), maximumWidth: maximum(this.maximumWidth), snap: this.snap, priority: this.priority });\n    }\n}\n","import { positionToDirection } from '../dnd/droptarget';\nimport { Emitter } from '../events';\nimport { MutableDisposable } from '../lifecycle';\nimport { GridviewPanelApiImpl } from './gridviewPanelApi';\nconst NOT_INITIALIZED_MESSAGE = 'dockview: DockviewGroupPanelApiImpl not initialized';\nexport class DockviewGroupPanelApiImpl extends GridviewPanelApiImpl {\n    get location() {\n        if (!this._group) {\n            throw new Error(NOT_INITIALIZED_MESSAGE);\n        }\n        return this._group.model.location;\n    }\n    constructor(id, accessor) {\n        super(id, '__dockviewgroup__');\n        this.accessor = accessor;\n        this._mutableDisposable = new MutableDisposable();\n        this._onDidLocationChange = new Emitter();\n        this.onDidLocationChange = this._onDidLocationChange.event;\n        this._onDidActivePanelChange = new Emitter();\n        this.onDidActivePanelChange = this._onDidActivePanelChange.event;\n        this.addDisposables(this._onDidLocationChange, this._onDidActivePanelChange, this._mutableDisposable);\n    }\n    close() {\n        if (!this._group) {\n            return;\n        }\n        return this.accessor.removeGroup(this._group);\n    }\n    getWindow() {\n        return this.location.type === 'popout'\n            ? this.location.getWindow()\n            : window;\n    }\n    moveTo(options) {\n        var _a, _b, _c;\n        if (!this._group) {\n            throw new Error(NOT_INITIALIZED_MESSAGE);\n        }\n        const group = (_a = options.group) !== null && _a !== void 0 ? _a : this.accessor.addGroup({\n            direction: positionToDirection((_b = options.position) !== null && _b !== void 0 ? _b : 'right'),\n            skipSetActive: true,\n        });\n        this.accessor.moveGroupOrPanel({\n            from: { groupId: this._group.id },\n            to: {\n                group,\n                position: options.group\n                    ? (_c = options.position) !== null && _c !== void 0 ? _c : 'center'\n                    : 'center',\n            },\n        });\n    }\n    maximize() {\n        if (!this._group) {\n            throw new Error(NOT_INITIALIZED_MESSAGE);\n        }\n        if (this.location.type !== 'grid') {\n            // only grid groups can be maximized\n            return;\n        }\n        this.accessor.maximizeGroup(this._group);\n    }\n    isMaximized() {\n        if (!this._group) {\n            throw new Error(NOT_INITIALIZED_MESSAGE);\n        }\n        return this.accessor.isMaximizedGroup(this._group);\n    }\n    exitMaximized() {\n        if (!this._group) {\n            throw new Error(NOT_INITIALIZED_MESSAGE);\n        }\n        if (this.isMaximized()) {\n            this.accessor.exitMaximizedGroup();\n        }\n    }\n    initialize(group) {\n        /**\n         * TODO: Annoying initialization order caveat, find a better way to initialize and avoid needing null checks\n         *\n         * Due to the order on initialization we know that the model isn't defined until later in the same stack-frame of setup.\n         * By queuing a microtask we can ensure the setup is completed within the same stack-frame, but after everything else has\n         * finished ensuring the `model` is defined.\n         */\n        this._group = group;\n        queueMicrotask(() => {\n            this._mutableDisposable.value =\n                this._group.model.onDidActivePanelChange((event) => {\n                    this._onDidActivePanelChange.fire(event);\n                });\n        });\n    }\n}\n","import { DockviewGroupPanelModel, } from './dockviewGroupPanelModel';\nimport { GridviewPanel } from '../gridview/gridviewPanel';\nimport { DockviewGroupPanelApiImpl, } from '../api/dockviewGroupPanelApi';\nconst MINIMUM_DOCKVIEW_GROUP_PANEL_WIDTH = 100;\nconst MINIMUM_DOCKVIEW_GROUP_PANEL_HEIGHT = 100;\nexport class DockviewGroupPanel extends GridviewPanel {\n    get panels() {\n        return this._model.panels;\n    }\n    get activePanel() {\n        return this._model.activePanel;\n    }\n    get size() {\n        return this._model.size;\n    }\n    get model() {\n        return this._model;\n    }\n    get locked() {\n        return this._model.locked;\n    }\n    set locked(value) {\n        this._model.locked = value;\n    }\n    get header() {\n        return this._model.header;\n    }\n    constructor(accessor, id, options) {\n        super(id, 'groupview_default', {\n            minimumHeight: MINIMUM_DOCKVIEW_GROUP_PANEL_HEIGHT,\n            minimumWidth: MINIMUM_DOCKVIEW_GROUP_PANEL_WIDTH,\n        }, new DockviewGroupPanelApiImpl(id, accessor));\n        this.api.initialize(this); // cannot use 'this' after after 'super' call\n        this._model = new DockviewGroupPanelModel(this.element, accessor, id, options, this);\n    }\n    focus() {\n        if (!this.api.isActive) {\n            this.api.setActive();\n        }\n        super.focus();\n    }\n    initialize() {\n        this._model.initialize();\n    }\n    setActive(isActive) {\n        super.setActive(isActive);\n        this.model.setActive(isActive);\n    }\n    layout(width, height) {\n        super.layout(width, height);\n        this.model.layout(width, height);\n    }\n    getComponent() {\n        return this._model;\n    }\n    toJSON() {\n        return this.model.toJSON();\n    }\n}\n","import { Emitter } from '../events';\nimport { GridviewPanelApiImpl } from './gridviewPanelApi';\nimport { CompositeDisposable, MutableDisposable } from '../lifecycle';\nexport class DockviewPanelApiImpl extends GridviewPanelApiImpl {\n    get location() {\n        return this.group.api.location;\n    }\n    get title() {\n        return this.panel.title;\n    }\n    get isGroupActive() {\n        return this.group.isActive;\n    }\n    get renderer() {\n        return this.panel.renderer;\n    }\n    set group(value) {\n        const oldGroup = this._group;\n        if (this._group !== value) {\n            this._group = value;\n            this._onDidGroupChange.fire({});\n            this.setupGroupEventListeners(oldGroup);\n            this._onDidLocationChange.fire({\n                location: this.group.api.location,\n            });\n        }\n    }\n    get group() {\n        return this._group;\n    }\n    get tabComponent() {\n        return this._tabComponent;\n    }\n    constructor(panel, group, accessor, component, tabComponent) {\n        super(panel.id, component);\n        this.panel = panel;\n        this.accessor = accessor;\n        this._onDidTitleChange = new Emitter();\n        this.onDidTitleChange = this._onDidTitleChange.event;\n        this._onDidActiveGroupChange = new Emitter();\n        this.onDidActiveGroupChange = this._onDidActiveGroupChange.event;\n        this._onDidGroupChange = new Emitter();\n        this.onDidGroupChange = this._onDidGroupChange.event;\n        this._onDidRendererChange = new Emitter();\n        this.onDidRendererChange = this._onDidRendererChange.event;\n        this._onDidLocationChange = new Emitter();\n        this.onDidLocationChange = this._onDidLocationChange.event;\n        this.groupEventsDisposable = new MutableDisposable();\n        this._tabComponent = tabComponent;\n        this.initialize(panel);\n        this._group = group;\n        this.setupGroupEventListeners();\n        this.addDisposables(this.groupEventsDisposable, this._onDidRendererChange, this._onDidTitleChange, this._onDidGroupChange, this._onDidActiveGroupChange, this._onDidLocationChange);\n    }\n    getWindow() {\n        return this.group.api.getWindow();\n    }\n    moveTo(options) {\n        var _a;\n        this.accessor.moveGroupOrPanel({\n            from: { groupId: this._group.id, panelId: this.panel.id },\n            to: {\n                group: options.group,\n                position: (_a = options.position) !== null && _a !== void 0 ? _a : 'center',\n                index: options.index,\n            },\n        });\n    }\n    setTitle(title) {\n        this.panel.setTitle(title);\n    }\n    setRenderer(renderer) {\n        this.panel.setRenderer(renderer);\n    }\n    close() {\n        this.group.model.closePanel(this.panel);\n    }\n    maximize() {\n        this.group.api.maximize();\n    }\n    isMaximized() {\n        return this.group.api.isMaximized();\n    }\n    exitMaximized() {\n        this.group.api.exitMaximized();\n    }\n    setupGroupEventListeners(previousGroup) {\n        var _a;\n        let _trackGroupActive = (_a = previousGroup === null || previousGroup === void 0 ? void 0 : previousGroup.isActive) !== null && _a !== void 0 ? _a : false; // prevent duplicate events with same state\n        this.groupEventsDisposable.value = new CompositeDisposable(this.group.api.onDidVisibilityChange((event) => {\n            const hasBecomeHidden = !event.isVisible && this.isVisible;\n            const hasBecomeVisible = event.isVisible && !this.isVisible;\n            const isActivePanel = this.group.model.isPanelActive(this.panel);\n            if (hasBecomeHidden || (hasBecomeVisible && isActivePanel)) {\n                this._onDidVisibilityChange.fire(event);\n            }\n        }), this.group.api.onDidLocationChange((event) => {\n            if (this.group !== this.panel.group) {\n                return;\n            }\n            this._onDidLocationChange.fire(event);\n        }), this.group.api.onDidActiveChange(() => {\n            if (this.group !== this.panel.group) {\n                return;\n            }\n            if (_trackGroupActive !== this.isGroupActive) {\n                _trackGroupActive = this.isGroupActive;\n                this._onDidActiveGroupChange.fire({\n                    isActive: this.isGroupActive,\n                });\n            }\n        }));\n    }\n}\n","import { DockviewPanelApiImpl, } from '../api/dockviewPanelApi';\nimport { CompositeDisposable } from '../lifecycle';\nimport { WillFocusEvent } from '../api/panelApi';\nexport class DockviewPanel extends CompositeDisposable {\n    get params() {\n        return this._params;\n    }\n    get title() {\n        return this._title;\n    }\n    get group() {\n        return this._group;\n    }\n    get renderer() {\n        var _a;\n        return (_a = this._renderer) !== null && _a !== void 0 ? _a : this.accessor.renderer;\n    }\n    constructor(id, component, tabComponent, accessor, containerApi, group, view, options) {\n        super();\n        this.id = id;\n        this.accessor = accessor;\n        this.containerApi = containerApi;\n        this.view = view;\n        this._renderer = options.renderer;\n        this._group = group;\n        this.api = new DockviewPanelApiImpl(this, this._group, accessor, component, tabComponent);\n        this.addDisposables(this.api.onActiveChange(() => {\n            accessor.setActivePanel(this);\n        }), this.api.onDidSizeChange((event) => {\n            // forward the resize event to the group since if you want to resize a panel\n            // you are actually just resizing the panels parent which is the group\n            this.group.api.setSize(event);\n        }), this.api.onDidRendererChange(() => {\n            this.group.model.rerender(this);\n        }));\n    }\n    init(params) {\n        this._params = params.params;\n        this.view.init(Object.assign(Object.assign({}, params), { api: this.api, containerApi: this.containerApi }));\n        this.setTitle(params.title);\n    }\n    focus() {\n        const event = new WillFocusEvent();\n        this.api._onWillFocus.fire(event);\n        if (event.defaultPrevented) {\n            return;\n        }\n        if (!this.api.isActive) {\n            this.api.setActive();\n        }\n    }\n    toJSON() {\n        return {\n            id: this.id,\n            contentComponent: this.view.contentComponent,\n            tabComponent: this.view.tabComponent,\n            params: Object.keys(this._params || {}).length > 0\n                ? this._params\n                : undefined,\n            title: this.title,\n            renderer: this._renderer,\n        };\n    }\n    setTitle(title) {\n        const didTitleChange = title !== this.title;\n        if (didTitleChange) {\n            this._title = title;\n            this.api._onDidTitleChange.fire({ title });\n        }\n    }\n    setRenderer(renderer) {\n        const didChange = renderer !== this.renderer;\n        if (didChange) {\n            this._renderer = renderer;\n            this.api._onDidRendererChange.fire({\n                renderer: renderer,\n            });\n        }\n    }\n    update(event) {\n        var _a;\n        // merge the new parameters with the existing parameters\n        this._params = Object.assign(Object.assign({}, ((_a = this._params) !== null && _a !== void 0 ? _a : {})), event.params);\n        /**\n         * delete new keys that have a value of undefined,\n         * allow values of null\n         */\n        for (const key of Object.keys(event.params)) {\n            if (event.params[key] === undefined) {\n                delete this._params[key];\n            }\n        }\n        // update the view with the updated props\n        this.view.update({\n            params: this._params,\n        });\n    }\n    updateParentGroup(group, options) {\n        this._group = group;\n        this.api.group = this._group;\n        const isPanelVisible = this._group.model.isPanelActive(this);\n        const isActive = this.group.api.isActive && isPanelVisible;\n        if (!(options === null || options === void 0 ? void 0 : options.skipSetActive)) {\n            if (this.api.isActive !== isActive) {\n                this.api._onDidActiveChange.fire({\n                    isActive: this.group.api.isActive && isPanelVisible,\n                });\n            }\n        }\n        if (this.api.isVisible !== isPanelVisible) {\n            this.api._onDidVisibilityChange.fire({\n                isVisible: isPanelVisible,\n            });\n        }\n    }\n    runEvents() {\n        const isPanelVisible = this._group.model.isPanelActive(this);\n        const isActive = this.group.api.isActive && isPanelVisible;\n        if (this.api.isActive !== isActive) {\n            this.api._onDidActiveChange.fire({\n                isActive: this.group.api.isActive && isPanelVisible,\n            });\n        }\n        if (this.api.isVisible !== isPanelVisible) {\n            this.api._onDidVisibilityChange.fire({\n                isVisible: isPanelVisible,\n            });\n        }\n    }\n    layout(width, height) {\n        // TODO: Can we somehow do height without header height or indicate what the header height is?\n        this.api._onDidDimensionChange.fire({\n            width,\n            height: height,\n        });\n        this.view.layout(width, height);\n    }\n    dispose() {\n        this.api.dispose();\n        this.view.dispose();\n    }\n}\n","const createSvgElementFromPath = (params) => {\n    const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n    svg.setAttributeNS(null, 'height', params.height);\n    svg.setAttributeNS(null, 'width', params.width);\n    svg.setAttributeNS(null, 'viewBox', params.viewbox);\n    svg.setAttributeNS(null, 'aria-hidden', 'false');\n    svg.setAttributeNS(null, 'focusable', 'false');\n    svg.classList.add('dockview-svg');\n    const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n    path.setAttributeNS(null, 'd', params.path);\n    svg.appendChild(path);\n    return svg;\n};\nexport const createCloseButton = () => createSvgElementFromPath({\n    width: '11',\n    height: '11',\n    viewbox: '0 0 28 28',\n    path: 'M2.1 27.3L0 25.2L11.55 13.65L0 2.1L2.1 0L13.65 11.55L25.2 0L27.3 2.1L15.75 13.65L27.3 25.2L25.2 27.3L13.65 15.75L2.1 27.3Z',\n});\nexport const createExpandMoreButton = () => createSvgElementFromPath({\n    width: '11',\n    height: '11',\n    viewbox: '0 0 24 15',\n    path: 'M12 14.15L0 2.15L2.15 0L12 9.9L21.85 0.0499992L24 2.2L12 14.15Z',\n});\nexport const createChevronRightButton = () => createSvgElementFromPath({\n    width: '11',\n    height: '11',\n    viewbox: '0 0 15 25',\n    path: 'M2.15 24.1L0 21.95L9.9 12.05L0 2.15L2.15 0L14.2 12.05L2.15 24.1Z',\n});\n","import { CompositeDisposable } from '../../../lifecycle';\nimport { addDisposableListener } from '../../../events';\nimport { createCloseButton } from '../../../svg';\nexport class DefaultTab extends CompositeDisposable {\n    get element() {\n        return this._element;\n    }\n    constructor() {\n        super();\n        this._element = document.createElement('div');\n        this._element.className = 'dv-default-tab';\n        this._content = document.createElement('div');\n        this._content.className = 'dv-default-tab-content';\n        this.action = document.createElement('div');\n        this.action.className = 'dv-default-tab-action';\n        this.action.appendChild(createCloseButton());\n        this._element.appendChild(this._content);\n        this._element.appendChild(this.action);\n        this.addDisposables(addDisposableListener(this.action, 'mousedown', (ev) => {\n            ev.preventDefault();\n        }));\n        this.render();\n    }\n    init(params) {\n        this._title = params.title;\n        this.addDisposables(params.api.onDidTitleChange((event) => {\n            this._title = event.title;\n            this.render();\n        }), addDisposableListener(this.action, 'mousedown', (ev) => {\n            ev.preventDefault();\n        }), addDisposableListener(this.action, 'click', (ev) => {\n            if (ev.defaultPrevented) {\n                return;\n            }\n            ev.preventDefault();\n            params.api.close();\n        }));\n        this.render();\n    }\n    render() {\n        var _a;\n        if (this._content.textContent !== this._title) {\n            this._content.textContent = (_a = this._title) !== null && _a !== void 0 ? _a : '';\n        }\n    }\n}\n","import { DefaultTab } from './components/tab/defaultTab';\nexport class DockviewPanelModel {\n    get content() {\n        return this._content;\n    }\n    get tab() {\n        return this._tab;\n    }\n    constructor(accessor, id, contentComponent, tabComponent) {\n        this.accessor = accessor;\n        this.id = id;\n        this.contentComponent = contentComponent;\n        this.tabComponent = tabComponent;\n        this._content = this.createContentComponent(this.id, contentComponent);\n        this._tab = this.createTabComponent(this.id, tabComponent);\n    }\n    init(params) {\n        this.content.init(params);\n        this.tab.init(params);\n    }\n    updateParentGroup(_group, _isPanelVisible) {\n        // noop\n    }\n    layout(width, height) {\n        var _a, _b;\n        (_b = (_a = this.content).layout) === null || _b === void 0 ? void 0 : _b.call(_a, width, height);\n    }\n    update(event) {\n        var _a, _b, _c, _d;\n        (_b = (_a = this.content).update) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n        (_d = (_c = this.tab).update) === null || _d === void 0 ? void 0 : _d.call(_c, event);\n    }\n    dispose() {\n        var _a, _b, _c, _d;\n        (_b = (_a = this.content).dispose) === null || _b === void 0 ? void 0 : _b.call(_a);\n        (_d = (_c = this.tab).dispose) === null || _d === void 0 ? void 0 : _d.call(_c);\n    }\n    createContentComponent(id, componentName) {\n        return this.accessor.options.createComponent({\n            id,\n            name: componentName,\n        });\n    }\n    createTabComponent(id, componentName) {\n        const name = componentName !== null && componentName !== void 0 ? componentName : this.accessor.options.defaultTabComponent;\n        if (name) {\n            if (this.accessor.options.createTabComponent) {\n                const component = this.accessor.options.createTabComponent({\n                    id,\n                    name,\n                });\n                if (component) {\n                    return component;\n                }\n                else {\n                    return new DefaultTab();\n                }\n            }\n            console.warn(`dockview: tabComponent '${componentName}' was not found. falling back to the default tab.`);\n        }\n        return new DefaultTab();\n    }\n}\n","import { DockviewPanel } from './dockviewPanel';\nimport { DockviewPanelModel } from './dockviewPanelModel';\nimport { DockviewApi } from '../api/component.api';\nexport class DefaultDockviewDeserialzier {\n    constructor(accessor) {\n        this.accessor = accessor;\n    }\n    fromJSON(panelData, group) {\n        var _a, _b;\n        const panelId = panelData.id;\n        const params = panelData.params;\n        const title = panelData.title;\n        const viewData = panelData.view;\n        const contentComponent = viewData\n            ? viewData.content.id\n            : (_a = panelData.contentComponent) !== null && _a !== void 0 ? _a : 'unknown';\n        const tabComponent = viewData\n            ? (_b = viewData.tab) === null || _b === void 0 ? void 0 : _b.id\n            : panelData.tabComponent;\n        const view = new DockviewPanelModel(this.accessor, panelId, contentComponent, tabComponent);\n        const panel = new DockviewPanel(panelId, contentComponent, tabComponent, this.accessor, new DockviewApi(this.accessor), group, view, {\n            renderer: panelData.renderer,\n        });\n        panel.init({\n            title: title !== null && title !== void 0 ? title : panelId,\n            params: params !== null && params !== void 0 ? params : {},\n        });\n        return panel;\n    }\n}\n","import { addDisposableListener } from '../../../events';\nimport { toggleClass } from '../../../dom';\nimport { CompositeDisposable } from '../../../lifecycle';\nimport { createCloseButton } from '../../../svg';\nexport class Watermark extends CompositeDisposable {\n    get element() {\n        return this._element;\n    }\n    constructor() {\n        super();\n        this._element = document.createElement('div');\n        this._element.className = 'watermark';\n        const title = document.createElement('div');\n        title.className = 'watermark-title';\n        const emptySpace = document.createElement('span');\n        emptySpace.style.flexGrow = '1';\n        const content = document.createElement('div');\n        content.className = 'watermark-content';\n        this._element.appendChild(title);\n        this._element.appendChild(content);\n        const actionsContainer = document.createElement('div');\n        actionsContainer.className = 'actions-container';\n        const closeAnchor = document.createElement('div');\n        closeAnchor.className = 'close-action';\n        closeAnchor.appendChild(createCloseButton());\n        actionsContainer.appendChild(closeAnchor);\n        title.appendChild(emptySpace);\n        title.appendChild(actionsContainer);\n        this.addDisposables(addDisposableListener(closeAnchor, 'click', (ev) => {\n            var _a;\n            ev.preventDefault();\n            if (this._group) {\n                (_a = this._api) === null || _a === void 0 ? void 0 : _a.removeGroup(this._group);\n            }\n        }));\n    }\n    update(_event) {\n        // noop\n    }\n    focus() {\n        // noop\n    }\n    layout(_width, _height) {\n        // noop\n    }\n    init(_params) {\n        this._api = _params.containerApi;\n        this.render();\n    }\n    updateParentGroup(group, _visible) {\n        this._group = group;\n        this.render();\n    }\n    dispose() {\n        super.dispose();\n    }\n    render() {\n        const isOneGroup = !!(this._api && this._api.size <= 1);\n        toggleClass(this.element, 'has-actions', isOneGroup);\n    }\n}\n","import { disableIframePointEvents, quasiDefaultPrevented, toggleClass, } from '../dom';\nimport { Emitter, addDisposableListener, addDisposableWindowListener, } from '../events';\nimport { CompositeDisposable, MutableDisposable } from '../lifecycle';\nimport { clamp } from '../math';\nexport const DEFAULT_OVERLAY_Z_INDEX = 999;\nclass AriaLevelTracker {\n    constructor() {\n        this._orderedList = [];\n    }\n    push(element) {\n        this._orderedList = [\n            ...this._orderedList.filter((item) => item !== element),\n            element,\n        ];\n        this.update();\n    }\n    destroy(element) {\n        this._orderedList = this._orderedList.filter((item) => item !== element);\n        this.update();\n    }\n    update() {\n        for (let i = 0; i < this._orderedList.length; i++) {\n            this._orderedList[i].setAttribute('aria-level', `${i}`);\n            this._orderedList[i].style.zIndex = `${DEFAULT_OVERLAY_Z_INDEX + i * 2}`;\n        }\n    }\n}\nconst arialLevelTracker = new AriaLevelTracker();\nexport class Overlay extends CompositeDisposable {\n    set minimumInViewportWidth(value) {\n        this.options.minimumInViewportWidth = value;\n    }\n    set minimumInViewportHeight(value) {\n        this.options.minimumInViewportHeight = value;\n    }\n    get element() {\n        return this._element;\n    }\n    constructor(options) {\n        super();\n        this.options = options;\n        this._element = document.createElement('div');\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onDidChangeEnd = new Emitter();\n        this.onDidChangeEnd = this._onDidChangeEnd.event;\n        this.addDisposables(this._onDidChange, this._onDidChangeEnd);\n        this._element.className = 'dv-resize-container';\n        this.setupResize('top');\n        this.setupResize('bottom');\n        this.setupResize('left');\n        this.setupResize('right');\n        this.setupResize('topleft');\n        this.setupResize('topright');\n        this.setupResize('bottomleft');\n        this.setupResize('bottomright');\n        this._element.appendChild(this.options.content);\n        this.options.container.appendChild(this._element);\n        // if input bad resize within acceptable boundaries\n        this.setBounds(Object.assign(Object.assign(Object.assign(Object.assign({ height: this.options.height, width: this.options.width }, ('top' in this.options && { top: this.options.top })), ('bottom' in this.options && { bottom: this.options.bottom })), ('left' in this.options && { left: this.options.left })), ('right' in this.options && { right: this.options.right })));\n        arialLevelTracker.push(this._element);\n    }\n    bringToFront() {\n        arialLevelTracker.push(this._element);\n    }\n    setBounds(bounds = {}) {\n        if (typeof bounds.height === 'number') {\n            this._element.style.height = `${bounds.height}px`;\n        }\n        if (typeof bounds.width === 'number') {\n            this._element.style.width = `${bounds.width}px`;\n        }\n        if ('top' in bounds && typeof bounds.top === 'number') {\n            this._element.style.top = `${bounds.top}px`;\n            this._element.style.bottom = 'auto';\n            this.verticalAlignment = 'top';\n        }\n        if ('bottom' in bounds && typeof bounds.bottom === 'number') {\n            this._element.style.bottom = `${bounds.bottom}px`;\n            this._element.style.top = 'auto';\n            this.verticalAlignment = 'bottom';\n        }\n        if ('left' in bounds && typeof bounds.left === 'number') {\n            this._element.style.left = `${bounds.left}px`;\n            this._element.style.right = 'auto';\n            this.horiziontalAlignment = 'left';\n        }\n        if ('right' in bounds && typeof bounds.right === 'number') {\n            this._element.style.right = `${bounds.right}px`;\n            this._element.style.left = 'auto';\n            this.horiziontalAlignment = 'right';\n        }\n        const containerRect = this.options.container.getBoundingClientRect();\n        const overlayRect = this._element.getBoundingClientRect();\n        // region: ensure bounds within allowable limits\n        // a minimum width of minimumViewportWidth must be inside the viewport\n        const xOffset = Math.max(0, this.getMinimumWidth(overlayRect.width));\n        // a minimum height of minimumViewportHeight must be inside the viewport\n        const yOffset = Math.max(0, this.getMinimumHeight(overlayRect.height));\n        if (this.verticalAlignment === 'top') {\n            const top = clamp(overlayRect.top - containerRect.top, -yOffset, Math.max(0, containerRect.height - overlayRect.height + yOffset));\n            this._element.style.top = `${top}px`;\n            this._element.style.bottom = 'auto';\n        }\n        if (this.verticalAlignment === 'bottom') {\n            const bottom = clamp(containerRect.bottom - overlayRect.bottom, -yOffset, Math.max(0, containerRect.height - overlayRect.height + yOffset));\n            this._element.style.bottom = `${bottom}px`;\n            this._element.style.top = 'auto';\n        }\n        if (this.horiziontalAlignment === 'left') {\n            const left = clamp(overlayRect.left - containerRect.left, -xOffset, Math.max(0, containerRect.width - overlayRect.width + xOffset));\n            this._element.style.left = `${left}px`;\n            this._element.style.right = 'auto';\n        }\n        if (this.horiziontalAlignment === 'right') {\n            const right = clamp(containerRect.right - overlayRect.right, -xOffset, Math.max(0, containerRect.width - overlayRect.width + xOffset));\n            this._element.style.right = `${right}px`;\n            this._element.style.left = 'auto';\n        }\n        this._onDidChange.fire();\n    }\n    toJSON() {\n        const container = this.options.container.getBoundingClientRect();\n        const element = this._element.getBoundingClientRect();\n        const result = {};\n        if (this.verticalAlignment === 'top') {\n            result.top = parseFloat(this._element.style.top);\n        }\n        else if (this.verticalAlignment === 'bottom') {\n            result.bottom = parseFloat(this._element.style.bottom);\n        }\n        else {\n            result.top = element.top - container.top;\n        }\n        if (this.horiziontalAlignment === 'left') {\n            result.left = parseFloat(this._element.style.left);\n        }\n        else if (this.horiziontalAlignment === 'right') {\n            result.right = parseFloat(this._element.style.right);\n        }\n        else {\n            result.left = element.left - container.left;\n        }\n        result.width = element.width;\n        result.height = element.height;\n        return result;\n    }\n    setupDrag(dragTarget, options = { inDragMode: false }) {\n        const move = new MutableDisposable();\n        const track = () => {\n            let offset = null;\n            const iframes = disableIframePointEvents();\n            move.value = new CompositeDisposable({\n                dispose: () => {\n                    iframes.release();\n                },\n            }, addDisposableWindowListener(window, 'mousemove', (e) => {\n                const containerRect = this.options.container.getBoundingClientRect();\n                const x = e.clientX - containerRect.left;\n                const y = e.clientY - containerRect.top;\n                toggleClass(this._element, 'dv-resize-container-dragging', true);\n                const overlayRect = this._element.getBoundingClientRect();\n                if (offset === null) {\n                    offset = {\n                        x: e.clientX - overlayRect.left,\n                        y: e.clientY - overlayRect.top,\n                    };\n                }\n                const xOffset = Math.max(0, this.getMinimumWidth(overlayRect.width));\n                const yOffset = Math.max(0, this.getMinimumHeight(overlayRect.height));\n                const top = clamp(y - offset.y, -yOffset, Math.max(0, containerRect.height - overlayRect.height + yOffset));\n                const bottom = clamp(offset.y -\n                    y +\n                    containerRect.height -\n                    overlayRect.height, -yOffset, Math.max(0, containerRect.height - overlayRect.height + yOffset));\n                const left = clamp(x - offset.x, -xOffset, Math.max(0, containerRect.width - overlayRect.width + xOffset));\n                const right = clamp(offset.x - x + containerRect.width - overlayRect.width, -xOffset, Math.max(0, containerRect.width - overlayRect.width + xOffset));\n                const bounds = {};\n                // Anchor to top or to bottom depending on which one is closer\n                if (top <= bottom) {\n                    bounds.top = top;\n                }\n                else {\n                    bounds.bottom = bottom;\n                }\n                // Anchor to left or to right depending on which one is closer\n                if (left <= right) {\n                    bounds.left = left;\n                }\n                else {\n                    bounds.right = right;\n                }\n                this.setBounds(bounds);\n            }), addDisposableWindowListener(window, 'mouseup', () => {\n                toggleClass(this._element, 'dv-resize-container-dragging', false);\n                move.dispose();\n                this._onDidChangeEnd.fire();\n            }));\n        };\n        this.addDisposables(move, addDisposableListener(dragTarget, 'mousedown', (event) => {\n            if (event.defaultPrevented) {\n                event.preventDefault();\n                return;\n            }\n            // if somebody has marked this event then treat as a defaultPrevented\n            // without actually calling event.preventDefault()\n            if (quasiDefaultPrevented(event)) {\n                return;\n            }\n            track();\n        }), addDisposableListener(this.options.content, 'mousedown', (event) => {\n            if (event.defaultPrevented) {\n                return;\n            }\n            // if somebody has marked this event then treat as a defaultPrevented\n            // without actually calling event.preventDefault()\n            if (quasiDefaultPrevented(event)) {\n                return;\n            }\n            if (event.shiftKey) {\n                track();\n            }\n        }), addDisposableListener(this.options.content, 'mousedown', () => {\n            arialLevelTracker.push(this._element);\n        }, true));\n        if (options.inDragMode) {\n            track();\n        }\n    }\n    setupResize(direction) {\n        const resizeHandleElement = document.createElement('div');\n        resizeHandleElement.className = `dv-resize-handle-${direction}`;\n        this._element.appendChild(resizeHandleElement);\n        const move = new MutableDisposable();\n        this.addDisposables(move, addDisposableListener(resizeHandleElement, 'mousedown', (e) => {\n            e.preventDefault();\n            let startPosition = null;\n            const iframes = disableIframePointEvents();\n            move.value = new CompositeDisposable(addDisposableWindowListener(window, 'mousemove', (e) => {\n                const containerRect = this.options.container.getBoundingClientRect();\n                const overlayRect = this._element.getBoundingClientRect();\n                const y = e.clientY - containerRect.top;\n                const x = e.clientX - containerRect.left;\n                if (startPosition === null) {\n                    // record the initial dimensions since as all subsequence moves are relative to this\n                    startPosition = {\n                        originalY: y,\n                        originalHeight: overlayRect.height,\n                        originalX: x,\n                        originalWidth: overlayRect.width,\n                    };\n                }\n                let top = undefined;\n                let bottom = undefined;\n                let height = undefined;\n                let left = undefined;\n                let right = undefined;\n                let width = undefined;\n                const moveTop = () => {\n                    top = clamp(y, -Number.MAX_VALUE, startPosition.originalY +\n                        startPosition.originalHeight >\n                        containerRect.height\n                        ? this.getMinimumHeight(containerRect.height)\n                        : Math.max(0, startPosition.originalY +\n                            startPosition.originalHeight -\n                            Overlay.MINIMUM_HEIGHT));\n                    height =\n                        startPosition.originalY +\n                            startPosition.originalHeight -\n                            top;\n                    bottom = containerRect.height - top - height;\n                };\n                const moveBottom = () => {\n                    top =\n                        startPosition.originalY -\n                            startPosition.originalHeight;\n                    height = clamp(y - top, top < 0 &&\n                        typeof this.options\n                            .minimumInViewportHeight === 'number'\n                        ? -top +\n                            this.options.minimumInViewportHeight\n                        : Overlay.MINIMUM_HEIGHT, Number.MAX_VALUE);\n                    bottom = containerRect.height - top - height;\n                };\n                const moveLeft = () => {\n                    left = clamp(x, -Number.MAX_VALUE, startPosition.originalX +\n                        startPosition.originalWidth >\n                        containerRect.width\n                        ? this.getMinimumWidth(containerRect.width)\n                        : Math.max(0, startPosition.originalX +\n                            startPosition.originalWidth -\n                            Overlay.MINIMUM_WIDTH));\n                    width =\n                        startPosition.originalX +\n                            startPosition.originalWidth -\n                            left;\n                    right = containerRect.width - left - width;\n                };\n                const moveRight = () => {\n                    left =\n                        startPosition.originalX -\n                            startPosition.originalWidth;\n                    width = clamp(x - left, left < 0 &&\n                        typeof this.options\n                            .minimumInViewportWidth === 'number'\n                        ? -left +\n                            this.options.minimumInViewportWidth\n                        : Overlay.MINIMUM_WIDTH, Number.MAX_VALUE);\n                    right = containerRect.width - left - width;\n                };\n                switch (direction) {\n                    case 'top':\n                        moveTop();\n                        break;\n                    case 'bottom':\n                        moveBottom();\n                        break;\n                    case 'left':\n                        moveLeft();\n                        break;\n                    case 'right':\n                        moveRight();\n                        break;\n                    case 'topleft':\n                        moveTop();\n                        moveLeft();\n                        break;\n                    case 'topright':\n                        moveTop();\n                        moveRight();\n                        break;\n                    case 'bottomleft':\n                        moveBottom();\n                        moveLeft();\n                        break;\n                    case 'bottomright':\n                        moveBottom();\n                        moveRight();\n                        break;\n                }\n                const bounds = {};\n                // Anchor to top or to bottom depending on which one is closer\n                if (top <= bottom) {\n                    bounds.top = top;\n                }\n                else {\n                    bounds.bottom = bottom;\n                }\n                // Anchor to left or to right depending on which one is closer\n                if (left <= right) {\n                    bounds.left = left;\n                }\n                else {\n                    bounds.right = right;\n                }\n                bounds.height = height;\n                bounds.width = width;\n                this.setBounds(bounds);\n            }), {\n                dispose: () => {\n                    iframes.release();\n                },\n            }, addDisposableWindowListener(window, 'mouseup', () => {\n                move.dispose();\n                this._onDidChangeEnd.fire();\n            }));\n        }));\n    }\n    getMinimumWidth(width) {\n        if (typeof this.options.minimumInViewportWidth === 'number') {\n            return width - this.options.minimumInViewportWidth;\n        }\n        return 0;\n    }\n    getMinimumHeight(height) {\n        if (typeof this.options.minimumInViewportHeight === 'number') {\n            return height - this.options.minimumInViewportHeight;\n        }\n        return 0;\n    }\n    dispose() {\n        arialLevelTracker.destroy(this._element);\n        this._element.remove();\n        super.dispose();\n    }\n}\nOverlay.MINIMUM_HEIGHT = 20;\nOverlay.MINIMUM_WIDTH = 20;\n","import { CompositeDisposable } from '../lifecycle';\nexport class DockviewFloatingGroupPanel extends CompositeDisposable {\n    constructor(group, overlay) {\n        super();\n        this.group = group;\n        this.overlay = overlay;\n        this.addDisposables(overlay);\n    }\n    position(bounds) {\n        this.overlay.setBounds(bounds);\n    }\n}\n","export const DEFAULT_FLOATING_GROUP_OVERFLOW_SIZE = 100;\nexport const DEFAULT_FLOATING_GROUP_POSITION = { left: 100, top: 100, width: 300, height: 300 };\n","import { DragAndDropObserver } from '../dnd/dnd';\nimport { getDomNodePagePosition, toggleClass } from '../dom';\nimport { CompositeDisposable, Disposable, MutableDisposable, } from '../lifecycle';\nimport { DEFAULT_OVERLAY_Z_INDEX } from './overlay';\nfunction createFocusableElement() {\n    const element = document.createElement('div');\n    element.tabIndex = -1;\n    return element;\n}\nexport class OverlayRenderContainer extends CompositeDisposable {\n    constructor(element, accessor) {\n        super();\n        this.element = element;\n        this.accessor = accessor;\n        this.map = {};\n        this._disposed = false;\n        this.addDisposables(Disposable.from(() => {\n            for (const value of Object.values(this.map)) {\n                value.disposable.dispose();\n                value.destroy.dispose();\n            }\n            this._disposed = true;\n        }));\n    }\n    detatch(panel) {\n        if (this.map[panel.api.id]) {\n            const { disposable, destroy } = this.map[panel.api.id];\n            disposable.dispose();\n            destroy.dispose();\n            delete this.map[panel.api.id];\n            return true;\n        }\n        return false;\n    }\n    attach(options) {\n        const { panel, referenceContainer } = options;\n        if (!this.map[panel.api.id]) {\n            const element = createFocusableElement();\n            element.className = 'dv-render-overlay';\n            this.map[panel.api.id] = {\n                panel,\n                disposable: Disposable.NONE,\n                destroy: Disposable.NONE,\n                element,\n            };\n        }\n        const focusContainer = this.map[panel.api.id].element;\n        if (panel.view.content.element.parentElement !== focusContainer) {\n            focusContainer.appendChild(panel.view.content.element);\n        }\n        if (focusContainer.parentElement !== this.element) {\n            this.element.appendChild(focusContainer);\n        }\n        const resize = () => {\n            // TODO propagate position to avoid getDomNodePagePosition calls, possible performance bottleneck?\n            const box = getDomNodePagePosition(referenceContainer.element);\n            const box2 = getDomNodePagePosition(this.element);\n            focusContainer.style.left = `${box.left - box2.left}px`;\n            focusContainer.style.top = `${box.top - box2.top}px`;\n            focusContainer.style.width = `${box.width}px`;\n            focusContainer.style.height = `${box.height}px`;\n            toggleClass(focusContainer, 'dv-render-overlay-float', panel.group.api.location.type === 'floating');\n        };\n        const visibilityChanged = () => {\n            if (panel.api.isVisible) {\n                resize();\n            }\n            focusContainer.style.display = panel.api.isVisible ? '' : 'none';\n        };\n        const observerDisposable = new MutableDisposable();\n        const correctLayerPosition = () => {\n            if (panel.api.location.type === 'floating') {\n                queueMicrotask(() => {\n                    const floatingGroup = this.accessor.floatingGroups.find((group) => group.group === panel.api.group);\n                    if (!floatingGroup) {\n                        return;\n                    }\n                    const element = floatingGroup.overlay.element;\n                    const update = () => {\n                        const level = Number(element.getAttribute('aria-level'));\n                        focusContainer.style.zIndex = `${DEFAULT_OVERLAY_Z_INDEX + level * 2 + 1}`;\n                    };\n                    const observer = new MutationObserver(() => {\n                        update();\n                    });\n                    observerDisposable.value = Disposable.from(() => observer.disconnect());\n                    observer.observe(element, {\n                        attributeFilter: ['aria-level'],\n                        attributes: true,\n                    });\n                    update();\n                });\n            }\n            else {\n                focusContainer.style.zIndex = ''; // reset the z-index, perhaps CSS will take over here\n            }\n        };\n        const disposable = new CompositeDisposable(observerDisposable, \n        /**\n         * since container is positioned absoutely we must explicitly forward\n         * the dnd events for the expect behaviours to continue to occur in terms of dnd\n         *\n         * the dnd observer does not need to be conditional on whether the panel is visible since\n         * non-visible panels are 'display: none' and in such case the dnd observer will not fire.\n         */\n        new DragAndDropObserver(focusContainer, {\n            onDragEnd: (e) => {\n                referenceContainer.dropTarget.dnd.onDragEnd(e);\n            },\n            onDragEnter: (e) => {\n                referenceContainer.dropTarget.dnd.onDragEnter(e);\n            },\n            onDragLeave: (e) => {\n                referenceContainer.dropTarget.dnd.onDragLeave(e);\n            },\n            onDrop: (e) => {\n                referenceContainer.dropTarget.dnd.onDrop(e);\n            },\n            onDragOver: (e) => {\n                referenceContainer.dropTarget.dnd.onDragOver(e);\n            },\n        }), panel.api.onDidVisibilityChange(() => {\n            /**\n             * Control the visibility of the content, however even when not visible (display: none)\n             * the content is still maintained within the DOM hence DOM specific attributes\n             * such as scroll position are maintained when next made visible.\n             */\n            visibilityChanged();\n        }), panel.api.onDidDimensionsChange(() => {\n            if (!panel.api.isVisible) {\n                return;\n            }\n            resize();\n        }), panel.api.onDidLocationChange(() => {\n            correctLayerPosition();\n        }));\n        this.map[panel.api.id].destroy = Disposable.from(() => {\n            var _a;\n            if (panel.view.content.element.parentElement === focusContainer) {\n                focusContainer.removeChild(panel.view.content.element);\n            }\n            (_a = focusContainer.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(focusContainer);\n        });\n        correctLayerPosition();\n        queueMicrotask(() => {\n            if (this.isDisposed) {\n                return;\n            }\n            /**\n             * wait until everything has finished in the current stack-frame call before\n             * calling the first resize as other size-altering events may still occur before\n             * the end of the stack-frame.\n             */\n            visibilityChanged();\n        });\n        // dispose of logic asoccciated with previous reference-container\n        this.map[panel.api.id].disposable.dispose();\n        // and reset the disposable to the active reference-container\n        this.map[panel.api.id].disposable = disposable;\n        return focusContainer;\n    }\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { addStyles } from './dom';\nimport { Emitter, addDisposableWindowListener } from './events';\nimport { CompositeDisposable } from './lifecycle';\nexport class PopoutWindow extends CompositeDisposable {\n    get window() {\n        var _a, _b;\n        return (_b = (_a = this._window) === null || _a === void 0 ? void 0 : _a.value) !== null && _b !== void 0 ? _b : null;\n    }\n    constructor(target, className, options) {\n        super();\n        this.target = target;\n        this.className = className;\n        this.options = options;\n        this._onWillClose = new Emitter();\n        this.onWillClose = this._onWillClose.event;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        this._window = null;\n        this.addDisposables(this._onWillClose, this._onDidClose, {\n            dispose: () => {\n                this.close();\n            },\n        });\n    }\n    dimensions() {\n        if (!this._window) {\n            return null;\n        }\n        const left = this._window.value.screenX;\n        const top = this._window.value.screenY;\n        const width = this._window.value.innerWidth;\n        const height = this._window.value.innerHeight;\n        return { top, left, width, height };\n    }\n    close() {\n        var _a, _b;\n        if (this._window) {\n            this._onWillClose.fire();\n            (_b = (_a = this.options).onWillClose) === null || _b === void 0 ? void 0 : _b.call(_a, {\n                id: this.target,\n                window: this._window.value,\n            });\n            this._window.disposable.dispose();\n            this._window.value.close();\n            this._window = null;\n            this._onDidClose.fire();\n        }\n    }\n    open() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._window) {\n                throw new Error('instance of popout window is already open');\n            }\n            const url = `${this.options.url}`;\n            const features = Object.entries({\n                top: this.options.top,\n                left: this.options.left,\n                width: this.options.width,\n                height: this.options.height,\n            })\n                .map(([key, value]) => `${key}=${value}`)\n                .join(',');\n            /**\n             * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/open\n             */\n            const externalWindow = window.open(url, this.target, features);\n            if (!externalWindow) {\n                /**\n                 * Popup blocked\n                 */\n                return null;\n            }\n            const disposable = new CompositeDisposable();\n            this._window = { value: externalWindow, disposable };\n            disposable.addDisposables(addDisposableWindowListener(window, 'beforeunload', () => {\n                /**\n                 * before the main window closes we should close this popup too\n                 * to be good citizens\n                 *\n                 * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event\n                 */\n                this.close();\n            }));\n            const container = this.createPopoutWindowContainer();\n            if (this.className) {\n                container.classList.add(this.className);\n            }\n            (_b = (_a = this.options).onDidOpen) === null || _b === void 0 ? void 0 : _b.call(_a, {\n                id: this.target,\n                window: externalWindow,\n            });\n            return new Promise((resolve) => {\n                externalWindow.addEventListener('unload', (e) => {\n                    // if page fails to load before unloading\n                    // this.close();\n                });\n                externalWindow.addEventListener('load', () => {\n                    /**\n                     * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event\n                     */\n                    const externalDocument = externalWindow.document;\n                    externalDocument.title = document.title;\n                    externalDocument.body.appendChild(container);\n                    addStyles(externalDocument, window.document.styleSheets);\n                    /**\n                     * beforeunload must be registered after load for reasons I could not determine\n                     * otherwise the beforeunload event will not fire when the window is closed\n                     */\n                    addDisposableWindowListener(externalWindow, 'beforeunload', () => {\n                        /**\n                         * @see https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event\n                         */\n                        this.close();\n                    });\n                    resolve(container);\n                });\n            });\n        });\n    }\n    createPopoutWindowContainer() {\n        const el = document.createElement('div');\n        el.classList.add('dv-popout-window');\n        el.id = 'dv-popout-window';\n        el.style.position = 'absolute';\n        el.style.width = '100%';\n        el.style.height = '100%';\n        el.style.top = '0px';\n        el.style.left = '0px';\n        return el;\n    }\n}\n","import { getRelativeLocation, getGridLocation, } from '../gridview/gridview';\nimport { directionToPosition, Droptarget, } from '../dnd/droptarget';\nimport { tail, sequenceEquals, remove } from '../array';\nimport { DockviewPanel } from './dockviewPanel';\nimport { CompositeDisposable, Disposable } from '../lifecycle';\nimport { Event, Emitter, addDisposableWindowListener } from '../events';\nimport { Watermark } from './components/watermark/watermark';\nimport { sequentialNumberGenerator } from '../math';\nimport { DefaultDockviewDeserialzier } from './deserializer';\nimport { DockviewUnhandledDragOverEvent, isGroupOptionsWithGroup, isGroupOptionsWithPanel, isPanelOptionsWithGroup, isPanelOptionsWithPanel, } from './options';\nimport { BaseGrid, toTarget, } from '../gridview/baseComponentGridview';\nimport { DockviewApi } from '../api/component.api';\nimport { Orientation, Sizing } from '../splitview/splitview';\nimport { DockviewDidDropEvent, DockviewWillDropEvent, WillShowOverlayLocationEvent, } from './dockviewGroupPanelModel';\nimport { DockviewGroupPanel } from './dockviewGroupPanel';\nimport { DockviewPanelModel } from './dockviewPanelModel';\nimport { getPanelData } from '../dnd/dataTransfer';\nimport { Overlay } from '../overlay/overlay';\nimport { addTestId, toggleClass, watchElementResize } from '../dom';\nimport { DockviewFloatingGroupPanel } from './dockviewFloatingGroupPanel';\nimport { DEFAULT_FLOATING_GROUP_OVERFLOW_SIZE, DEFAULT_FLOATING_GROUP_POSITION, } from '../constants';\nimport { OverlayRenderContainer, } from '../overlay/overlayRenderContainer';\nimport { PopoutWindow } from '../popoutWindow';\nconst DEFAULT_ROOT_OVERLAY_MODEL = {\n    activationSize: { type: 'pixels', value: 10 },\n    size: { type: 'pixels', value: 20 },\n};\nfunction moveGroupWithoutDestroying(options) {\n    const activePanel = options.from.activePanel;\n    const panels = [...options.from.panels].map((panel) => {\n        const removedPanel = options.from.model.removePanel(panel);\n        options.from.model.renderContainer.detatch(panel);\n        return removedPanel;\n    });\n    panels.forEach((panel) => {\n        options.to.model.openPanel(panel, {\n            skipSetActive: activePanel !== panel,\n            skipSetGroupActive: true,\n        });\n    });\n}\nfunction getDockviewTheme(element) {\n    function toClassList(element) {\n        const list = [];\n        for (let i = 0; i < element.classList.length; i++) {\n            list.push(element.classList.item(i));\n        }\n        return list;\n    }\n    let theme = undefined;\n    let parent = element;\n    while (parent !== null) {\n        theme = toClassList(parent).find((cls) => cls.startsWith('dockview-theme-'));\n        if (typeof theme === 'string') {\n            break;\n        }\n        parent = parent.parentElement;\n    }\n    return theme;\n}\nexport class DockviewComponent extends BaseGrid {\n    get orientation() {\n        return this.gridview.orientation;\n    }\n    get totalPanels() {\n        return this.panels.length;\n    }\n    get panels() {\n        return this.groups.flatMap((group) => group.panels);\n    }\n    get options() {\n        return this._options;\n    }\n    get activePanel() {\n        const activeGroup = this.activeGroup;\n        if (!activeGroup) {\n            return undefined;\n        }\n        return activeGroup.activePanel;\n    }\n    get renderer() {\n        var _a;\n        return (_a = this.options.defaultRenderer) !== null && _a !== void 0 ? _a : 'onlyWhenVisible';\n    }\n    get api() {\n        return this._api;\n    }\n    get gap() {\n        return this.gridview.margin;\n    }\n    get floatingGroups() {\n        return this._floatingGroups;\n    }\n    constructor(parentElement, options) {\n        var _a;\n        super({\n            proportionalLayout: true,\n            orientation: Orientation.HORIZONTAL,\n            styles: options.hideBorders\n                ? { separatorBorder: 'transparent' }\n                : undefined,\n            parentElement: parentElement,\n            disableAutoResizing: options.disableAutoResizing,\n            locked: options.locked,\n            margin: options.gap,\n            className: options.className,\n        });\n        this.nextGroupId = sequentialNumberGenerator();\n        this._deserializer = new DefaultDockviewDeserialzier(this);\n        this.watermark = null;\n        this._onWillDragPanel = new Emitter();\n        this.onWillDragPanel = this._onWillDragPanel.event;\n        this._onWillDragGroup = new Emitter();\n        this.onWillDragGroup = this._onWillDragGroup.event;\n        this._onDidDrop = new Emitter();\n        this.onDidDrop = this._onDidDrop.event;\n        this._onWillDrop = new Emitter();\n        this.onWillDrop = this._onWillDrop.event;\n        this._onWillShowOverlay = new Emitter();\n        this.onWillShowOverlay = this._onWillShowOverlay.event;\n        this._onUnhandledDragOverEvent = new Emitter();\n        this.onUnhandledDragOverEvent = this._onUnhandledDragOverEvent.event;\n        this._onDidRemovePanel = new Emitter();\n        this.onDidRemovePanel = this._onDidRemovePanel.event;\n        this._onDidAddPanel = new Emitter();\n        this.onDidAddPanel = this._onDidAddPanel.event;\n        this._onDidLayoutFromJSON = new Emitter();\n        this.onDidLayoutFromJSON = this._onDidLayoutFromJSON.event;\n        this._onDidActivePanelChange = new Emitter();\n        this.onDidActivePanelChange = this._onDidActivePanelChange.event;\n        this._onDidMovePanel = new Emitter();\n        this.onDidMovePanel = this._onDidMovePanel.event;\n        this._floatingGroups = [];\n        this._popoutGroups = [];\n        this._onDidRemoveGroup = new Emitter();\n        this.onDidRemoveGroup = this._onDidRemoveGroup.event;\n        this._onDidAddGroup = new Emitter();\n        this.onDidAddGroup = this._onDidAddGroup.event;\n        this._onDidActiveGroupChange = new Emitter();\n        this.onDidActiveGroupChange = this._onDidActiveGroupChange.event;\n        this._moving = false;\n        // const gready = document.createElement('div');\n        // gready.className = 'dv-overlay-render-container';\n        // this.gridview.element.appendChild(gready);\n        this.overlayRenderContainer = new OverlayRenderContainer(this.gridview.element, this);\n        toggleClass(this.gridview.element, 'dv-dockview', true);\n        toggleClass(this.element, 'dv-debug', !!options.debug);\n        this.addDisposables(this.overlayRenderContainer, this._onWillDragPanel, this._onWillDragGroup, this._onWillShowOverlay, this._onDidActivePanelChange, this._onDidAddPanel, this._onDidRemovePanel, this._onDidLayoutFromJSON, this._onDidDrop, this._onWillDrop, this._onDidMovePanel, this._onDidAddGroup, this._onDidRemoveGroup, this._onDidActiveGroupChange, this._onUnhandledDragOverEvent, this.onDidViewVisibilityChangeMicroTaskQueue(() => {\n            this.updateWatermark();\n        }), this.onDidAdd((event) => {\n            if (!this._moving) {\n                this._onDidAddGroup.fire(event);\n            }\n        }), this.onDidRemove((event) => {\n            if (!this._moving) {\n                this._onDidRemoveGroup.fire(event);\n            }\n        }), this.onDidActiveChange((event) => {\n            if (!this._moving) {\n                this._onDidActiveGroupChange.fire(event);\n            }\n        }), Event.any(this.onDidAdd, this.onDidRemove)(() => {\n            this.updateWatermark();\n        }), Event.any(this.onDidAddPanel, this.onDidRemovePanel, this.onDidAddGroup, this.onDidRemove, this.onDidMovePanel, this.onDidActivePanelChange)(() => {\n            this._bufferOnDidLayoutChange.fire();\n        }), Disposable.from(() => {\n            // iterate over a copy of the array since .dispose() mutates the original array\n            for (const group of [...this._floatingGroups]) {\n                group.dispose();\n            }\n            // iterate over a copy of the array since .dispose() mutates the original array\n            for (const group of [...this._popoutGroups]) {\n                group.disposable.dispose();\n            }\n        }));\n        this._options = options;\n        this._rootDropTarget = new Droptarget(this.element, {\n            canDisplayOverlay: (event, position) => {\n                const data = getPanelData();\n                if (data) {\n                    if (data.viewId !== this.id) {\n                        return false;\n                    }\n                    if (position === 'center') {\n                        // center drop target is only allowed if there are no panels in the grid\n                        // floating panels are allowed\n                        return this.gridview.length === 0;\n                    }\n                    return true;\n                }\n                if (position === 'center' && this.gridview.length !== 0) {\n                    /**\n                     * for external events only show the four-corner drag overlays, disable\n                     * the center position so that external drag events can fall through to the group\n                     * and panel drop target handlers\n                     */\n                    return false;\n                }\n                const firedEvent = new DockviewUnhandledDragOverEvent(event, 'edge', position, getPanelData);\n                this._onUnhandledDragOverEvent.fire(firedEvent);\n                return firedEvent.isAccepted;\n            },\n            acceptedTargetZones: ['top', 'bottom', 'left', 'right', 'center'],\n            overlayModel: (_a = this.options.rootOverlayModel) !== null && _a !== void 0 ? _a : DEFAULT_ROOT_OVERLAY_MODEL,\n        });\n        this.addDisposables(this._rootDropTarget, this._rootDropTarget.onWillShowOverlay((event) => {\n            if (this.gridview.length > 0 && event.position === 'center') {\n                // option only available when no panels in primary grid\n                return;\n            }\n            this._onWillShowOverlay.fire(new WillShowOverlayLocationEvent(event, {\n                kind: 'edge',\n                panel: undefined,\n                api: this._api,\n                group: undefined,\n                getData: getPanelData,\n            }));\n        }), this._rootDropTarget.onDrop((event) => {\n            var _a;\n            const willDropEvent = new DockviewWillDropEvent({\n                nativeEvent: event.nativeEvent,\n                position: event.position,\n                panel: undefined,\n                api: this._api,\n                group: undefined,\n                getData: getPanelData,\n                kind: 'edge',\n            });\n            this._onWillDrop.fire(willDropEvent);\n            if (willDropEvent.defaultPrevented) {\n                return;\n            }\n            const data = getPanelData();\n            if (data) {\n                this.moveGroupOrPanel({\n                    from: {\n                        groupId: data.groupId,\n                        panelId: (_a = data.panelId) !== null && _a !== void 0 ? _a : undefined,\n                    },\n                    to: {\n                        group: this.orthogonalize(event.position),\n                        position: 'center',\n                    },\n                });\n            }\n            else {\n                this._onDidDrop.fire(new DockviewDidDropEvent({\n                    nativeEvent: event.nativeEvent,\n                    position: event.position,\n                    panel: undefined,\n                    api: this._api,\n                    group: undefined,\n                    getData: getPanelData,\n                }));\n            }\n        }), this._rootDropTarget);\n        this._api = new DockviewApi(this);\n        this.updateWatermark();\n    }\n    addPopoutGroup(itemToPopout, options) {\n        var _a, _b, _c;\n        if (itemToPopout instanceof DockviewPanel &&\n            itemToPopout.group.size === 1) {\n            return this.addPopoutGroup(itemToPopout.group, options);\n        }\n        const theme = getDockviewTheme(this.gridview.element);\n        const element = this.element;\n        function getBox() {\n            if (options === null || options === void 0 ? void 0 : options.position) {\n                return options.position;\n            }\n            if (itemToPopout instanceof DockviewGroupPanel) {\n                return itemToPopout.element.getBoundingClientRect();\n            }\n            if (itemToPopout.group) {\n                return itemToPopout.group.element.getBoundingClientRect();\n            }\n            return element.getBoundingClientRect();\n        }\n        const box = getBox();\n        const groupId = (_b = (_a = options === null || options === void 0 ? void 0 : options.overridePopoutGroup) === null || _a === void 0 ? void 0 : _a.id) !== null && _b !== void 0 ? _b : this.getNextGroupId();\n        if (itemToPopout.api.location.type === 'grid') {\n            itemToPopout.api.setVisible(false);\n        }\n        const _window = new PopoutWindow(`${this.id}-${groupId}`, // unique id\n        theme !== null && theme !== void 0 ? theme : '', {\n            url: (_c = options === null || options === void 0 ? void 0 : options.popoutUrl) !== null && _c !== void 0 ? _c : '/popout.html',\n            left: window.screenX + box.left,\n            top: window.screenY + box.top,\n            width: box.width,\n            height: box.height,\n            onDidOpen: options === null || options === void 0 ? void 0 : options.onDidOpen,\n            onWillClose: options === null || options === void 0 ? void 0 : options.onWillClose,\n        });\n        const popoutWindowDisposable = new CompositeDisposable(_window, _window.onDidClose(() => {\n            popoutWindowDisposable.dispose();\n        }));\n        return _window\n            .open()\n            .then((popoutContainer) => {\n            var _a;\n            if (_window.isDisposed) {\n                return;\n            }\n            if (popoutContainer === null) {\n                popoutWindowDisposable.dispose();\n                return;\n            }\n            const gready = document.createElement('div');\n            gready.className = 'dv-overlay-render-container';\n            const overlayRenderContainer = new OverlayRenderContainer(gready, this);\n            const referenceGroup = itemToPopout instanceof DockviewPanel\n                ? itemToPopout.group\n                : itemToPopout;\n            const referenceLocation = itemToPopout.api.location.type;\n            const group = (_a = options === null || options === void 0 ? void 0 : options.overridePopoutGroup) !== null && _a !== void 0 ? _a : this.createGroup({ id: groupId });\n            group.model.renderContainer = overlayRenderContainer;\n            if (!(options === null || options === void 0 ? void 0 : options.overridePopoutGroup)) {\n                this._onDidAddGroup.fire(group);\n            }\n            if (itemToPopout instanceof DockviewPanel) {\n                this.movingLock(() => {\n                    const panel = referenceGroup.model.removePanel(itemToPopout);\n                    group.model.openPanel(panel);\n                });\n            }\n            else {\n                this.movingLock(() => moveGroupWithoutDestroying({\n                    from: referenceGroup,\n                    to: group,\n                }));\n                switch (referenceLocation) {\n                    case 'grid':\n                        referenceGroup.api.setVisible(false);\n                        break;\n                    case 'floating':\n                    case 'popout':\n                        this.removeGroup(referenceGroup);\n                        break;\n                }\n            }\n            popoutContainer.classList.add('dv-dockview');\n            popoutContainer.style.overflow = 'hidden';\n            popoutContainer.appendChild(gready);\n            popoutContainer.appendChild(group.element);\n            group.model.location = {\n                type: 'popout',\n                getWindow: () => _window.window,\n            };\n            this.doSetGroupAndPanelActive(group);\n            popoutWindowDisposable.addDisposables(group.api.onDidActiveChange((event) => {\n                var _a;\n                if (event.isActive) {\n                    (_a = _window.window) === null || _a === void 0 ? void 0 : _a.focus();\n                }\n            }), group.api.onWillFocus(() => {\n                var _a;\n                (_a = _window.window) === null || _a === void 0 ? void 0 : _a.focus();\n            }));\n            let returnedGroup;\n            const value = {\n                window: _window,\n                popoutGroup: group,\n                referenceGroup: this.getPanel(referenceGroup.id)\n                    ? referenceGroup.id\n                    : undefined,\n                disposable: {\n                    dispose: () => {\n                        popoutWindowDisposable.dispose();\n                        return returnedGroup;\n                    },\n                },\n            };\n            popoutWindowDisposable.addDisposables(\n            /**\n             * ResizeObserver seems slow here, I do not know why but we don't need it\n             * since we can reply on the window resize event as we will occupy the full\n             * window dimensions\n             */\n            addDisposableWindowListener(_window.window, 'resize', () => {\n                group.layout(window.innerWidth, window.innerHeight);\n            }), overlayRenderContainer, Disposable.from(() => {\n                if (this.getPanel(referenceGroup.id)) {\n                    this.movingLock(() => moveGroupWithoutDestroying({\n                        from: group,\n                        to: referenceGroup,\n                    }));\n                    if (!referenceGroup.api.isVisible) {\n                        referenceGroup.api.setVisible(true);\n                    }\n                    if (this.getPanel(group.id)) {\n                        this.doRemoveGroup(group, {\n                            skipPopoutAssociated: true,\n                        });\n                    }\n                }\n                else if (this.getPanel(group.id)) {\n                    const removedGroup = this.doRemoveGroup(group, {\n                        skipDispose: true,\n                        skipActive: true,\n                    });\n                    removedGroup.model.renderContainer =\n                        this.overlayRenderContainer;\n                    removedGroup.model.location = { type: 'grid' };\n                    returnedGroup = removedGroup;\n                }\n            }));\n            this._popoutGroups.push(value);\n            this.updateWatermark();\n        })\n            .catch((err) => {\n            console.error('dockview: failed to create popout window', err);\n        });\n    }\n    addFloatingGroup(item, options) {\n        var _a, _b, _c, _d, _e;\n        let group;\n        if (item instanceof DockviewPanel) {\n            group = this.createGroup();\n            this._onDidAddGroup.fire(group);\n            this.movingLock(() => this.removePanel(item, {\n                removeEmptyGroup: true,\n                skipDispose: true,\n                skipSetActiveGroup: true,\n            }));\n            this.movingLock(() => group.model.openPanel(item, { skipSetGroupActive: true }));\n        }\n        else {\n            group = item;\n            const popoutReferenceGroupId = (_a = this._popoutGroups.find((_) => _.popoutGroup === group)) === null || _a === void 0 ? void 0 : _a.referenceGroup;\n            const popoutReferenceGroup = popoutReferenceGroupId\n                ? this.getPanel(popoutReferenceGroupId)\n                : undefined;\n            const skip = typeof (options === null || options === void 0 ? void 0 : options.skipRemoveGroup) === 'boolean' &&\n                options.skipRemoveGroup;\n            if (!skip) {\n                if (popoutReferenceGroup) {\n                    this.movingLock(() => moveGroupWithoutDestroying({\n                        from: item,\n                        to: popoutReferenceGroup,\n                    }));\n                    this.doRemoveGroup(item, {\n                        skipPopoutReturn: true,\n                        skipPopoutAssociated: true,\n                    });\n                    this.doRemoveGroup(popoutReferenceGroup, {\n                        skipDispose: true,\n                    });\n                    group = popoutReferenceGroup;\n                }\n                else {\n                    this.doRemoveGroup(item, {\n                        skipDispose: true,\n                        skipPopoutReturn: true,\n                        skipPopoutAssociated: false,\n                    });\n                }\n            }\n        }\n        function getAnchoredBox() {\n            if (options === null || options === void 0 ? void 0 : options.position) {\n                const result = {};\n                if ('left' in options.position) {\n                    result.left = Math.max(options.position.left, 0);\n                }\n                else if ('right' in options.position) {\n                    result.right = Math.max(options.position.right, 0);\n                }\n                else {\n                    result.left = DEFAULT_FLOATING_GROUP_POSITION.left;\n                }\n                if ('top' in options.position) {\n                    result.top = Math.max(options.position.top, 0);\n                }\n                else if ('bottom' in options.position) {\n                    result.bottom = Math.max(options.position.bottom, 0);\n                }\n                else {\n                    result.top = DEFAULT_FLOATING_GROUP_POSITION.top;\n                }\n                if (typeof options.width === 'number') {\n                    result.width = Math.max(options.width, 0);\n                }\n                else {\n                    result.width = DEFAULT_FLOATING_GROUP_POSITION.width;\n                }\n                if (typeof options.height === 'number') {\n                    result.height = Math.max(options.height, 0);\n                }\n                else {\n                    result.height = DEFAULT_FLOATING_GROUP_POSITION.height;\n                }\n                return result;\n            }\n            return {\n                left: typeof (options === null || options === void 0 ? void 0 : options.x) === 'number'\n                    ? Math.max(options.x, 0)\n                    : DEFAULT_FLOATING_GROUP_POSITION.left,\n                top: typeof (options === null || options === void 0 ? void 0 : options.y) === 'number'\n                    ? Math.max(options.y, 0)\n                    : DEFAULT_FLOATING_GROUP_POSITION.top,\n                width: typeof (options === null || options === void 0 ? void 0 : options.width) === 'number'\n                    ? Math.max(options.width, 0)\n                    : DEFAULT_FLOATING_GROUP_POSITION.width,\n                height: typeof (options === null || options === void 0 ? void 0 : options.height) === 'number'\n                    ? Math.max(options.height, 0)\n                    : DEFAULT_FLOATING_GROUP_POSITION.height,\n            };\n        }\n        const anchoredBox = getAnchoredBox();\n        const overlay = new Overlay(Object.assign(Object.assign({ container: this.gridview.element, content: group.element }, anchoredBox), { minimumInViewportWidth: this.options.floatingGroupBounds === 'boundedWithinViewport'\n                ? undefined\n                : (_c = (_b = this.options.floatingGroupBounds) === null || _b === void 0 ? void 0 : _b.minimumWidthWithinViewport) !== null && _c !== void 0 ? _c : DEFAULT_FLOATING_GROUP_OVERFLOW_SIZE, minimumInViewportHeight: this.options.floatingGroupBounds === 'boundedWithinViewport'\n                ? undefined\n                : (_e = (_d = this.options.floatingGroupBounds) === null || _d === void 0 ? void 0 : _d.minimumHeightWithinViewport) !== null && _e !== void 0 ? _e : DEFAULT_FLOATING_GROUP_OVERFLOW_SIZE }));\n        const el = group.element.querySelector('.void-container');\n        if (!el) {\n            throw new Error('failed to find drag handle');\n        }\n        overlay.setupDrag(el, {\n            inDragMode: typeof (options === null || options === void 0 ? void 0 : options.inDragMode) === 'boolean'\n                ? options.inDragMode\n                : false,\n        });\n        const floatingGroupPanel = new DockviewFloatingGroupPanel(group, overlay);\n        const disposable = new CompositeDisposable(group.api.onDidActiveChange((event) => {\n            if (event.isActive) {\n                overlay.bringToFront();\n            }\n        }), watchElementResize(group.element, (entry) => {\n            const { width, height } = entry.contentRect;\n            group.layout(width, height); // let the group know it's size is changing so it can fire events to the panel\n        }));\n        floatingGroupPanel.addDisposables(overlay.onDidChange(() => {\n            // this is either a resize or a move\n            // to inform the panels .layout(...) the group with it's current size\n            // don't care about resize since the above watcher handles that\n            group.layout(group.width, group.height);\n        }), overlay.onDidChangeEnd(() => {\n            this._bufferOnDidLayoutChange.fire();\n        }), group.onDidChange((event) => {\n            overlay.setBounds({\n                height: event === null || event === void 0 ? void 0 : event.height,\n                width: event === null || event === void 0 ? void 0 : event.width,\n            });\n        }), {\n            dispose: () => {\n                disposable.dispose();\n                remove(this._floatingGroups, floatingGroupPanel);\n                group.model.location = { type: 'grid' };\n                this.updateWatermark();\n            },\n        });\n        this._floatingGroups.push(floatingGroupPanel);\n        group.model.location = { type: 'floating' };\n        if (!(options === null || options === void 0 ? void 0 : options.skipActiveGroup)) {\n            this.doSetGroupAndPanelActive(group);\n        }\n        this.updateWatermark();\n    }\n    orthogonalize(position) {\n        switch (position) {\n            case 'top':\n            case 'bottom':\n                if (this.gridview.orientation === Orientation.HORIZONTAL) {\n                    // we need to add to a vertical splitview but the current root is a horizontal splitview.\n                    // insert a vertical splitview at the root level and add the existing view as a child\n                    this.gridview.insertOrthogonalSplitviewAtRoot();\n                }\n                break;\n            case 'left':\n            case 'right':\n                if (this.gridview.orientation === Orientation.VERTICAL) {\n                    // we need to add to a horizontal splitview but the current root is a vertical splitview.\n                    // insert a horiziontal splitview at the root level and add the existing view as a child\n                    this.gridview.insertOrthogonalSplitviewAtRoot();\n                }\n                break;\n            default:\n                break;\n        }\n        switch (position) {\n            case 'top':\n            case 'left':\n            case 'center':\n                return this.createGroupAtLocation([0]); // insert into first position\n            case 'bottom':\n            case 'right':\n                return this.createGroupAtLocation([this.gridview.length]); // insert into last position\n            default:\n                throw new Error(`unsupported position ${position}`);\n        }\n    }\n    updateOptions(options) {\n        var _a, _b;\n        const changed_floatingGroupBounds = 'floatingGroupBounds' in options &&\n            options.floatingGroupBounds !== this.options.floatingGroupBounds;\n        const changed_rootOverlayOptions = 'rootOverlayModel' in options &&\n            options.rootOverlayModel !== this.options.rootOverlayModel;\n        this._options = Object.assign(Object.assign({}, this.options), options);\n        if (changed_floatingGroupBounds) {\n            for (const group of this._floatingGroups) {\n                switch (this.options.floatingGroupBounds) {\n                    case 'boundedWithinViewport':\n                        group.overlay.minimumInViewportHeight = undefined;\n                        group.overlay.minimumInViewportWidth = undefined;\n                        break;\n                    case undefined:\n                        group.overlay.minimumInViewportHeight =\n                            DEFAULT_FLOATING_GROUP_OVERFLOW_SIZE;\n                        group.overlay.minimumInViewportWidth =\n                            DEFAULT_FLOATING_GROUP_OVERFLOW_SIZE;\n                        break;\n                    default:\n                        group.overlay.minimumInViewportHeight =\n                            (_a = this.options.floatingGroupBounds) === null || _a === void 0 ? void 0 : _a.minimumHeightWithinViewport;\n                        group.overlay.minimumInViewportWidth =\n                            (_b = this.options.floatingGroupBounds) === null || _b === void 0 ? void 0 : _b.minimumWidthWithinViewport;\n                }\n                group.overlay.setBounds();\n            }\n        }\n        if (changed_rootOverlayOptions) {\n            this._rootDropTarget.setOverlayModel(options.rootOverlayModel);\n        }\n        if (\n        //  if explicitly set as `undefined`\n        'gap' in options &&\n            options.gap === undefined) {\n            this.gridview.margin = 0;\n        }\n        if (typeof options.gap === 'number') {\n            this.gridview.margin = options.gap;\n        }\n        this.layout(this.gridview.width, this.gridview.height, true);\n    }\n    layout(width, height, forceResize) {\n        super.layout(width, height, forceResize);\n        if (this._floatingGroups) {\n            for (const floating of this._floatingGroups) {\n                // ensure floting groups stay within visible boundaries\n                floating.overlay.setBounds();\n            }\n        }\n    }\n    focus() {\n        var _a;\n        (_a = this.activeGroup) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    getGroupPanel(id) {\n        return this.panels.find((panel) => panel.id === id);\n    }\n    setActivePanel(panel) {\n        panel.group.model.openPanel(panel);\n        this.doSetGroupAndPanelActive(panel.group);\n    }\n    moveToNext(options = {}) {\n        var _a;\n        if (!options.group) {\n            if (!this.activeGroup) {\n                return;\n            }\n            options.group = this.activeGroup;\n        }\n        if (options.includePanel && options.group) {\n            if (options.group.activePanel !==\n                options.group.panels[options.group.panels.length - 1]) {\n                options.group.model.moveToNext({ suppressRoll: true });\n                return;\n            }\n        }\n        const location = getGridLocation(options.group.element);\n        const next = (_a = this.gridview.next(location)) === null || _a === void 0 ? void 0 : _a.view;\n        this.doSetGroupAndPanelActive(next);\n    }\n    moveToPrevious(options = {}) {\n        var _a;\n        if (!options.group) {\n            if (!this.activeGroup) {\n                return;\n            }\n            options.group = this.activeGroup;\n        }\n        if (options.includePanel && options.group) {\n            if (options.group.activePanel !== options.group.panels[0]) {\n                options.group.model.moveToPrevious({ suppressRoll: true });\n                return;\n            }\n        }\n        const location = getGridLocation(options.group.element);\n        const next = (_a = this.gridview.previous(location)) === null || _a === void 0 ? void 0 : _a.view;\n        if (next) {\n            this.doSetGroupAndPanelActive(next);\n        }\n    }\n    /**\n     * Serialize the current state of the layout\n     *\n     * @returns A JSON respresentation of the layout\n     */\n    toJSON() {\n        var _a;\n        const data = this.gridview.serialize();\n        const panels = this.panels.reduce((collection, panel) => {\n            collection[panel.id] = panel.toJSON();\n            return collection;\n        }, {});\n        const floats = this._floatingGroups.map((group) => {\n            return {\n                data: group.group.toJSON(),\n                position: group.overlay.toJSON(),\n            };\n        });\n        const popoutGroups = this._popoutGroups.map((group) => {\n            return {\n                data: group.popoutGroup.toJSON(),\n                gridReferenceGroup: group.referenceGroup,\n                position: group.window.dimensions(),\n            };\n        });\n        const result = {\n            grid: data,\n            panels,\n            activeGroup: (_a = this.activeGroup) === null || _a === void 0 ? void 0 : _a.id,\n        };\n        if (floats.length > 0) {\n            result.floatingGroups = floats;\n        }\n        if (popoutGroups.length > 0) {\n            result.popoutGroups = popoutGroups;\n        }\n        return result;\n    }\n    fromJSON(data) {\n        var _a, _b, _c;\n        this.clear();\n        if (typeof data !== 'object' || data === null) {\n            throw new Error('serialized layout must be a non-null object');\n        }\n        const { grid, panels, activeGroup } = data;\n        if (grid.root.type !== 'branch' || !Array.isArray(grid.root.data)) {\n            throw new Error('root must be of type branch');\n        }\n        try {\n            // take note of the existing dimensions\n            const width = this.width;\n            const height = this.height;\n            const createGroupFromSerializedState = (data) => {\n                const { id, locked, hideHeader, views, activeView } = data;\n                if (typeof id !== 'string') {\n                    throw new Error('group id must be of type string');\n                }\n                const group = this.createGroup({\n                    id,\n                    locked: !!locked,\n                    hideHeader: !!hideHeader,\n                });\n                const createdPanels = [];\n                for (const child of views) {\n                    /**\n                     * Run the deserializer step seperately since this may fail to due corrupted external state.\n                     * In running this section first we avoid firing lots of 'add' events in the event of a failure\n                     * due to a corruption of input data.\n                     */\n                    const panel = this._deserializer.fromJSON(panels[child], group);\n                    createdPanels.push(panel);\n                }\n                this._onDidAddGroup.fire(group);\n                for (let i = 0; i < views.length; i++) {\n                    const panel = createdPanels[i];\n                    const isActive = typeof activeView === 'string' &&\n                        activeView === panel.id;\n                    group.model.openPanel(panel, {\n                        skipSetActive: !isActive,\n                        skipSetGroupActive: true,\n                    });\n                }\n                if (!group.activePanel && group.panels.length > 0) {\n                    group.model.openPanel(group.panels[group.panels.length - 1], {\n                        skipSetGroupActive: true,\n                    });\n                }\n                return group;\n            };\n            this.gridview.deserialize(grid, {\n                fromJSON: (node) => {\n                    return createGroupFromSerializedState(node.data);\n                },\n            });\n            this.layout(width, height, true);\n            const serializedFloatingGroups = (_a = data.floatingGroups) !== null && _a !== void 0 ? _a : [];\n            for (const serializedFloatingGroup of serializedFloatingGroups) {\n                const { data, position } = serializedFloatingGroup;\n                const group = createGroupFromSerializedState(data);\n                this.addFloatingGroup(group, {\n                    position: position,\n                    width: position.width,\n                    height: position.height,\n                    skipRemoveGroup: true,\n                    inDragMode: false,\n                });\n            }\n            const serializedPopoutGroups = (_b = data.popoutGroups) !== null && _b !== void 0 ? _b : [];\n            for (const serializedPopoutGroup of serializedPopoutGroups) {\n                const { data, position, gridReferenceGroup } = serializedPopoutGroup;\n                const group = createGroupFromSerializedState(data);\n                this.addPopoutGroup((_c = (gridReferenceGroup\n                    ? this.getPanel(gridReferenceGroup)\n                    : undefined)) !== null && _c !== void 0 ? _c : group, {\n                    skipRemoveGroup: true,\n                    position: position !== null && position !== void 0 ? position : undefined,\n                    overridePopoutGroup: gridReferenceGroup\n                        ? group\n                        : undefined,\n                });\n            }\n            for (const floatingGroup of this._floatingGroups) {\n                floatingGroup.overlay.setBounds();\n            }\n            if (typeof activeGroup === 'string') {\n                const panel = this.getPanel(activeGroup);\n                if (panel) {\n                    this.doSetGroupAndPanelActive(panel);\n                }\n            }\n        }\n        catch (err) {\n            /**\n             * Takes all the successfully created groups and remove all of their panels.\n             */\n            for (const group of this.groups) {\n                for (const panel of group.panels) {\n                    this.removePanel(panel, {\n                        removeEmptyGroup: false,\n                        skipDispose: false,\n                    });\n                }\n            }\n            /**\n             * To remove a group we cannot call this.removeGroup(...) since this makes assumptions about\n             * the underlying HTMLElement existing in the Gridview.\n             */\n            for (const group of this.groups) {\n                group.dispose();\n                this._groups.delete(group.id);\n                this._onDidRemoveGroup.fire(group);\n            }\n            // iterate over a reassigned array since original array will be modified\n            for (const floatingGroup of [...this._floatingGroups]) {\n                floatingGroup.dispose();\n            }\n            // fires clean-up events and clears the underlying HTML gridview.\n            this.clear();\n            /**\n             * even though we have cleaned-up we still want to inform the caller of their error\n             * and we'll do this through re-throwing the original error since afterall you would\n             * expect trying to load a corrupted layout to result in an error and not silently fail...\n             */\n            throw err;\n        }\n        this.updateWatermark();\n        this._onDidLayoutFromJSON.fire();\n    }\n    clear() {\n        const groups = Array.from(this._groups.values()).map((_) => _.value);\n        const hasActiveGroup = !!this.activeGroup;\n        for (const group of groups) {\n            // remove the group will automatically remove the panels\n            this.removeGroup(group, { skipActive: true });\n        }\n        if (hasActiveGroup) {\n            this.doSetGroupAndPanelActive(undefined);\n        }\n        this.gridview.clear();\n    }\n    closeAllGroups() {\n        for (const entry of this._groups.entries()) {\n            const [_, group] = entry;\n            group.value.model.closeAllPanels();\n        }\n    }\n    addPanel(options) {\n        var _a, _b;\n        if (this.panels.find((_) => _.id === options.id)) {\n            throw new Error(`panel with id ${options.id} already exists`);\n        }\n        let referenceGroup;\n        if (options.position && options.floating) {\n            throw new Error('you can only provide one of: position, floating as arguments to .addPanel(...)');\n        }\n        if (options.position) {\n            if (isPanelOptionsWithPanel(options.position)) {\n                const referencePanel = typeof options.position.referencePanel === 'string'\n                    ? this.getGroupPanel(options.position.referencePanel)\n                    : options.position.referencePanel;\n                if (!referencePanel) {\n                    throw new Error(`referencePanel '${options.position.referencePanel}' does not exist`);\n                }\n                referenceGroup = this.findGroup(referencePanel);\n            }\n            else if (isPanelOptionsWithGroup(options.position)) {\n                referenceGroup =\n                    typeof options.position.referenceGroup === 'string'\n                        ? (_a = this._groups.get(options.position.referenceGroup)) === null || _a === void 0 ? void 0 : _a.value\n                        : options.position.referenceGroup;\n                if (!referenceGroup) {\n                    throw new Error(`referenceGroup '${options.position.referenceGroup}' does not exist`);\n                }\n            }\n            else {\n                const group = this.orthogonalize(directionToPosition(options.position.direction));\n                const panel = this.createPanel(options, group);\n                group.model.openPanel(panel, {\n                    skipSetActive: options.inactive,\n                    skipSetGroupActive: options.inactive,\n                });\n                if (!options.inactive) {\n                    this.doSetGroupAndPanelActive(group);\n                }\n                return panel;\n            }\n        }\n        else {\n            referenceGroup = this.activeGroup;\n        }\n        let panel;\n        if (referenceGroup) {\n            const target = toTarget(((_b = options.position) === null || _b === void 0 ? void 0 : _b.direction) || 'within');\n            if (options.floating) {\n                const group = this.createGroup();\n                this._onDidAddGroup.fire(group);\n                const floatingGroupOptions = typeof options.floating === 'object' &&\n                    options.floating !== null\n                    ? options.floating\n                    : {};\n                this.addFloatingGroup(group, Object.assign(Object.assign({}, floatingGroupOptions), { inDragMode: false, skipRemoveGroup: true, skipActiveGroup: true }));\n                panel = this.createPanel(options, group);\n                group.model.openPanel(panel, {\n                    skipSetActive: options.inactive,\n                    skipSetGroupActive: options.inactive,\n                });\n            }\n            else if (referenceGroup.api.location.type === 'floating' ||\n                target === 'center') {\n                panel = this.createPanel(options, referenceGroup);\n                referenceGroup.model.openPanel(panel, {\n                    skipSetActive: options.inactive,\n                    skipSetGroupActive: options.inactive,\n                });\n                if (!options.inactive) {\n                    this.doSetGroupAndPanelActive(referenceGroup);\n                }\n            }\n            else {\n                const location = getGridLocation(referenceGroup.element);\n                const relativeLocation = getRelativeLocation(this.gridview.orientation, location, target);\n                const group = this.createGroupAtLocation(relativeLocation);\n                panel = this.createPanel(options, group);\n                group.model.openPanel(panel, {\n                    skipSetActive: options.inactive,\n                    skipSetGroupActive: options.inactive,\n                });\n                if (!options.inactive) {\n                    this.doSetGroupAndPanelActive(group);\n                }\n            }\n        }\n        else if (options.floating) {\n            const group = this.createGroup();\n            this._onDidAddGroup.fire(group);\n            const coordinates = typeof options.floating === 'object' &&\n                options.floating !== null\n                ? options.floating\n                : {};\n            this.addFloatingGroup(group, Object.assign(Object.assign({}, coordinates), { inDragMode: false, skipRemoveGroup: true, skipActiveGroup: true }));\n            panel = this.createPanel(options, group);\n            group.model.openPanel(panel, {\n                skipSetActive: options.inactive,\n                skipSetGroupActive: options.inactive,\n            });\n        }\n        else {\n            const group = this.createGroupAtLocation();\n            panel = this.createPanel(options, group);\n            group.model.openPanel(panel, {\n                skipSetActive: options.inactive,\n                skipSetGroupActive: options.inactive,\n            });\n            if (!options.inactive) {\n                this.doSetGroupAndPanelActive(group);\n            }\n        }\n        return panel;\n    }\n    removePanel(panel, options = {\n        removeEmptyGroup: true,\n        skipDispose: false,\n    }) {\n        const group = panel.group;\n        if (!group) {\n            throw new Error(`cannot remove panel ${panel.id}. it's missing a group.`);\n        }\n        group.model.removePanel(panel, {\n            skipSetActiveGroup: options.skipSetActiveGroup,\n        });\n        if (!options.skipDispose) {\n            panel.group.model.renderContainer.detatch(panel);\n            panel.dispose();\n        }\n        if (group.size === 0 && options.removeEmptyGroup) {\n            this.removeGroup(group, { skipActive: options.skipSetActiveGroup });\n        }\n    }\n    createWatermarkComponent() {\n        if (this.options.createWatermarkComponent) {\n            return this.options.createWatermarkComponent();\n        }\n        return new Watermark();\n    }\n    updateWatermark() {\n        var _a, _b;\n        if (this.groups.filter((x) => x.api.location.type === 'grid' && x.api.isVisible).length === 0) {\n            if (!this.watermark) {\n                this.watermark = this.createWatermarkComponent();\n                this.watermark.init({\n                    containerApi: new DockviewApi(this),\n                });\n                const watermarkContainer = document.createElement('div');\n                watermarkContainer.className = 'dv-watermark-container';\n                addTestId(watermarkContainer, 'watermark-component');\n                watermarkContainer.appendChild(this.watermark.element);\n                this.gridview.element.appendChild(watermarkContainer);\n            }\n        }\n        else if (this.watermark) {\n            this.watermark.element.parentElement.remove();\n            (_b = (_a = this.watermark).dispose) === null || _b === void 0 ? void 0 : _b.call(_a);\n            this.watermark = null;\n        }\n    }\n    addGroup(options) {\n        var _a;\n        if (options) {\n            let referenceGroup;\n            if (isGroupOptionsWithPanel(options)) {\n                const referencePanel = typeof options.referencePanel === 'string'\n                    ? this.panels.find((panel) => panel.id === options.referencePanel)\n                    : options.referencePanel;\n                if (!referencePanel) {\n                    throw new Error(`reference panel ${options.referencePanel} does not exist`);\n                }\n                referenceGroup = this.findGroup(referencePanel);\n                if (!referenceGroup) {\n                    throw new Error(`reference group for reference panel ${options.referencePanel} does not exist`);\n                }\n            }\n            else if (isGroupOptionsWithGroup(options)) {\n                referenceGroup =\n                    typeof options.referenceGroup === 'string'\n                        ? (_a = this._groups.get(options.referenceGroup)) === null || _a === void 0 ? void 0 : _a.value\n                        : options.referenceGroup;\n                if (!referenceGroup) {\n                    throw new Error(`reference group ${options.referenceGroup} does not exist`);\n                }\n            }\n            else {\n                const group = this.orthogonalize(directionToPosition(options.direction));\n                if (!options.skipSetActive) {\n                    this.doSetGroupAndPanelActive(group);\n                }\n                return group;\n            }\n            const target = toTarget(options.direction || 'within');\n            const location = getGridLocation(referenceGroup.element);\n            const relativeLocation = getRelativeLocation(this.gridview.orientation, location, target);\n            const group = this.createGroup(options);\n            this.doAddGroup(group, relativeLocation);\n            if (!options.skipSetActive) {\n                this.doSetGroupAndPanelActive(group);\n            }\n            return group;\n        }\n        else {\n            const group = this.createGroup(options);\n            this.doAddGroup(group);\n            this.doSetGroupAndPanelActive(group);\n            return group;\n        }\n    }\n    removeGroup(group, options) {\n        this.doRemoveGroup(group, options);\n    }\n    doRemoveGroup(group, options) {\n        var _a;\n        const panels = [...group.panels]; // reassign since group panels will mutate\n        if (!(options === null || options === void 0 ? void 0 : options.skipDispose)) {\n            for (const panel of panels) {\n                this.removePanel(panel, {\n                    removeEmptyGroup: false,\n                    skipDispose: (_a = options === null || options === void 0 ? void 0 : options.skipDispose) !== null && _a !== void 0 ? _a : false,\n                });\n            }\n        }\n        const activePanel = this.activePanel;\n        if (group.api.location.type === 'floating') {\n            const floatingGroup = this._floatingGroups.find((_) => _.group === group);\n            if (floatingGroup) {\n                if (!(options === null || options === void 0 ? void 0 : options.skipDispose)) {\n                    floatingGroup.group.dispose();\n                    this._groups.delete(group.id);\n                    this._onDidRemoveGroup.fire(group);\n                }\n                remove(this._floatingGroups, floatingGroup);\n                floatingGroup.dispose();\n                if (!(options === null || options === void 0 ? void 0 : options.skipActive) && this._activeGroup === group) {\n                    const groups = Array.from(this._groups.values());\n                    this.doSetGroupAndPanelActive(groups.length > 0 ? groups[0].value : undefined);\n                }\n                return floatingGroup.group;\n            }\n            throw new Error('failed to find floating group');\n        }\n        if (group.api.location.type === 'popout') {\n            const selectedGroup = this._popoutGroups.find((_) => _.popoutGroup === group);\n            if (selectedGroup) {\n                if (!(options === null || options === void 0 ? void 0 : options.skipDispose)) {\n                    if (!(options === null || options === void 0 ? void 0 : options.skipPopoutAssociated)) {\n                        const refGroup = selectedGroup.referenceGroup\n                            ? this.getPanel(selectedGroup.referenceGroup)\n                            : undefined;\n                        if (refGroup) {\n                            this.removeGroup(refGroup);\n                        }\n                    }\n                    selectedGroup.popoutGroup.dispose();\n                    this._groups.delete(group.id);\n                    this._onDidRemoveGroup.fire(group);\n                }\n                remove(this._popoutGroups, selectedGroup);\n                const removedGroup = selectedGroup.disposable.dispose();\n                if (!(options === null || options === void 0 ? void 0 : options.skipPopoutReturn) && removedGroup) {\n                    this.doAddGroup(removedGroup, [0]);\n                    this.doSetGroupAndPanelActive(removedGroup);\n                }\n                if (!(options === null || options === void 0 ? void 0 : options.skipActive) && this._activeGroup === group) {\n                    const groups = Array.from(this._groups.values());\n                    this.doSetGroupAndPanelActive(groups.length > 0 ? groups[0].value : undefined);\n                }\n                this.updateWatermark();\n                return selectedGroup.popoutGroup;\n            }\n            throw new Error('failed to find popout group');\n        }\n        const re = super.doRemoveGroup(group, options);\n        if (!(options === null || options === void 0 ? void 0 : options.skipActive)) {\n            if (this.activePanel !== activePanel) {\n                this._onDidActivePanelChange.fire(this.activePanel);\n            }\n        }\n        return re;\n    }\n    movingLock(func) {\n        const isMoving = this._moving;\n        try {\n            this._moving = true;\n            return func();\n        }\n        finally {\n            this._moving = isMoving;\n        }\n    }\n    moveGroupOrPanel(options) {\n        var _a;\n        const destinationGroup = options.to.group;\n        const sourceGroupId = options.from.groupId;\n        const sourceItemId = options.from.panelId;\n        const destinationTarget = options.to.position;\n        const destinationIndex = options.to.index;\n        const sourceGroup = sourceGroupId\n            ? (_a = this._groups.get(sourceGroupId)) === null || _a === void 0 ? void 0 : _a.value\n            : undefined;\n        if (!sourceGroup) {\n            throw new Error(`Failed to find group id ${sourceGroupId}`);\n        }\n        if (sourceItemId === undefined) {\n            /**\n             * Moving an entire group into another group\n             */\n            this.moveGroup({\n                from: { group: sourceGroup },\n                to: {\n                    group: destinationGroup,\n                    position: destinationTarget,\n                },\n            });\n            return;\n        }\n        if (!destinationTarget || destinationTarget === 'center') {\n            /**\n             * Dropping a panel within another group\n             */\n            const removedPanel = this.movingLock(() => sourceGroup.model.removePanel(sourceItemId, {\n                skipSetActive: false,\n                skipSetActiveGroup: true,\n            }));\n            if (!removedPanel) {\n                throw new Error(`No panel with id ${sourceItemId}`);\n            }\n            if (sourceGroup.model.size === 0) {\n                // remove the group and do not set a new group as active\n                this.doRemoveGroup(sourceGroup, { skipActive: true });\n            }\n            this.movingLock(() => destinationGroup.model.openPanel(removedPanel, {\n                index: destinationIndex,\n                skipSetGroupActive: true,\n            }));\n            this.doSetGroupAndPanelActive(destinationGroup);\n            this._onDidMovePanel.fire({\n                panel: removedPanel,\n                from: sourceGroup,\n            });\n        }\n        else {\n            /**\n             * Dropping a panel to the extremities of a group which will place that panel\n             * into an adjacent group\n             */\n            const referenceLocation = getGridLocation(destinationGroup.element);\n            const targetLocation = getRelativeLocation(this.gridview.orientation, referenceLocation, destinationTarget);\n            if (sourceGroup.size < 2) {\n                /**\n                 * If we are moving from a group which only has one panel left we will consider\n                 * moving the group itself rather than moving the panel into a newly created group\n                 */\n                const [targetParentLocation, to] = tail(targetLocation);\n                if (sourceGroup.api.location.type === 'grid') {\n                    const sourceLocation = getGridLocation(sourceGroup.element);\n                    const [sourceParentLocation, from] = tail(sourceLocation);\n                    if (sequenceEquals(sourceParentLocation, targetParentLocation)) {\n                        // special case when 'swapping' two views within same grid location\n                        // if a group has one tab - we are essentially moving the 'group'\n                        // which is equivalent to swapping two views in this case\n                        this.gridview.moveView(sourceParentLocation, from, to);\n                        this._onDidMovePanel.fire({\n                            panel: this.getGroupPanel(sourceItemId),\n                            from: sourceGroup,\n                        });\n                        return;\n                    }\n                }\n                if (sourceGroup.api.location.type === 'popout') {\n                    /**\n                     * the source group is a popout group with a single panel\n                     *\n                     * 1. remove the panel from the group without triggering any events\n                     * 2. remove the popout group\n                     * 3. create a new group at the requested location and add that panel\n                     */\n                    const popoutGroup = this._popoutGroups.find((group) => group.popoutGroup === sourceGroup);\n                    const removedPanel = this.movingLock(() => popoutGroup.popoutGroup.model.removePanel(popoutGroup.popoutGroup.panels[0], {\n                        skipSetActive: true,\n                        skipSetActiveGroup: true,\n                    }));\n                    this.doRemoveGroup(sourceGroup, { skipActive: true });\n                    const newGroup = this.createGroupAtLocation(targetLocation);\n                    this.movingLock(() => newGroup.model.openPanel(removedPanel, {\n                        skipSetActive: true,\n                    }));\n                    this.doSetGroupAndPanelActive(newGroup);\n                    this._onDidMovePanel.fire({\n                        panel: this.getGroupPanel(sourceItemId),\n                        from: sourceGroup,\n                    });\n                    return;\n                }\n                // source group will become empty so delete the group\n                const targetGroup = this.movingLock(() => this.doRemoveGroup(sourceGroup, {\n                    skipActive: true,\n                    skipDispose: true,\n                }));\n                // after deleting the group we need to re-evaulate the ref location\n                const updatedReferenceLocation = getGridLocation(destinationGroup.element);\n                const location = getRelativeLocation(this.gridview.orientation, updatedReferenceLocation, destinationTarget);\n                this.movingLock(() => this.doAddGroup(targetGroup, location));\n                this.doSetGroupAndPanelActive(targetGroup);\n                this._onDidMovePanel.fire({\n                    panel: this.getGroupPanel(sourceItemId),\n                    from: sourceGroup,\n                });\n            }\n            else {\n                /**\n                 * The group we are removing from has many panels, we need to remove the panels we are moving,\n                 * create a new group, add the panels to that new group and add the new group in an appropiate position\n                 */\n                const removedPanel = this.movingLock(() => sourceGroup.model.removePanel(sourceItemId, {\n                    skipSetActive: false,\n                    skipSetActiveGroup: true,\n                }));\n                if (!removedPanel) {\n                    throw new Error(`No panel with id ${sourceItemId}`);\n                }\n                const dropLocation = getRelativeLocation(this.gridview.orientation, referenceLocation, destinationTarget);\n                const group = this.createGroupAtLocation(dropLocation);\n                this.movingLock(() => group.model.openPanel(removedPanel, {\n                    skipSetGroupActive: true,\n                }));\n                this.doSetGroupAndPanelActive(group);\n                this._onDidMovePanel.fire({\n                    panel: removedPanel,\n                    from: sourceGroup,\n                });\n            }\n        }\n    }\n    moveGroup(options) {\n        const from = options.from.group;\n        const to = options.to.group;\n        const target = options.to.position;\n        if (target === 'center') {\n            const activePanel = from.activePanel;\n            const panels = this.movingLock(() => [...from.panels].map((p) => from.model.removePanel(p.id, {\n                skipSetActive: true,\n            })));\n            if ((from === null || from === void 0 ? void 0 : from.model.size) === 0) {\n                this.doRemoveGroup(from, { skipActive: true });\n            }\n            this.movingLock(() => {\n                for (const panel of panels) {\n                    to.model.openPanel(panel, {\n                        skipSetActive: panel !== activePanel,\n                        skipSetGroupActive: true,\n                    });\n                }\n            });\n            this.doSetGroupAndPanelActive(to);\n        }\n        else {\n            switch (from.api.location.type) {\n                case 'grid':\n                    this.gridview.removeView(getGridLocation(from.element));\n                    break;\n                case 'floating': {\n                    const selectedFloatingGroup = this._floatingGroups.find((x) => x.group === from);\n                    if (!selectedFloatingGroup) {\n                        throw new Error('failed to find floating group');\n                    }\n                    selectedFloatingGroup.dispose();\n                    break;\n                }\n                case 'popout': {\n                    const selectedPopoutGroup = this._popoutGroups.find((x) => x.popoutGroup === from);\n                    if (!selectedPopoutGroup) {\n                        throw new Error('failed to find popout group');\n                    }\n                    selectedPopoutGroup.disposable.dispose();\n                }\n            }\n            const referenceLocation = getGridLocation(to.element);\n            const dropLocation = getRelativeLocation(this.gridview.orientation, referenceLocation, target);\n            this.gridview.addView(from, Sizing.Distribute, dropLocation);\n        }\n        from.panels.forEach((panel) => {\n            this._onDidMovePanel.fire({ panel, from });\n        });\n    }\n    doSetGroupActive(group) {\n        super.doSetGroupActive(group);\n        const activePanel = this.activePanel;\n        if (!this._moving &&\n            activePanel !== this._onDidActivePanelChange.value) {\n            this._onDidActivePanelChange.fire(activePanel);\n        }\n    }\n    doSetGroupAndPanelActive(group) {\n        super.doSetGroupActive(group);\n        const activePanel = this.activePanel;\n        if (group &&\n            this.hasMaximizedGroup() &&\n            !this.isMaximizedGroup(group)) {\n            this.exitMaximizedGroup();\n        }\n        if (!this._moving &&\n            activePanel !== this._onDidActivePanelChange.value) {\n            this._onDidActivePanelChange.fire(activePanel);\n        }\n    }\n    getNextGroupId() {\n        let id = this.nextGroupId.next();\n        while (this._groups.has(id)) {\n            id = this.nextGroupId.next();\n        }\n        return id;\n    }\n    createGroup(options) {\n        if (!options) {\n            options = {};\n        }\n        let id = options === null || options === void 0 ? void 0 : options.id;\n        if (id && this._groups.has(options.id)) {\n            console.warn(`dockview: Duplicate group id ${options === null || options === void 0 ? void 0 : options.id}. reassigning group id to avoid errors`);\n            id = undefined;\n        }\n        if (!id) {\n            id = this.nextGroupId.next();\n            while (this._groups.has(id)) {\n                id = this.nextGroupId.next();\n            }\n        }\n        const view = new DockviewGroupPanel(this, id, options);\n        view.init({ params: {}, accessor: this });\n        if (!this._groups.has(view.id)) {\n            const disposable = new CompositeDisposable(view.model.onTabDragStart((event) => {\n                this._onWillDragPanel.fire(event);\n            }), view.model.onGroupDragStart((event) => {\n                this._onWillDragGroup.fire(event);\n            }), view.model.onMove((event) => {\n                const { groupId, itemId, target, index } = event;\n                this.moveGroupOrPanel({\n                    from: { groupId: groupId, panelId: itemId },\n                    to: {\n                        group: view,\n                        position: target,\n                        index,\n                    },\n                });\n            }), view.model.onDidDrop((event) => {\n                this._onDidDrop.fire(event);\n            }), view.model.onWillDrop((event) => {\n                this._onWillDrop.fire(event);\n            }), view.model.onWillShowOverlay((event) => {\n                if (this.options.disableDnd) {\n                    event.preventDefault();\n                    return;\n                }\n                this._onWillShowOverlay.fire(event);\n            }), view.model.onUnhandledDragOverEvent((event) => {\n                this._onUnhandledDragOverEvent.fire(event);\n            }), view.model.onDidAddPanel((event) => {\n                if (this._moving) {\n                    return;\n                }\n                this._onDidAddPanel.fire(event.panel);\n            }), view.model.onDidRemovePanel((event) => {\n                if (this._moving) {\n                    return;\n                }\n                this._onDidRemovePanel.fire(event.panel);\n            }), view.model.onDidActivePanelChange((event) => {\n                if (this._moving) {\n                    return;\n                }\n                if (event.panel !== this.activePanel) {\n                    return;\n                }\n                if (this._onDidActivePanelChange.value !== event.panel) {\n                    this._onDidActivePanelChange.fire(event.panel);\n                }\n            }), Event.any(view.model.onDidPanelTitleChange, view.model.onDidPanelParametersChange)(() => {\n                this._bufferOnDidLayoutChange.fire();\n            }));\n            this._groups.set(view.id, { value: view, disposable });\n        }\n        // TODO: must be called after the above listeners have been setup, not an ideal pattern\n        view.initialize();\n        return view;\n    }\n    createPanel(options, group) {\n        var _a, _b, _c;\n        const contentComponent = options.component;\n        const tabComponent = (_a = options.tabComponent) !== null && _a !== void 0 ? _a : this.options.defaultTabComponent;\n        const view = new DockviewPanelModel(this, options.id, contentComponent, tabComponent);\n        const panel = new DockviewPanel(options.id, contentComponent, tabComponent, this, this._api, group, view, { renderer: options.renderer });\n        panel.init({\n            title: (_b = options.title) !== null && _b !== void 0 ? _b : options.id,\n            params: (_c = options === null || options === void 0 ? void 0 : options.params) !== null && _c !== void 0 ? _c : {},\n        });\n        return panel;\n    }\n    createGroupAtLocation(location = [0]) {\n        const group = this.createGroup();\n        this.doAddGroup(group, location);\n        return group;\n    }\n    findGroup(panel) {\n        var _a;\n        return (_a = Array.from(this._groups.values()).find((group) => group.value.model.containsPanel(panel))) === null || _a === void 0 ? void 0 : _a.value;\n    }\n}\n","export function createComponent(id, componentName, components = {}, frameworkComponents = {}, createFrameworkComponent, fallback) {\n    const Component = typeof componentName === 'string'\n        ? components[componentName]\n        : undefined;\n    const FrameworkComponent = typeof componentName === 'string'\n        ? frameworkComponents[componentName]\n        : undefined;\n    if (Component && FrameworkComponent) {\n        throw new Error(`Cannot create '${id}'. component '${componentName}' registered as both a component and frameworkComponent`);\n    }\n    if (FrameworkComponent) {\n        if (!createFrameworkComponent) {\n            throw new Error(`Cannot create '${id}' for framework component '${componentName}'. you must register a frameworkPanelWrapper to use framework components`);\n        }\n        return createFrameworkComponent.createComponent(id, componentName, FrameworkComponent);\n    }\n    if (!Component) {\n        if (fallback) {\n            return fallback();\n        }\n        throw new Error(`Cannot create '${id}', no component '${componentName}' provided`);\n    }\n    return new Component(id, componentName);\n}\n","import { getRelativeLocation, getGridLocation, } from './gridview';\nimport { tail, sequenceEquals } from '../array';\nimport { CompositeDisposable } from '../lifecycle';\nimport { BaseGrid, toTarget, } from './baseComponentGridview';\nimport { createComponent } from '../panel/componentFactory';\nimport { Emitter } from '../events';\nexport class GridviewComponent extends BaseGrid {\n    get orientation() {\n        return this.gridview.orientation;\n    }\n    set orientation(value) {\n        this.gridview.orientation = value;\n    }\n    get options() {\n        return this._options;\n    }\n    get deserializer() {\n        return this._deserializer;\n    }\n    set deserializer(value) {\n        this._deserializer = value;\n    }\n    constructor(parentElement, options) {\n        super({\n            parentElement: parentElement,\n            proportionalLayout: options.proportionalLayout,\n            orientation: options.orientation,\n            styles: options.styles,\n            disableAutoResizing: options.disableAutoResizing,\n            className: options.className,\n        });\n        this._onDidLayoutfromJSON = new Emitter();\n        this.onDidLayoutFromJSON = this._onDidLayoutfromJSON.event;\n        this._onDidRemoveGroup = new Emitter();\n        this.onDidRemoveGroup = this._onDidRemoveGroup.event;\n        this._onDidAddGroup = new Emitter();\n        this.onDidAddGroup = this._onDidAddGroup.event;\n        this._onDidActiveGroupChange = new Emitter();\n        this.onDidActiveGroupChange = this._onDidActiveGroupChange.event;\n        this._options = options;\n        this.addDisposables(this._onDidAddGroup, this._onDidRemoveGroup, this._onDidActiveGroupChange, this.onDidAdd((event) => {\n            this._onDidAddGroup.fire(event);\n        }), this.onDidRemove((event) => {\n            this._onDidRemoveGroup.fire(event);\n        }), this.onDidActiveChange((event) => {\n            this._onDidActiveGroupChange.fire(event);\n        }));\n        if (!this.options.components) {\n            this.options.components = {};\n        }\n        if (!this.options.frameworkComponents) {\n            this.options.frameworkComponents = {};\n        }\n    }\n    updateOptions(options) {\n        const hasOrientationChanged = typeof options.orientation === 'string' &&\n            this.gridview.orientation !== options.orientation;\n        this._options = Object.assign(Object.assign({}, this.options), options);\n        if (hasOrientationChanged) {\n            this.gridview.orientation = options.orientation;\n        }\n        this.layout(this.gridview.width, this.gridview.height, true);\n    }\n    removePanel(panel) {\n        this.removeGroup(panel);\n    }\n    /**\n     * Serialize the current state of the layout\n     *\n     * @returns A JSON respresentation of the layout\n     */\n    toJSON() {\n        var _a;\n        const data = this.gridview.serialize();\n        return {\n            grid: data,\n            activePanel: (_a = this.activeGroup) === null || _a === void 0 ? void 0 : _a.id,\n        };\n    }\n    setVisible(panel, visible) {\n        this.gridview.setViewVisible(getGridLocation(panel.element), visible);\n    }\n    setActive(panel) {\n        this._groups.forEach((value, _key) => {\n            value.value.setActive(panel === value.value);\n        });\n    }\n    focus() {\n        var _a;\n        (_a = this.activeGroup) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    fromJSON(serializedGridview) {\n        this.clear();\n        const { grid, activePanel } = serializedGridview;\n        try {\n            const queue = [];\n            // take note of the existing dimensions\n            const width = this.width;\n            const height = this.height;\n            this.gridview.deserialize(grid, {\n                fromJSON: (node) => {\n                    var _a, _b;\n                    const { data } = node;\n                    const view = createComponent(data.id, data.component, (_a = this.options.components) !== null && _a !== void 0 ? _a : {}, (_b = this.options.frameworkComponents) !== null && _b !== void 0 ? _b : {}, this.options.frameworkComponentFactory\n                        ? {\n                            createComponent: this.options.frameworkComponentFactory\n                                .createComponent,\n                        }\n                        : undefined);\n                    queue.push(() => view.init({\n                        params: data.params,\n                        minimumWidth: data.minimumWidth,\n                        maximumWidth: data.maximumWidth,\n                        minimumHeight: data.minimumHeight,\n                        maximumHeight: data.maximumHeight,\n                        priority: data.priority,\n                        snap: !!data.snap,\n                        accessor: this,\n                        isVisible: node.visible,\n                    }));\n                    this._onDidAddGroup.fire(view);\n                    this.registerPanel(view);\n                    return view;\n                },\n            });\n            this.layout(width, height, true);\n            queue.forEach((f) => f());\n            if (typeof activePanel === 'string') {\n                const panel = this.getPanel(activePanel);\n                if (panel) {\n                    this.doSetGroupActive(panel);\n                }\n            }\n        }\n        catch (err) {\n            /**\n             * To remove a group we cannot call this.removeGroup(...) since this makes assumptions about\n             * the underlying HTMLElement existing in the Gridview.\n             */\n            for (const group of this.groups) {\n                group.dispose();\n                this._groups.delete(group.id);\n                this._onDidRemoveGroup.fire(group);\n            }\n            // fires clean-up events and clears the underlying HTML gridview.\n            this.clear();\n            /**\n             * even though we have cleaned-up we still want to inform the caller of their error\n             * and we'll do this through re-throwing the original error since afterall you would\n             * expect trying to load a corrupted layout to result in an error and not silently fail...\n             */\n            throw err;\n        }\n        this._onDidLayoutfromJSON.fire();\n    }\n    clear() {\n        const hasActiveGroup = this.activeGroup;\n        const groups = Array.from(this._groups.values()); // reassign since group panels will mutate\n        for (const group of groups) {\n            group.disposable.dispose();\n            this.doRemoveGroup(group.value, { skipActive: true });\n        }\n        if (hasActiveGroup) {\n            this.doSetGroupActive(undefined);\n        }\n        this.gridview.clear();\n    }\n    movePanel(panel, options) {\n        var _a;\n        let relativeLocation;\n        const removedPanel = this.gridview.remove(panel);\n        const referenceGroup = (_a = this._groups.get(options.reference)) === null || _a === void 0 ? void 0 : _a.value;\n        if (!referenceGroup) {\n            throw new Error(`reference group ${options.reference} does not exist`);\n        }\n        const target = toTarget(options.direction);\n        if (target === 'center') {\n            throw new Error(`${target} not supported as an option`);\n        }\n        else {\n            const location = getGridLocation(referenceGroup.element);\n            relativeLocation = getRelativeLocation(this.gridview.orientation, location, target);\n        }\n        this.doAddGroup(removedPanel, relativeLocation, options.size);\n    }\n    addPanel(options) {\n        var _a, _b, _c, _d, _e, _f;\n        let relativeLocation = (_a = options.location) !== null && _a !== void 0 ? _a : [0];\n        if ((_b = options.position) === null || _b === void 0 ? void 0 : _b.referencePanel) {\n            const referenceGroup = (_c = this._groups.get(options.position.referencePanel)) === null || _c === void 0 ? void 0 : _c.value;\n            if (!referenceGroup) {\n                throw new Error(`reference group ${options.position.referencePanel} does not exist`);\n            }\n            const target = toTarget(options.position.direction);\n            if (target === 'center') {\n                throw new Error(`${target} not supported as an option`);\n            }\n            else {\n                const location = getGridLocation(referenceGroup.element);\n                relativeLocation = getRelativeLocation(this.gridview.orientation, location, target);\n            }\n        }\n        const view = createComponent(options.id, options.component, (_d = this.options.components) !== null && _d !== void 0 ? _d : {}, (_e = this.options.frameworkComponents) !== null && _e !== void 0 ? _e : {}, this.options.frameworkComponentFactory\n            ? {\n                createComponent: this.options.frameworkComponentFactory\n                    .createComponent,\n            }\n            : undefined);\n        view.init({\n            params: (_f = options.params) !== null && _f !== void 0 ? _f : {},\n            minimumWidth: options.minimumWidth,\n            maximumWidth: options.maximumWidth,\n            minimumHeight: options.minimumHeight,\n            maximumHeight: options.maximumHeight,\n            priority: options.priority,\n            snap: !!options.snap,\n            accessor: this,\n            isVisible: true,\n        });\n        this.registerPanel(view);\n        this.doAddGroup(view, relativeLocation, options.size);\n        this.doSetGroupActive(view);\n        return view;\n    }\n    registerPanel(panel) {\n        const disposable = new CompositeDisposable(panel.api.onDidFocusChange((event) => {\n            if (!event.isFocused) {\n                return;\n            }\n            this._groups.forEach((groupItem) => {\n                const group = groupItem.value;\n                if (group !== panel) {\n                    group.setActive(false);\n                }\n                else {\n                    group.setActive(true);\n                }\n            });\n        }));\n        this._groups.set(panel.id, {\n            value: panel,\n            disposable,\n        });\n    }\n    moveGroup(referenceGroup, groupId, target) {\n        const sourceGroup = this.getPanel(groupId);\n        if (!sourceGroup) {\n            throw new Error('invalid operation');\n        }\n        const referenceLocation = getGridLocation(referenceGroup.element);\n        const targetLocation = getRelativeLocation(this.gridview.orientation, referenceLocation, target);\n        const [targetParentLocation, to] = tail(targetLocation);\n        const sourceLocation = getGridLocation(sourceGroup.element);\n        const [sourceParentLocation, from] = tail(sourceLocation);\n        if (sequenceEquals(sourceParentLocation, targetParentLocation)) {\n            // special case when 'swapping' two views within same grid location\n            // if a group has one tab - we are essentially moving the 'group'\n            // which is equivalent to swapping two views in this case\n            this.gridview.moveView(sourceParentLocation, from, to);\n            return;\n        }\n        // source group will become empty so delete the group\n        const targetGroup = this.doRemoveGroup(sourceGroup, {\n            skipActive: true,\n            skipDispose: true,\n        });\n        // after deleting the group we need to re-evaulate the ref location\n        const updatedReferenceLocation = getGridLocation(referenceGroup.element);\n        const location = getRelativeLocation(this.gridview.orientation, updatedReferenceLocation, target);\n        this.doAddGroup(targetGroup, location);\n    }\n    removeGroup(group) {\n        super.removeGroup(group);\n    }\n    dispose() {\n        super.dispose();\n        this._onDidLayoutfromJSON.dispose();\n    }\n}\n","import { CompositeDisposable, MutableDisposable, } from '../lifecycle';\nimport { Orientation, Sizing, Splitview, } from './splitview';\nimport { Emitter } from '../events';\nimport { createComponent } from '../panel/componentFactory';\nimport { Resizable } from '../resizable';\n/**\n * A high-level implementation of splitview that works using 'panels'\n */\nexport class SplitviewComponent extends Resizable {\n    get panels() {\n        return this.splitview.getViews();\n    }\n    get options() {\n        return this._options;\n    }\n    get length() {\n        return this._panels.size;\n    }\n    get orientation() {\n        return this.splitview.orientation;\n    }\n    get splitview() {\n        return this._splitview;\n    }\n    set splitview(value) {\n        this._splitview = value;\n        this._splitviewChangeDisposable.value = new CompositeDisposable(this._splitview.onDidSashEnd(() => {\n            this._onDidLayoutChange.fire(undefined);\n        }), this._splitview.onDidAddView((e) => this._onDidAddView.fire(e)), this._splitview.onDidRemoveView((e) => this._onDidRemoveView.fire(e)));\n    }\n    get minimumSize() {\n        return this.splitview.minimumSize;\n    }\n    get maximumSize() {\n        return this.splitview.maximumSize;\n    }\n    get height() {\n        return this.splitview.orientation === Orientation.HORIZONTAL\n            ? this.splitview.orthogonalSize\n            : this.splitview.size;\n    }\n    get width() {\n        return this.splitview.orientation === Orientation.HORIZONTAL\n            ? this.splitview.size\n            : this.splitview.orthogonalSize;\n    }\n    constructor(parentElement, options) {\n        super(parentElement, options.disableAutoResizing);\n        this._splitviewChangeDisposable = new MutableDisposable();\n        this._panels = new Map();\n        this._onDidLayoutfromJSON = new Emitter();\n        this.onDidLayoutFromJSON = this._onDidLayoutfromJSON.event;\n        this._onDidAddView = new Emitter();\n        this.onDidAddView = this._onDidAddView.event;\n        this._onDidRemoveView = new Emitter();\n        this.onDidRemoveView = this._onDidRemoveView.event;\n        this._onDidLayoutChange = new Emitter();\n        this.onDidLayoutChange = this._onDidLayoutChange.event;\n        if (typeof options.className === 'string') {\n            this.element.classList.add(options.className);\n        }\n        this._options = options;\n        if (!options.components) {\n            options.components = {};\n        }\n        if (!options.frameworkComponents) {\n            options.frameworkComponents = {};\n        }\n        this.splitview = new Splitview(this.element, options);\n        this.addDisposables(this._onDidAddView, this._onDidLayoutfromJSON, this._onDidRemoveView, this._onDidLayoutChange);\n    }\n    updateOptions(options) {\n        const hasOrientationChanged = typeof options.orientation === 'string' &&\n            this.options.orientation !== options.orientation;\n        this._options = Object.assign(Object.assign({}, this.options), options);\n        if (hasOrientationChanged) {\n            this.splitview.orientation = options.orientation;\n        }\n        this.splitview.layout(this.splitview.size, this.splitview.orthogonalSize);\n    }\n    focus() {\n        var _a;\n        (_a = this._activePanel) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    movePanel(from, to) {\n        this.splitview.moveView(from, to);\n    }\n    setVisible(panel, visible) {\n        const index = this.panels.indexOf(panel);\n        this.splitview.setViewVisible(index, visible);\n    }\n    setActive(panel, skipFocus) {\n        this._activePanel = panel;\n        this.panels\n            .filter((v) => v !== panel)\n            .forEach((v) => {\n            v.api._onDidActiveChange.fire({ isActive: false });\n            if (!skipFocus) {\n                v.focus();\n            }\n        });\n        panel.api._onDidActiveChange.fire({ isActive: true });\n        if (!skipFocus) {\n            panel.focus();\n        }\n    }\n    removePanel(panel, sizing) {\n        const item = this._panels.get(panel.id);\n        if (!item) {\n            throw new Error(`unknown splitview panel ${panel.id}`);\n        }\n        item.dispose();\n        this._panels.delete(panel.id);\n        const index = this.panels.findIndex((_) => _ === panel);\n        const removedView = this.splitview.removeView(index, sizing);\n        removedView.dispose();\n        const panels = this.panels;\n        if (panels.length > 0) {\n            this.setActive(panels[panels.length - 1]);\n        }\n    }\n    getPanel(id) {\n        return this.panels.find((view) => view.id === id);\n    }\n    addPanel(options) {\n        var _a, _b, _c;\n        if (this._panels.has(options.id)) {\n            throw new Error(`panel ${options.id} already exists`);\n        }\n        const view = createComponent(options.id, options.component, (_a = this.options.components) !== null && _a !== void 0 ? _a : {}, (_b = this.options.frameworkComponents) !== null && _b !== void 0 ? _b : {}, this.options.frameworkWrapper\n            ? {\n                createComponent: this.options.frameworkWrapper.createComponent,\n            }\n            : undefined);\n        view.orientation = this.splitview.orientation;\n        view.init({\n            params: (_c = options.params) !== null && _c !== void 0 ? _c : {},\n            minimumSize: options.minimumSize,\n            maximumSize: options.maximumSize,\n            snap: options.snap,\n            priority: options.priority,\n            accessor: this,\n        });\n        const size = typeof options.size === 'number' ? options.size : Sizing.Distribute;\n        const index = typeof options.index === 'number' ? options.index : undefined;\n        this.splitview.addView(view, size, index);\n        this.doAddView(view);\n        this.setActive(view);\n        return view;\n    }\n    layout(width, height) {\n        const [size, orthogonalSize] = this.splitview.orientation === Orientation.HORIZONTAL\n            ? [width, height]\n            : [height, width];\n        this.splitview.layout(size, orthogonalSize);\n    }\n    doAddView(view) {\n        const disposable = view.api.onDidFocusChange((event) => {\n            if (!event.isFocused) {\n                return;\n            }\n            this.setActive(view, true);\n        });\n        this._panels.set(view.id, disposable);\n    }\n    toJSON() {\n        var _a;\n        const views = this.splitview\n            .getViews()\n            .map((view, i) => {\n            const size = this.splitview.getViewSize(i);\n            return {\n                size,\n                data: view.toJSON(),\n                snap: !!view.snap,\n                priority: view.priority,\n            };\n        });\n        return {\n            views,\n            activeView: (_a = this._activePanel) === null || _a === void 0 ? void 0 : _a.id,\n            size: this.splitview.size,\n            orientation: this.splitview.orientation,\n        };\n    }\n    fromJSON(serializedSplitview) {\n        this.clear();\n        const { views, orientation, size, activeView } = serializedSplitview;\n        const queue = [];\n        // take note of the existing dimensions\n        const width = this.width;\n        const height = this.height;\n        this.splitview = new Splitview(this.element, {\n            orientation,\n            proportionalLayout: this.options.proportionalLayout,\n            descriptor: {\n                size,\n                views: views.map((view) => {\n                    var _a, _b;\n                    const data = view.data;\n                    if (this._panels.has(data.id)) {\n                        throw new Error(`panel ${data.id} already exists`);\n                    }\n                    const panel = createComponent(data.id, data.component, (_a = this.options.components) !== null && _a !== void 0 ? _a : {}, (_b = this.options.frameworkComponents) !== null && _b !== void 0 ? _b : {}, this.options.frameworkWrapper\n                        ? {\n                            createComponent: this.options.frameworkWrapper\n                                .createComponent,\n                        }\n                        : undefined);\n                    queue.push(() => {\n                        var _a;\n                        panel.init({\n                            params: (_a = data.params) !== null && _a !== void 0 ? _a : {},\n                            minimumSize: data.minimumSize,\n                            maximumSize: data.maximumSize,\n                            snap: view.snap,\n                            priority: view.priority,\n                            accessor: this,\n                        });\n                    });\n                    panel.orientation = orientation;\n                    this.doAddView(panel);\n                    setTimeout(() => {\n                        // the original onDidAddView events are missed since they are fired before we can subcribe to them\n                        this._onDidAddView.fire(panel);\n                    }, 0);\n                    return { size: view.size, view: panel };\n                }),\n            },\n        });\n        this.layout(width, height);\n        queue.forEach((f) => f());\n        if (typeof activeView === 'string') {\n            const panel = this.getPanel(activeView);\n            if (panel) {\n                this.setActive(panel);\n            }\n        }\n        this._onDidLayoutfromJSON.fire();\n    }\n    clear() {\n        for (const disposable of this._panels.values()) {\n            disposable.dispose();\n        }\n        this._panels.clear();\n        while (this.splitview.length > 0) {\n            const view = this.splitview.removeView(0, Sizing.Distribute, true);\n            view.dispose();\n        }\n    }\n    dispose() {\n        for (const disposable of this._panels.values()) {\n            disposable.dispose();\n        }\n        this._panels.clear();\n        const views = this.splitview.getViews();\n        this._splitviewChangeDisposable.dispose();\n        this.splitview.dispose();\n        for (const view of views) {\n            view.dispose();\n        }\n        super.dispose();\n    }\n}\n","import { addDisposableListener } from '../events';\nimport { CompositeDisposable, MutableDisposable } from '../lifecycle';\nimport { toggleClass } from '../dom';\nimport { createChevronRightButton, createExpandMoreButton } from '../svg';\nexport class DefaultHeader extends CompositeDisposable {\n    get element() {\n        return this._element;\n    }\n    constructor() {\n        super();\n        this._expandedIcon = createExpandMoreButton();\n        this._collapsedIcon = createChevronRightButton();\n        this.disposable = new MutableDisposable();\n        this.apiRef = { api: null };\n        this._element = document.createElement('div');\n        this.element.className = 'default-header';\n        this._content = document.createElement('span');\n        this._expander = document.createElement('div');\n        this._expander.className = 'dockview-pane-header-icon';\n        this.element.appendChild(this._expander);\n        this.element.appendChild(this._content);\n        this.addDisposables(addDisposableListener(this._element, 'click', () => {\n            var _a;\n            (_a = this.apiRef.api) === null || _a === void 0 ? void 0 : _a.setExpanded(!this.apiRef.api.isExpanded);\n        }));\n    }\n    init(params) {\n        this.apiRef.api = params.api;\n        this._content.textContent = params.title;\n        this.updateIcon();\n        this.disposable.value = params.api.onDidExpansionChange(() => {\n            this.updateIcon();\n        });\n    }\n    updateIcon() {\n        var _a;\n        const isExpanded = !!((_a = this.apiRef.api) === null || _a === void 0 ? void 0 : _a.isExpanded);\n        toggleClass(this._expander, 'collapsed', !isExpanded);\n        if (isExpanded) {\n            if (this._expander.contains(this._collapsedIcon)) {\n                this._collapsedIcon.remove();\n            }\n            if (!this._expander.contains(this._expandedIcon)) {\n                this._expander.appendChild(this._expandedIcon);\n            }\n        }\n        else {\n            if (this._expander.contains(this._expandedIcon)) {\n                this._expandedIcon.remove();\n            }\n            if (!this._expander.contains(this._collapsedIcon)) {\n                this._expander.appendChild(this._collapsedIcon);\n            }\n        }\n    }\n    update(_params) {\n        //\n    }\n    dispose() {\n        this.disposable.dispose();\n        super.dispose();\n    }\n}\n","import { PaneviewApi } from '../api/component.api';\nimport { createComponent } from '../panel/componentFactory';\nimport { Emitter } from '../events';\nimport { CompositeDisposable, MutableDisposable, } from '../lifecycle';\nimport { Orientation, Sizing } from '../splitview/splitview';\nimport { Paneview } from './paneview';\nimport { DraggablePaneviewPanel, } from './draggablePaneviewPanel';\nimport { DefaultHeader } from './defaultPaneviewHeader';\nimport { sequentialNumberGenerator } from '../math';\nimport { Resizable } from '../resizable';\nconst nextLayoutId = sequentialNumberGenerator();\nexport class PaneFramework extends DraggablePaneviewPanel {\n    constructor(options) {\n        super(options.accessor, options.id, options.component, options.headerComponent, options.orientation, options.isExpanded, options.disableDnd);\n        this.options = options;\n    }\n    getBodyComponent() {\n        return this.options.body;\n    }\n    getHeaderComponent() {\n        return this.options.header;\n    }\n}\nexport class PaneviewComponent extends Resizable {\n    get id() {\n        return this._id;\n    }\n    get panels() {\n        return this.paneview.getPanes();\n    }\n    set paneview(value) {\n        this._paneview = value;\n        this._disposable.value = new CompositeDisposable(this._paneview.onDidChange(() => {\n            this._onDidLayoutChange.fire(undefined);\n        }), this._paneview.onDidAddView((e) => this._onDidAddView.fire(e)), this._paneview.onDidRemoveView((e) => this._onDidRemoveView.fire(e)));\n    }\n    get paneview() {\n        return this._paneview;\n    }\n    get minimumSize() {\n        return this.paneview.minimumSize;\n    }\n    get maximumSize() {\n        return this.paneview.maximumSize;\n    }\n    get height() {\n        return this.paneview.orientation === Orientation.HORIZONTAL\n            ? this.paneview.orthogonalSize\n            : this.paneview.size;\n    }\n    get width() {\n        return this.paneview.orientation === Orientation.HORIZONTAL\n            ? this.paneview.size\n            : this.paneview.orthogonalSize;\n    }\n    get options() {\n        return this._options;\n    }\n    constructor(parentElement, options) {\n        super(parentElement, options.disableAutoResizing);\n        this._id = nextLayoutId.next();\n        this._disposable = new MutableDisposable();\n        this._viewDisposables = new Map();\n        this._onDidLayoutfromJSON = new Emitter();\n        this.onDidLayoutFromJSON = this._onDidLayoutfromJSON.event;\n        this._onDidLayoutChange = new Emitter();\n        this.onDidLayoutChange = this._onDidLayoutChange.event;\n        this._onDidDrop = new Emitter();\n        this.onDidDrop = this._onDidDrop.event;\n        this._onDidAddView = new Emitter();\n        this.onDidAddView = this._onDidAddView.event;\n        this._onDidRemoveView = new Emitter();\n        this.onDidRemoveView = this._onDidRemoveView.event;\n        if (typeof options.className === 'string') {\n            this.element.classList.add(options.className);\n        }\n        this.addDisposables(this._onDidLayoutChange, this._onDidLayoutfromJSON, this._onDidDrop, this._onDidAddView, this._onDidRemoveView);\n        this._options = options;\n        if (!options.components) {\n            options.components = {};\n        }\n        if (!options.frameworkComponents) {\n            options.frameworkComponents = {};\n        }\n        this.paneview = new Paneview(this.element, {\n            // only allow paneview in the vertical orientation for now\n            orientation: Orientation.VERTICAL,\n        });\n        this.addDisposables(this._disposable);\n    }\n    setVisible(panel, visible) {\n        const index = this.panels.indexOf(panel);\n        this.paneview.setViewVisible(index, visible);\n    }\n    focus() {\n        //noop\n    }\n    updateOptions(options) {\n        this._options = Object.assign(Object.assign({}, this.options), options);\n    }\n    addPanel(options) {\n        var _a, _b, _c, _d;\n        const body = createComponent(options.id, options.component, (_a = this.options.components) !== null && _a !== void 0 ? _a : {}, (_b = this.options.frameworkComponents) !== null && _b !== void 0 ? _b : {}, this.options.frameworkWrapper\n            ? {\n                createComponent: this.options.frameworkWrapper.body.createComponent,\n            }\n            : undefined);\n        let header;\n        if (options.headerComponent) {\n            header = createComponent(options.id, options.headerComponent, (_c = this.options.headerComponents) !== null && _c !== void 0 ? _c : {}, this.options.headerframeworkComponents, this.options.frameworkWrapper\n                ? {\n                    createComponent: this.options.frameworkWrapper.header\n                        .createComponent,\n                }\n                : undefined);\n        }\n        else {\n            header = new DefaultHeader();\n        }\n        const view = new PaneFramework({\n            id: options.id,\n            component: options.component,\n            headerComponent: options.headerComponent,\n            header,\n            body,\n            orientation: Orientation.VERTICAL,\n            isExpanded: !!options.isExpanded,\n            disableDnd: !!this.options.disableDnd,\n            accessor: this,\n        });\n        this.doAddPanel(view);\n        const size = typeof options.size === 'number' ? options.size : Sizing.Distribute;\n        const index = typeof options.index === 'number' ? options.index : undefined;\n        view.init({\n            params: (_d = options.params) !== null && _d !== void 0 ? _d : {},\n            minimumBodySize: options.minimumBodySize,\n            maximumBodySize: options.maximumBodySize,\n            isExpanded: options.isExpanded,\n            title: options.title,\n            containerApi: new PaneviewApi(this),\n            accessor: this,\n        });\n        this.paneview.addPane(view, size, index);\n        view.orientation = this.paneview.orientation;\n        return view;\n    }\n    removePanel(panel) {\n        const views = this.panels;\n        const index = views.findIndex((_) => _ === panel);\n        this.paneview.removePane(index);\n        this.doRemovePanel(panel);\n    }\n    movePanel(from, to) {\n        this.paneview.moveView(from, to);\n    }\n    getPanel(id) {\n        return this.panels.find((view) => view.id === id);\n    }\n    layout(width, height) {\n        const [size, orthogonalSize] = this.paneview.orientation === Orientation.HORIZONTAL\n            ? [width, height]\n            : [height, width];\n        this.paneview.layout(size, orthogonalSize);\n    }\n    toJSON() {\n        const maximum = (value) => value === Number.MAX_SAFE_INTEGER ||\n            value === Number.POSITIVE_INFINITY\n            ? undefined\n            : value;\n        const minimum = (value) => (value <= 0 ? undefined : value);\n        const views = this.paneview\n            .getPanes()\n            .map((view, i) => {\n            const size = this.paneview.getViewSize(i);\n            return {\n                size,\n                data: view.toJSON(),\n                minimumSize: minimum(view.minimumBodySize),\n                maximumSize: maximum(view.maximumBodySize),\n                expanded: view.isExpanded(),\n            };\n        });\n        return {\n            views,\n            size: this.paneview.size,\n        };\n    }\n    fromJSON(serializedPaneview) {\n        this.clear();\n        const { views, size } = serializedPaneview;\n        const queue = [];\n        // take note of the existing dimensions\n        const width = this.width;\n        const height = this.height;\n        this.paneview = new Paneview(this.element, {\n            orientation: Orientation.VERTICAL,\n            descriptor: {\n                size,\n                views: views.map((view) => {\n                    var _a, _b, _c, _d;\n                    const data = view.data;\n                    const body = createComponent(data.id, data.component, (_a = this.options.components) !== null && _a !== void 0 ? _a : {}, (_b = this.options.frameworkComponents) !== null && _b !== void 0 ? _b : {}, this.options.frameworkWrapper\n                        ? {\n                            createComponent: this.options.frameworkWrapper.body\n                                .createComponent,\n                        }\n                        : undefined);\n                    let header;\n                    if (data.headerComponent) {\n                        header = createComponent(data.id, data.headerComponent, (_c = this.options.headerComponents) !== null && _c !== void 0 ? _c : {}, (_d = this.options.headerframeworkComponents) !== null && _d !== void 0 ? _d : {}, this.options.frameworkWrapper\n                            ? {\n                                createComponent: this.options.frameworkWrapper.header\n                                    .createComponent,\n                            }\n                            : undefined);\n                    }\n                    else {\n                        header = new DefaultHeader();\n                    }\n                    const panel = new PaneFramework({\n                        id: data.id,\n                        component: data.component,\n                        headerComponent: data.headerComponent,\n                        header,\n                        body,\n                        orientation: Orientation.VERTICAL,\n                        isExpanded: !!view.expanded,\n                        disableDnd: !!this.options.disableDnd,\n                        accessor: this,\n                    });\n                    this.doAddPanel(panel);\n                    queue.push(() => {\n                        var _a;\n                        panel.init({\n                            params: (_a = data.params) !== null && _a !== void 0 ? _a : {},\n                            minimumBodySize: view.minimumSize,\n                            maximumBodySize: view.maximumSize,\n                            title: data.title,\n                            isExpanded: !!view.expanded,\n                            containerApi: new PaneviewApi(this),\n                            accessor: this,\n                        });\n                        panel.orientation = this.paneview.orientation;\n                    });\n                    setTimeout(() => {\n                        // the original onDidAddView events are missed since they are fired before we can subcribe to them\n                        this._onDidAddView.fire(panel);\n                    }, 0);\n                    return { size: view.size, view: panel };\n                }),\n            },\n        });\n        this.layout(width, height);\n        queue.forEach((f) => f());\n        this._onDidLayoutfromJSON.fire();\n    }\n    clear() {\n        for (const [_, value] of this._viewDisposables.entries()) {\n            value.dispose();\n        }\n        this._viewDisposables.clear();\n        this.paneview.dispose();\n    }\n    doAddPanel(panel) {\n        const disposable = panel.onDidDrop((event) => {\n            this._onDidDrop.fire(event);\n        });\n        this._viewDisposables.set(panel.id, disposable);\n    }\n    doRemovePanel(panel) {\n        const disposable = this._viewDisposables.get(panel.id);\n        if (disposable) {\n            disposable.dispose();\n            this._viewDisposables.delete(panel.id);\n        }\n    }\n    dispose() {\n        super.dispose();\n        for (const [_, value] of this._viewDisposables.entries()) {\n            value.dispose();\n        }\n        this._viewDisposables.clear();\n        this.paneview.dispose();\n    }\n}\n","import { BasePanelView, } from '../gridview/basePanelView';\nimport { SplitviewPanelApiImpl } from '../api/splitviewPanelApi';\nimport { Orientation } from './splitview';\nimport { Emitter } from '../events';\nexport class SplitviewPanel extends BasePanelView {\n    get priority() {\n        return this._priority;\n    }\n    set orientation(value) {\n        this._orientation = value;\n    }\n    get orientation() {\n        return this._orientation;\n    }\n    get minimumSize() {\n        const size = typeof this._minimumSize === 'function'\n            ? this._minimumSize()\n            : this._minimumSize;\n        if (size !== this._evaluatedMinimumSize) {\n            this._evaluatedMinimumSize = size;\n            this.updateConstraints();\n        }\n        return size;\n    }\n    get maximumSize() {\n        const size = typeof this._maximumSize === 'function'\n            ? this._maximumSize()\n            : this._maximumSize;\n        if (size !== this._evaluatedMaximumSize) {\n            this._evaluatedMaximumSize = size;\n            this.updateConstraints();\n        }\n        return size;\n    }\n    get snap() {\n        return this._snap;\n    }\n    constructor(id, componentName) {\n        super(id, componentName, new SplitviewPanelApiImpl(id, componentName));\n        this._evaluatedMinimumSize = 0;\n        this._evaluatedMaximumSize = Number.POSITIVE_INFINITY;\n        this._minimumSize = 0;\n        this._maximumSize = Number.POSITIVE_INFINITY;\n        this._snap = false;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this.api.initialize(this);\n        this.addDisposables(this._onDidChange, this.api.onWillVisibilityChange((event) => {\n            const { isVisible } = event;\n            const { accessor } = this._params;\n            accessor.setVisible(this, isVisible);\n        }), this.api.onActiveChange(() => {\n            const { accessor } = this._params;\n            accessor.setActive(this);\n        }), this.api.onDidConstraintsChangeInternal((event) => {\n            if (typeof event.minimumSize === 'number' ||\n                typeof event.minimumSize === 'function') {\n                this._minimumSize = event.minimumSize;\n            }\n            if (typeof event.maximumSize === 'number' ||\n                typeof event.maximumSize === 'function') {\n                this._maximumSize = event.maximumSize;\n            }\n            this.updateConstraints();\n        }), this.api.onDidSizeChange((event) => {\n            this._onDidChange.fire({ size: event.size });\n        }));\n    }\n    setVisible(isVisible) {\n        this.api._onDidVisibilityChange.fire({ isVisible });\n    }\n    setActive(isActive) {\n        this.api._onDidActiveChange.fire({ isActive });\n    }\n    layout(size, orthogonalSize) {\n        const [width, height] = this.orientation === Orientation.HORIZONTAL\n            ? [size, orthogonalSize]\n            : [orthogonalSize, size];\n        super.layout(width, height);\n    }\n    init(parameters) {\n        super.init(parameters);\n        this._priority = parameters.priority;\n        if (parameters.minimumSize) {\n            this._minimumSize = parameters.minimumSize;\n        }\n        if (parameters.maximumSize) {\n            this._maximumSize = parameters.maximumSize;\n        }\n        if (parameters.snap) {\n            this._snap = parameters.snap;\n        }\n    }\n    toJSON() {\n        const maximum = (value) => value === Number.MAX_SAFE_INTEGER ||\n            value === Number.POSITIVE_INFINITY\n            ? undefined\n            : value;\n        const minimum = (value) => (value <= 0 ? undefined : value);\n        return Object.assign(Object.assign({}, super.toJSON()), { minimumSize: minimum(this.minimumSize), maximumSize: maximum(this.maximumSize) });\n    }\n    updateConstraints() {\n        this.api._onDidConstraintsChange.fire({\n            maximumSize: this._evaluatedMaximumSize,\n            minimumSize: this._evaluatedMinimumSize,\n        });\n    }\n}\n","import { GridviewApi, PaneviewApi, SplitviewApi, } from '../api/component.api';\nimport { DockviewComponent } from '../dockview/dockviewComponent';\nimport { GridviewComponent } from '../gridview/gridviewComponent';\nimport { PaneviewComponent } from '../paneview/paneviewComponent';\nimport { SplitviewComponent } from '../splitview/splitviewComponent';\nexport function createDockview(element, options) {\n    const component = new DockviewComponent(element, options);\n    return component.api;\n}\nexport function createSplitview(element, options) {\n    const component = new SplitviewComponent(element, options);\n    return new SplitviewApi(component);\n}\nexport function createGridview(element, options) {\n    const component = new GridviewComponent(element, options);\n    return new GridviewApi(component);\n}\nexport function createPaneview(element, options) {\n    const component = new PaneviewComponent(element, options);\n    return new PaneviewApi(component);\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { DockviewDisposable, } from 'dockview-core';\n/**\n * This component is intended to interface between vanilla-js and React hence we need to be\n * creative in how we update props.\n * A ref of the component is exposed with an update method; which when called stores the props\n * as a ref within this component and forcefully triggers a re-render of the component using\n * the ref of props we just set on the renderered component as the props passed to the inner\n * component\n */\nconst ReactComponentBridge = (props, ref) => {\n    const [_, triggerRender] = React.useState();\n    const _props = React.useRef(props.componentProps);\n    React.useImperativeHandle(ref, () => ({\n        update: (componentProps) => {\n            _props.current = Object.assign(Object.assign({}, _props.current), componentProps);\n            /**\n             * setting a arbitrary piece of state within this component will\n             * trigger a re-render.\n             * we use this rather than updating through a prop since we can\n             * pass a ref into the vanilla-js world.\n             */\n            triggerRender(Date.now());\n        },\n    }), []);\n    return React.createElement(props.component, _props.current);\n};\nReactComponentBridge.displayName = 'DockviewReactJsBridge';\n/**\n * Since we are storing the React.Portal references in a rendered array they\n * require a key property like any other React element rendered in an array\n * to prevent excessive re-rendering\n */\nconst uniquePortalKeyGenerator = (() => {\n    let value = 1;\n    return { next: () => `dockview_react_portal_key_${(value++).toString()}` };\n})();\nexport const ReactPartContext = React.createContext({});\nexport class ReactPart {\n    constructor(parent, portalStore, component, parameters, context) {\n        this.parent = parent;\n        this.portalStore = portalStore;\n        this.component = component;\n        this.parameters = parameters;\n        this.context = context;\n        this._initialProps = {};\n        this.disposed = false;\n        this.createPortal();\n    }\n    update(props) {\n        if (this.disposed) {\n            throw new Error('invalid operation: resource is already disposed');\n        }\n        if (!this.componentInstance) {\n            // if the component is yet to be mounted store the props\n            this._initialProps = Object.assign(Object.assign({}, this._initialProps), props);\n        }\n        else {\n            this.componentInstance.update(props);\n        }\n    }\n    createPortal() {\n        if (this.disposed) {\n            throw new Error('invalid operation: resource is already disposed');\n        }\n        if (!isReactComponent(this.component)) {\n            /**\n             * we know this isn't a React.FunctionComponent so throw an error here.\n             * if we do not intercept then React library will throw a very obsure error\n             * for the same reason... at least at this point we will emit a sensible stacktrace.\n             */\n            throw new Error('Dockview: Only React.memo(...), React.ForwardRef(...) and functional components are accepted as components');\n        }\n        const bridgeComponent = React.createElement(React.forwardRef(ReactComponentBridge), {\n            component: this\n                .component,\n            componentProps: this.parameters,\n            ref: (element) => {\n                this.componentInstance = element;\n                if (Object.keys(this._initialProps).length > 0) {\n                    this.componentInstance.update(this._initialProps);\n                    this._initialProps = {}; // don't keep a reference to the users object once no longer required\n                }\n            },\n        });\n        const node = this.context\n            ? React.createElement(ReactPartContext.Provider, { value: this.context }, bridgeComponent)\n            : bridgeComponent;\n        const portal = ReactDOM.createPortal(node, this.parent, uniquePortalKeyGenerator.next());\n        this.ref = {\n            portal,\n            disposable: this.portalStore.addPortal(portal),\n        };\n    }\n    dispose() {\n        var _a;\n        (_a = this.ref) === null || _a === void 0 ? void 0 : _a.disposable.dispose();\n        this.disposed = true;\n    }\n}\n/**\n * A React Hook that returns an array of portals to be rendered by the user of this hook\n * and a disposable function to add a portal. Calling dispose removes this portal from the\n * portal array\n */\nexport const usePortalsLifecycle = () => {\n    const [portals, setPortals] = React.useState([]);\n    React.useDebugValue(`Portal count: ${portals.length}`);\n    const addPortal = React.useCallback((portal) => {\n        setPortals((existingPortals) => [...existingPortals, portal]);\n        let disposed = false;\n        return DockviewDisposable.from(() => {\n            if (disposed) {\n                throw new Error('invalid operation: resource already disposed');\n            }\n            disposed = true;\n            setPortals((existingPortals) => existingPortals.filter((p) => p !== portal));\n        });\n    }, []);\n    return [portals, addPortal];\n};\nexport function isReactComponent(component) {\n    /**\n     * Yes, we could use \"react-is\" but that would introduce an unwanted peer dependency\n     * so for now we will check in a rather crude fashion...\n     */\n    return (typeof component === 'function' /** Functional Componnts */ ||\n        !!(component === null || component === void 0 ? void 0 : component.$$typeof) /** React.memo(...) Components */);\n}\n","import { ReactPart } from '../react';\nimport { DockviewEmitter, } from 'dockview-core';\nexport class ReactPanelContentPart {\n    get element() {\n        return this._element;\n    }\n    constructor(id, component, reactPortalStore) {\n        this.id = id;\n        this.component = component;\n        this.reactPortalStore = reactPortalStore;\n        this._onDidFocus = new DockviewEmitter();\n        this.onDidFocus = this._onDidFocus.event;\n        this._onDidBlur = new DockviewEmitter();\n        this.onDidBlur = this._onDidBlur.event;\n        this._element = document.createElement('div');\n        this._element.className = 'dockview-react-part';\n        this._element.style.height = '100%';\n        this._element.style.width = '100%';\n    }\n    focus() {\n        // TODO\n    }\n    init(parameters) {\n        this.part = new ReactPart(this.element, this.reactPortalStore, this.component, {\n            params: parameters.params,\n            api: parameters.api,\n            containerApi: parameters.containerApi,\n        });\n    }\n    update(event) {\n        var _a;\n        (_a = this.part) === null || _a === void 0 ? void 0 : _a.update({ params: event.params });\n    }\n    layout(_width, _height) {\n        // noop\n    }\n    dispose() {\n        var _a;\n        this._onDidFocus.dispose();\n        this._onDidBlur.dispose();\n        (_a = this.part) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n}\n","import { ReactPart } from '../react';\nexport class ReactPanelHeaderPart {\n    get element() {\n        return this._element;\n    }\n    constructor(id, component, reactPortalStore) {\n        this.id = id;\n        this.component = component;\n        this.reactPortalStore = reactPortalStore;\n        this._element = document.createElement('div');\n        this._element.className = 'dockview-react-part';\n        this._element.style.height = '100%';\n        this._element.style.width = '100%';\n    }\n    focus() {\n        //noop\n    }\n    init(parameters) {\n        this.part = new ReactPart(this.element, this.reactPortalStore, this.component, {\n            params: parameters.params,\n            api: parameters.api,\n            containerApi: parameters.containerApi,\n        });\n    }\n    update(event) {\n        var _a;\n        (_a = this.part) === null || _a === void 0 ? void 0 : _a.update({ params: event.params });\n    }\n    layout(_width, _height) {\n        // noop - retrieval from api\n    }\n    dispose() {\n        var _a;\n        (_a = this.part) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n}\n","import { ReactPart } from '../react';\nexport class ReactWatermarkPart {\n    get element() {\n        return this._element;\n    }\n    constructor(id, component, reactPortalStore) {\n        this.id = id;\n        this.component = component;\n        this.reactPortalStore = reactPortalStore;\n        this._element = document.createElement('div');\n        this._element.className = 'dockview-react-part';\n        this._element.style.height = '100%';\n        this._element.style.width = '100%';\n    }\n    init(parameters) {\n        this.part = new ReactPart(this.element, this.reactPortalStore, this.component, {\n            group: parameters.group,\n            containerApi: parameters.containerApi,\n        });\n    }\n    focus() {\n        // noop\n    }\n    update(params) {\n        var _a, _b, _c;\n        if (this.parameters) {\n            this.parameters.params = params.params;\n        }\n        (_a = this.part) === null || _a === void 0 ? void 0 : _a.update({ params: (_c = (_b = this.parameters) === null || _b === void 0 ? void 0 : _b.params) !== null && _c !== void 0 ? _c : {} });\n    }\n    layout(_width, _height) {\n        // noop - retrieval from api\n    }\n    updateParentGroup(_group, _isPanelVisible) {\n        // noop\n    }\n    dispose() {\n        var _a;\n        (_a = this.part) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n}\n","import { ReactPart } from '../react';\nimport { DockviewCompositeDisposable, DockviewMutableDisposable, } from 'dockview-core';\nexport class ReactHeaderActionsRendererPart {\n    get element() {\n        return this._element;\n    }\n    get part() {\n        return this._part;\n    }\n    constructor(component, reactPortalStore, _group) {\n        this.component = component;\n        this.reactPortalStore = reactPortalStore;\n        this._group = _group;\n        this.mutableDisposable = new DockviewMutableDisposable();\n        this._element = document.createElement('div');\n        this._element.className = 'dockview-react-part';\n        this._element.style.height = '100%';\n        this._element.style.width = '100%';\n    }\n    init(parameters) {\n        this.mutableDisposable.value = new DockviewCompositeDisposable(this._group.model.onDidAddPanel(() => {\n            this.updatePanels();\n        }), this._group.model.onDidRemovePanel(() => {\n            this.updatePanels();\n        }), this._group.model.onDidActivePanelChange(() => {\n            this.updateActivePanel();\n        }), parameters.api.onDidActiveChange(() => {\n            this.updateGroupActive();\n        }));\n        this._part = new ReactPart(this.element, this.reactPortalStore, this.component, {\n            api: parameters.api,\n            containerApi: parameters.containerApi,\n            panels: this._group.model.panels,\n            activePanel: this._group.model.activePanel,\n            isGroupActive: this._group.api.isActive,\n            group: this._group,\n        });\n    }\n    dispose() {\n        var _a;\n        this.mutableDisposable.dispose();\n        (_a = this._part) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    update(event) {\n        var _a;\n        (_a = this._part) === null || _a === void 0 ? void 0 : _a.update(event.params);\n    }\n    updatePanels() {\n        this.update({ params: { panels: this._group.model.panels } });\n    }\n    updateActivePanel() {\n        this.update({\n            params: {\n                activePanel: this._group.model.activePanel,\n            },\n        });\n    }\n    updateGroupActive() {\n        this.update({\n            params: {\n                isGroupActive: this._group.api.isActive,\n            },\n        });\n    }\n}\n","import React from 'react';\nimport { PROPERTY_KEYS, createDockview, } from 'dockview-core';\nimport { ReactPanelContentPart } from './reactContentPart';\nimport { ReactPanelHeaderPart } from './reactHeaderPart';\nimport { usePortalsLifecycle } from '../react';\nimport { ReactWatermarkPart } from './reactWatermarkPart';\nimport { ReactHeaderActionsRendererPart } from './headerActionsRenderer';\nfunction createGroupControlElement(component, store) {\n    return component\n        ? (groupPanel) => {\n            return new ReactHeaderActionsRendererPart(component, store, groupPanel);\n        }\n        : undefined;\n}\nconst DEFAULT_REACT_TAB = 'props.defaultTabComponent';\nfunction extractCoreOptions(props) {\n    const coreOptions = PROPERTY_KEYS.reduce((obj, key) => {\n        if (key in props) {\n            obj[key] = props[key];\n        }\n        return obj;\n    }, {});\n    return coreOptions;\n}\nexport const DockviewReact = React.forwardRef((props, ref) => {\n    const domRef = React.useRef(null);\n    const dockviewRef = React.useRef();\n    const [portals, addPortal] = usePortalsLifecycle();\n    React.useImperativeHandle(ref, () => domRef.current, []);\n    const prevProps = React.useRef({});\n    React.useEffect(() => {\n        const changes = {};\n        PROPERTY_KEYS.forEach((propKey) => {\n            const key = propKey;\n            const propValue = props[key];\n            if (key in props && propValue !== prevProps.current[key]) {\n                changes[key] = propValue;\n            }\n        });\n        if (dockviewRef.current) {\n            dockviewRef.current.updateOptions(changes);\n        }\n        else {\n            // not yet fully initialized\n        }\n        prevProps.current = props;\n    }, PROPERTY_KEYS.map((key) => props[key]));\n    React.useEffect(() => {\n        var _a;\n        if (!domRef.current) {\n            return;\n        }\n        const frameworkTabComponents = (_a = props.tabComponents) !== null && _a !== void 0 ? _a : {};\n        if (props.defaultTabComponent) {\n            frameworkTabComponents[DEFAULT_REACT_TAB] =\n                props.defaultTabComponent;\n        }\n        const frameworkOptions = {\n            createLeftHeaderActionComponent: createGroupControlElement(props.leftHeaderActionsComponent, { addPortal }),\n            createRightHeaderActionComponent: createGroupControlElement(props.rightHeaderActionsComponent, { addPortal }),\n            createPrefixHeaderActionComponent: createGroupControlElement(props.prefixHeaderActionsComponent, { addPortal }),\n            createComponent: (options) => {\n                return new ReactPanelContentPart(options.id, props.components[options.name], {\n                    addPortal,\n                });\n            },\n            createTabComponent(options) {\n                return new ReactPanelHeaderPart(options.id, frameworkTabComponents[options.name], {\n                    addPortal,\n                });\n            },\n            createWatermarkComponent: props.watermarkComponent\n                ? () => {\n                    return new ReactWatermarkPart('watermark', props.watermarkComponent, {\n                        addPortal,\n                    });\n                }\n                : undefined,\n            defaultTabComponent: props.defaultTabComponent\n                ? DEFAULT_REACT_TAB\n                : undefined,\n        };\n        const api = createDockview(domRef.current, Object.assign(Object.assign({}, extractCoreOptions(props)), frameworkOptions));\n        const { clientWidth, clientHeight } = domRef.current;\n        api.layout(clientWidth, clientHeight);\n        if (props.onReady) {\n            props.onReady({ api });\n        }\n        dockviewRef.current = api;\n        return () => {\n            api.dispose();\n        };\n    }, []);\n    React.useEffect(() => {\n        if (!dockviewRef.current) {\n            return () => {\n                // noop\n            };\n        }\n        const disposable = dockviewRef.current.onDidDrop((event) => {\n            if (props.onDidDrop) {\n                props.onDidDrop(event);\n            }\n        });\n        return () => {\n            disposable.dispose();\n        };\n    }, [props.onDidDrop]);\n    React.useEffect(() => {\n        if (!dockviewRef.current) {\n            return () => {\n                // noop\n            };\n        }\n        const disposable = dockviewRef.current.onUnhandledDragOverEvent((event) => {\n            var _a;\n            if ((_a = props.showDndOverlay) === null || _a === void 0 ? void 0 : _a.call(props, event)) {\n                event.accept();\n            }\n        });\n        return () => {\n            disposable.dispose();\n        };\n    }, [props.showDndOverlay]);\n    React.useEffect(() => {\n        if (!dockviewRef.current) {\n            return () => {\n                // noop\n            };\n        }\n        const disposable = dockviewRef.current.onWillDrop((event) => {\n            if (props.onWillDrop) {\n                props.onWillDrop(event);\n            }\n        });\n        return () => {\n            disposable.dispose();\n        };\n    }, [props.onWillDrop]);\n    React.useEffect(() => {\n        if (!dockviewRef.current) {\n            return;\n        }\n        dockviewRef.current.updateOptions({\n            createComponent: (options) => {\n                return new ReactPanelContentPart(options.id, props.components[options.name], {\n                    addPortal,\n                });\n            },\n        });\n    }, [props.components]);\n    React.useEffect(() => {\n        var _a;\n        if (!dockviewRef.current) {\n            return;\n        }\n        const frameworkTabComponents = (_a = props.tabComponents) !== null && _a !== void 0 ? _a : {};\n        if (props.defaultTabComponent) {\n            frameworkTabComponents[DEFAULT_REACT_TAB] =\n                props.defaultTabComponent;\n        }\n        dockviewRef.current.updateOptions({\n            defaultTabComponent: props.defaultTabComponent\n                ? DEFAULT_REACT_TAB\n                : undefined,\n            createTabComponent(options) {\n                return new ReactPanelHeaderPart(options.id, frameworkTabComponents[options.name], {\n                    addPortal,\n                });\n            },\n        });\n    }, [props.tabComponents, props.defaultTabComponent]);\n    React.useEffect(() => {\n        if (!dockviewRef.current) {\n            return;\n        }\n        dockviewRef.current.updateOptions({\n            createWatermarkComponent: props.watermarkComponent\n                ? () => {\n                    return new ReactWatermarkPart('watermark', props.watermarkComponent, {\n                        addPortal,\n                    });\n                }\n                : undefined,\n        });\n    }, [props.watermarkComponent]);\n    React.useEffect(() => {\n        if (!dockviewRef.current) {\n            return;\n        }\n        dockviewRef.current.updateOptions({\n            createRightHeaderActionComponent: createGroupControlElement(props.rightHeaderActionsComponent, { addPortal }),\n        });\n    }, [props.rightHeaderActionsComponent]);\n    React.useEffect(() => {\n        if (!dockviewRef.current) {\n            return;\n        }\n        dockviewRef.current.updateOptions({\n            createLeftHeaderActionComponent: createGroupControlElement(props.leftHeaderActionsComponent, { addPortal }),\n        });\n    }, [props.leftHeaderActionsComponent]);\n    React.useEffect(() => {\n        if (!dockviewRef.current) {\n            return;\n        }\n        dockviewRef.current.updateOptions({\n            createPrefixHeaderActionComponent: createGroupControlElement(props.prefixHeaderActionsComponent, { addPortal }),\n        });\n    }, [props.prefixHeaderActionsComponent]);\n    return (React.createElement(\"div\", { className: props.className, style: { height: '100%', width: '100%' }, ref: domRef }, portals));\n});\nDockviewReact.displayName = 'DockviewComponent';\n","import React from 'react';\nexport const CloseButton = () => (React.createElement(\"svg\", { height: \"11\", width: \"11\", viewBox: \"0 0 28 28\", \"aria-hidden\": 'false', focusable: false, className: \"dockview-svg\" },\n    React.createElement(\"path\", { d: \"M2.1 27.3L0 25.2L11.55 13.65L0 2.1L2.1 0L13.65 11.55L25.2 0L27.3 2.1L15.75 13.65L27.3 25.2L25.2 27.3L13.65 15.75L2.1 27.3Z\" })));\nexport const ExpandMore = () => {\n    return (React.createElement(\"svg\", { width: \"11\", height: \"11\", viewBox: \"0 0 24 15\", \"aria-hidden\": 'false', focusable: false, className: \"dockview-svg\" },\n        React.createElement(\"path\", { d: \"M12 14.15L0 2.15L2.15 0L12 9.9L21.85 0.0499992L24 2.2L12 14.15Z\" })));\n};\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { CloseButton } from '../svg';\nfunction useTitle(api) {\n    const [title, setTitle] = React.useState(api.title);\n    React.useEffect(() => {\n        const disposable = api.onDidTitleChange((event) => {\n            setTitle(event.title);\n        });\n        return () => {\n            disposable.dispose();\n        };\n    }, [api]);\n    return title;\n}\nexport const DockviewDefaultTab = (_a) => {\n    var { api, containerApi: _containerApi, params: _params, hideClose, closeActionOverride } = _a, rest = __rest(_a, [\"api\", \"containerApi\", \"params\", \"hideClose\", \"closeActionOverride\"]);\n    const title = useTitle(api);\n    const onClose = React.useCallback((event) => {\n        event.preventDefault();\n        if (closeActionOverride) {\n            closeActionOverride();\n        }\n        else {\n            api.close();\n        }\n    }, [api, closeActionOverride]);\n    const onMouseDown = React.useCallback((e) => {\n        e.preventDefault();\n    }, []);\n    const onClick = React.useCallback((event) => {\n        if (event.defaultPrevented) {\n            return;\n        }\n        api.setActive();\n        if (rest.onClick) {\n            rest.onClick(event);\n        }\n    }, [api, rest.onClick]);\n    return (React.createElement(\"div\", Object.assign({ \"data-testid\": \"dockview-dv-default-tab\" }, rest, { onClick: onClick, className: \"dv-default-tab\" }),\n        React.createElement(\"span\", { className: \"dv-default-tab-content\" }, title),\n        !hideClose && (React.createElement(\"div\", { className: \"dv-default-tab-action\", onMouseDown: onMouseDown, onClick: onClose },\n            React.createElement(CloseButton, null)))));\n};\n","import { SplitviewApi, SplitviewPanel, } from 'dockview-core';\nimport { ReactPart } from '../react';\nexport class ReactPanelView extends SplitviewPanel {\n    constructor(id, component, reactComponent, reactPortalStore) {\n        super(id, component);\n        this.reactComponent = reactComponent;\n        this.reactPortalStore = reactPortalStore;\n    }\n    getComponent() {\n        var _a, _b;\n        return new ReactPart(this.element, this.reactPortalStore, this.reactComponent, {\n            params: (_b = (_a = this._params) === null || _a === void 0 ? void 0 : _a.params) !== null && _b !== void 0 ? _b : {},\n            api: this.api,\n            containerApi: new SplitviewApi(this._params.accessor),\n        });\n    }\n}\n","import React from 'react';\nimport { Orientation, createSplitview, } from 'dockview-core';\nimport { usePortalsLifecycle } from '../react';\nimport { ReactPanelView } from './view';\nexport const SplitviewReact = React.forwardRef((props, ref) => {\n    const domRef = React.useRef(null);\n    const splitviewRef = React.useRef();\n    const [portals, addPortal] = usePortalsLifecycle();\n    React.useImperativeHandle(ref, () => domRef.current, []);\n    React.useEffect(() => {\n        var _a;\n        const api = createSplitview(domRef.current, {\n            disableAutoResizing: props.disableAutoResizing,\n            orientation: (_a = props.orientation) !== null && _a !== void 0 ? _a : Orientation.HORIZONTAL,\n            frameworkComponents: props.components,\n            frameworkWrapper: {\n                createComponent: (id, componentId, component) => {\n                    return new ReactPanelView(id, componentId, component, {\n                        addPortal,\n                    });\n                },\n            },\n            proportionalLayout: typeof props.proportionalLayout === 'boolean'\n                ? props.proportionalLayout\n                : true,\n            styles: props.hideBorders\n                ? { separatorBorder: 'transparent' }\n                : undefined,\n        });\n        const { clientWidth, clientHeight } = domRef.current;\n        api.layout(clientWidth, clientHeight);\n        if (props.onReady) {\n            props.onReady({ api });\n        }\n        splitviewRef.current = api;\n        return () => {\n            api.dispose();\n        };\n    }, []);\n    React.useEffect(() => {\n        if (!splitviewRef.current) {\n            return;\n        }\n        splitviewRef.current.updateOptions({\n            frameworkComponents: props.components,\n        });\n    }, [props.components]);\n    return (React.createElement(\"div\", { className: props.className, style: { height: '100%', width: '100%' }, ref: domRef }, portals));\n});\nSplitviewReact.displayName = 'SplitviewComponent';\n","import { GridviewApi, GridviewPanel, } from 'dockview-core';\nimport { ReactPart } from '../react';\nexport class ReactGridPanelView extends GridviewPanel {\n    constructor(id, component, reactComponent, reactPortalStore) {\n        super(id, component);\n        this.reactComponent = reactComponent;\n        this.reactPortalStore = reactPortalStore;\n    }\n    getComponent() {\n        var _a, _b;\n        return new ReactPart(this.element, this.reactPortalStore, this.reactComponent, {\n            params: (_b = (_a = this._params) === null || _a === void 0 ? void 0 : _a.params) !== null && _b !== void 0 ? _b : {},\n            api: this.api,\n            // TODO: fix casting hack\n            containerApi: new GridviewApi(this._params\n                .accessor),\n        });\n    }\n}\n","import React from 'react';\nimport { Orientation, createGridview, } from 'dockview-core';\nimport { ReactGridPanelView } from './view';\nimport { usePortalsLifecycle } from '../react';\nexport const GridviewReact = React.forwardRef((props, ref) => {\n    const domRef = React.useRef(null);\n    const gridviewRef = React.useRef();\n    const [portals, addPortal] = usePortalsLifecycle();\n    React.useImperativeHandle(ref, () => domRef.current, []);\n    React.useEffect(() => {\n        var _a;\n        if (!domRef.current) {\n            return () => {\n                // noop\n            };\n        }\n        const api = createGridview(domRef.current, {\n            disableAutoResizing: props.disableAutoResizing,\n            proportionalLayout: typeof props.proportionalLayout === 'boolean'\n                ? props.proportionalLayout\n                : true,\n            orientation: (_a = props.orientation) !== null && _a !== void 0 ? _a : Orientation.HORIZONTAL,\n            frameworkComponents: props.components,\n            frameworkComponentFactory: {\n                createComponent: (id, componentId, component) => {\n                    return new ReactGridPanelView(id, componentId, component, {\n                        addPortal,\n                    });\n                },\n            },\n            styles: props.hideBorders\n                ? { separatorBorder: 'transparent' }\n                : undefined,\n        });\n        const { clientWidth, clientHeight } = domRef.current;\n        api.layout(clientWidth, clientHeight);\n        if (props.onReady) {\n            props.onReady({ api });\n        }\n        gridviewRef.current = api;\n        return () => {\n            api.dispose();\n        };\n    }, []);\n    React.useEffect(() => {\n        if (!gridviewRef.current) {\n            return;\n        }\n        gridviewRef.current.updateOptions({\n            frameworkComponents: props.components,\n        });\n    }, [props.components]);\n    return (React.createElement(\"div\", { className: props.className, style: { height: '100%', width: '100%' }, ref: domRef }, portals));\n});\nGridviewReact.displayName = 'GridviewComponent';\n","import { ReactPart } from '../react';\nexport class PanePanelSection {\n    get element() {\n        return this._element;\n    }\n    constructor(id, component, reactPortalStore) {\n        this.id = id;\n        this.component = component;\n        this.reactPortalStore = reactPortalStore;\n        this._element = document.createElement('div');\n        this._element.style.height = '100%';\n        this._element.style.width = '100%';\n    }\n    init(parameters) {\n        this.part = new ReactPart(this.element, this.reactPortalStore, this.component, {\n            params: parameters.params,\n            api: parameters.api,\n            title: parameters.title,\n            containerApi: parameters.containerApi,\n        });\n    }\n    toJSON() {\n        return {\n            id: this.id,\n        };\n    }\n    update(params) {\n        var _a;\n        (_a = this.part) === null || _a === void 0 ? void 0 : _a.update(params.params);\n    }\n    dispose() {\n        var _a;\n        (_a = this.part) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n}\n","import React from 'react';\nimport { createPaneview, } from 'dockview-core';\nimport { usePortalsLifecycle } from '../react';\nimport { PanePanelSection } from './view';\nexport const PaneviewReact = React.forwardRef((props, ref) => {\n    const domRef = React.useRef(null);\n    const paneviewRef = React.useRef();\n    const [portals, addPortal] = usePortalsLifecycle();\n    React.useImperativeHandle(ref, () => domRef.current, []);\n    React.useEffect(() => {\n        const createComponent = (id, _componentId, component) => new PanePanelSection(id, component, {\n            addPortal,\n        });\n        const api = createPaneview(domRef.current, {\n            disableAutoResizing: props.disableAutoResizing,\n            frameworkComponents: props.components,\n            components: {},\n            headerComponents: {},\n            disableDnd: props.disableDnd,\n            headerframeworkComponents: props.headerComponents,\n            frameworkWrapper: {\n                header: {\n                    createComponent,\n                },\n                body: {\n                    createComponent,\n                },\n            },\n            showDndOverlay: props.showDndOverlay,\n        });\n        const { clientWidth, clientHeight } = domRef.current;\n        api.layout(clientWidth, clientHeight);\n        if (props.onReady) {\n            props.onReady({ api });\n        }\n        paneviewRef.current = api;\n        return () => {\n            api.dispose();\n        };\n    }, []);\n    React.useEffect(() => {\n        if (!paneviewRef.current) {\n            return;\n        }\n        paneviewRef.current.updateOptions({\n            frameworkComponents: props.components,\n        });\n    }, [props.components]);\n    React.useEffect(() => {\n        if (!paneviewRef.current) {\n            return;\n        }\n        paneviewRef.current.updateOptions({\n            headerframeworkComponents: props.headerComponents,\n        });\n    }, [props.headerComponents]);\n    React.useEffect(() => {\n        if (!paneviewRef.current) {\n            return () => {\n                //\n            };\n        }\n        const api = paneviewRef.current;\n        const disposable = api.onDidDrop((event) => {\n            if (props.onDidDrop) {\n                props.onDidDrop(Object.assign(Object.assign({}, event), { api }));\n            }\n        });\n        return () => {\n            disposable.dispose();\n        };\n    }, [props.onDidDrop]);\n    React.useEffect(() => {\n        if (!paneviewRef.current) {\n            return;\n        }\n        paneviewRef.current.updateOptions({\n            showDndOverlay: props.showDndOverlay,\n        });\n    }, [props.showDndOverlay]);\n    return (React.createElement(\"div\", { className: props.className, style: { height: '100%', width: '100%' }, ref: domRef }, portals));\n});\nPaneviewReact.displayName = 'PaneviewComponent';\n","// extracted by mini-css-extract-plugin\nexport default {\"admonition\":\"admonition_Gfwi\",\"admonitionHeading\":\"admonitionHeading_f1Ed\",\"admonitionIcon\":\"admonitionIcon_kpSf\",\"admonitionContent\":\"admonitionContent_UjKb\"};","import React from 'react';\nimport clsx from 'clsx';\nimport { ThemeClassNames } from '@docusaurus/theme-common';\nimport styles from './styles.module.css';\nfunction AdmonitionContainer({ type, className, children }) {\n    return (\n        <div\n            className={clsx(\n                ThemeClassNames.common.admonition,\n                ThemeClassNames.common.admonitionType(type),\n                styles.admonition,\n                className\n            )}\n        >\n            {children}\n        </div>\n    );\n}\nfunction AdmonitionHeading({ icon, title }) {\n    return (\n        <div className={styles.admonitionHeading}>\n            <span className={styles.admonitionIcon}>{icon}</span>\n            {/* {title} */}\n        </div>\n    );\n}\nfunction AdmonitionContent({ children }) {\n    return children ? (\n        <div className={styles.admonitionContent}>{children}</div>\n    ) : null;\n}\nexport default function AdmonitionLayout(props) {\n    const { type, icon, title, children, className } = props;\n    return (\n        <AdmonitionContainer type={type} className={className}>\n            <AdmonitionHeading title={title} icon={icon} />\n            <AdmonitionContent>{children}</AdmonitionContent>\n        </AdmonitionContainer>\n    );\n}\n","import React from 'react';\nexport default function AdmonitionIconNote(props) {\n  return (\n    <svg viewBox=\"0 0 14 16\" {...props}>\n      <path\n        fillRule=\"evenodd\"\n        d=\"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport Translate from '@docusaurus/Translate';\nimport AdmonitionLayout from '@theme/Admonition/Layout';\nimport IconNote from '@theme/Admonition/Icon/Note';\nconst infimaClassName = 'alert alert--secondary';\nconst defaultProps = {\n  icon: <IconNote />,\n  title: (\n    <Translate\n      id=\"theme.admonition.note\"\n      description=\"The default label used for the Note admonition (:::note)\">\n      note\n    </Translate>\n  ),\n};\nexport default function AdmonitionTypeNote(props) {\n  return (\n    <AdmonitionLayout\n      {...defaultProps}\n      {...props}\n      className={clsx(infimaClassName, props.className)}>\n      {props.children}\n    </AdmonitionLayout>\n  );\n}\n","import React from 'react';\nexport default function AdmonitionIconTip(props) {\n  return (\n    <svg viewBox=\"0 0 12 16\" {...props}>\n      <path\n        fillRule=\"evenodd\"\n        d=\"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport Translate from '@docusaurus/Translate';\nimport AdmonitionLayout from '@theme/Admonition/Layout';\nimport IconTip from '@theme/Admonition/Icon/Tip';\nconst infimaClassName = 'alert alert--success';\nconst defaultProps = {\n  icon: <IconTip />,\n  title: (\n    <Translate\n      id=\"theme.admonition.tip\"\n      description=\"The default label used for the Tip admonition (:::tip)\">\n      tip\n    </Translate>\n  ),\n};\nexport default function AdmonitionTypeTip(props) {\n  return (\n    <AdmonitionLayout\n      {...defaultProps}\n      {...props}\n      className={clsx(infimaClassName, props.className)}>\n      {props.children}\n    </AdmonitionLayout>\n  );\n}\n","import React from 'react';\nexport default function AdmonitionIconInfo(props) {\n  return (\n    <svg viewBox=\"0 0 14 16\" {...props}>\n      <path\n        fillRule=\"evenodd\"\n        d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport Translate from '@docusaurus/Translate';\nimport AdmonitionLayout from '@theme/Admonition/Layout';\nimport IconInfo from '@theme/Admonition/Icon/Info';\nconst infimaClassName = 'alert alert--info';\nconst defaultProps = {\n  icon: <IconInfo />,\n  title: (\n    <Translate\n      id=\"theme.admonition.info\"\n      description=\"The default label used for the Info admonition (:::info)\">\n      info\n    </Translate>\n  ),\n};\nexport default function AdmonitionTypeInfo(props) {\n  return (\n    <AdmonitionLayout\n      {...defaultProps}\n      {...props}\n      className={clsx(infimaClassName, props.className)}>\n      {props.children}\n    </AdmonitionLayout>\n  );\n}\n","import React from 'react';\nexport default function AdmonitionIconCaution(props) {\n  return (\n    <svg viewBox=\"0 0 16 16\" {...props}>\n      <path\n        fillRule=\"evenodd\"\n        d=\"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport Translate from '@docusaurus/Translate';\nimport AdmonitionLayout from '@theme/Admonition/Layout';\nimport IconWarning from '@theme/Admonition/Icon/Warning';\nconst infimaClassName = 'alert alert--warning';\nconst defaultProps = {\n  icon: <IconWarning />,\n  title: (\n    <Translate\n      id=\"theme.admonition.warning\"\n      description=\"The default label used for the Warning admonition (:::warning)\">\n      warning\n    </Translate>\n  ),\n};\nexport default function AdmonitionTypeWarning(props) {\n  return (\n    <AdmonitionLayout\n      {...defaultProps}\n      {...props}\n      className={clsx(infimaClassName, props.className)}>\n      {props.children}\n    </AdmonitionLayout>\n  );\n}\n","import React from 'react';\nexport default function AdmonitionIconDanger(props) {\n  return (\n    <svg viewBox=\"0 0 12 16\" {...props}>\n      <path\n        fillRule=\"evenodd\"\n        d=\"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z\"\n      />\n    </svg>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport Translate from '@docusaurus/Translate';\nimport AdmonitionLayout from '@theme/Admonition/Layout';\nimport IconDanger from '@theme/Admonition/Icon/Danger';\nconst infimaClassName = 'alert alert--danger';\nconst defaultProps = {\n  icon: <IconDanger />,\n  title: (\n    <Translate\n      id=\"theme.admonition.danger\"\n      description=\"The default label used for the Danger admonition (:::danger)\">\n      danger\n    </Translate>\n  ),\n};\nexport default function AdmonitionTypeDanger(props) {\n  return (\n    <AdmonitionLayout\n      {...defaultProps}\n      {...props}\n      className={clsx(infimaClassName, props.className)}>\n      {props.children}\n    </AdmonitionLayout>\n  );\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport Translate from '@docusaurus/Translate';\nimport AdmonitionLayout from '@theme/Admonition/Layout';\nimport IconWarning from '@theme/Admonition/Icon/Warning';\nconst infimaClassName = 'alert alert--warning';\nconst defaultProps = {\n  icon: <IconWarning />,\n  title: (\n    <Translate\n      id=\"theme.admonition.caution\"\n      description=\"The default label used for the Caution admonition (:::caution)\">\n      caution\n    </Translate>\n  ),\n};\n// TODO remove before v4: Caution replaced by Warning\n// see https://github.com/facebook/docusaurus/issues/7558\nexport default function AdmonitionTypeCaution(props) {\n  return (\n    <AdmonitionLayout\n      {...defaultProps}\n      {...props}\n      className={clsx(infimaClassName, props.className)}>\n      {props.children}\n    </AdmonitionLayout>\n  );\n}\n","import React from 'react';\nimport AdmonitionTypeNote from '@theme/Admonition/Type/Note';\nimport AdmonitionTypeTip from '@theme/Admonition/Type/Tip';\nimport AdmonitionTypeInfo from '@theme/Admonition/Type/Info';\nimport AdmonitionTypeWarning from '@theme/Admonition/Type/Warning';\nimport AdmonitionTypeDanger from '@theme/Admonition/Type/Danger';\nimport AdmonitionTypeCaution from '@theme/Admonition/Type/Caution';\nconst admonitionTypes = {\n  note: AdmonitionTypeNote,\n  tip: AdmonitionTypeTip,\n  info: AdmonitionTypeInfo,\n  warning: AdmonitionTypeWarning,\n  danger: AdmonitionTypeDanger,\n};\n// Undocumented legacy admonition type aliases\n// Provide hardcoded/untranslated retrocompatible label\n// See also https://github.com/facebook/docusaurus/issues/7767\nconst admonitionAliases = {\n  secondary: (props) => <AdmonitionTypeNote title=\"secondary\" {...props} />,\n  important: (props) => <AdmonitionTypeInfo title=\"important\" {...props} />,\n  success: (props) => <AdmonitionTypeTip title=\"success\" {...props} />,\n  caution: AdmonitionTypeCaution,\n};\nexport default {\n  ...admonitionTypes,\n  ...admonitionAliases,\n};\n","import React from 'react';\nimport {processAdmonitionProps} from '@docusaurus/theme-common';\nimport AdmonitionTypes from '@theme/Admonition/Types';\nfunction getAdmonitionTypeComponent(type) {\n  const component = AdmonitionTypes[type];\n  if (component) {\n    return component;\n  }\n  console.warn(\n    `No admonition component found for admonition type \"${type}\". Using Info as fallback.`,\n  );\n  return AdmonitionTypes.info;\n}\nexport default function Admonition(unprocessedProps) {\n  const props = processAdmonitionProps(unprocessedProps);\n  const AdmonitionTypeComponent = getAdmonitionTypeComponent(props.type);\n  return <AdmonitionTypeComponent {...props} />;\n}\n","import React from 'react';\nimport clsx from 'clsx';\nimport { ThemeClassNames } from '@docusaurus/theme-common';\nimport { useDoc } from '@docusaurus/theme-common/internal';\nimport Heading from '@theme/Heading';\nimport MDXContent from '@theme/MDXContent';\nimport { FrameworkSelector } from '@site/src/components/frameworkSpecific';\n/**\n Title can be declared inside md content or declared through\n front matter and added manually. To make both cases consistent,\n the added title is added under the same div.markdown block\n See https://github.com/facebook/docusaurus/pull/4882#issuecomment-853021120\n\n We render a \"synthetic title\" if:\n - user doesn't ask to hide it with front matter\n - the markdown content does not already contain a top-level h1 heading\n*/\nfunction useSyntheticTitle() {\n    const { metadata, frontMatter, contentTitle } = useDoc();\n    const shouldRender =\n        !frontMatter.hide_title && typeof contentTitle === 'undefined';\n    if (!shouldRender) {\n        return null;\n    }\n    return metadata.title;\n}\nexport default function DocItemContent({ children }) {\n    const syntheticTitle = useSyntheticTitle();\n    return (\n        <div className={clsx(ThemeClassNames.docs.docMarkdown, 'markdown')}>\n            {syntheticTitle && (\n                <header>\n                    <Heading as=\"h1\">\n                        {\n                            <div\n                                style={{\n                                    display: 'flex',\n                                    justifyContent: 'space-between',\n                                }}\n                            >\n                                <div>{syntheticTitle}</div>\n                                <FrameworkSelector />\n                            </div>\n                        }\n                    </Heading>\n                </header>\n            )}\n            <MDXContent>{children}</MDXContent>\n        </div>\n    );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"docItemContainer\":\"docItemContainer_c0TR\",\"docItemCol\":\"docItemCol_z5aJ\"};","import React from 'react';\nimport clsx from 'clsx';\nimport { useWindowSize } from '@docusaurus/theme-common';\nimport { useDoc } from '@docusaurus/theme-common/internal';\nimport DocItemPaginator from '@theme/DocItem/Paginator';\nimport DocVersionBanner from '@theme/DocVersionBanner';\nimport DocVersionBadge from '@theme/DocVersionBadge';\nimport DocItemFooter from '@theme/DocItem/Footer';\nimport DocItemTOCMobile from '@theme/DocItem/TOC/Mobile';\nimport DocItemTOCDesktop from '@theme/DocItem/TOC/Desktop';\nimport DocItemContent from '@theme/DocItem/Content';\nimport DocBreadcrumbs from '@theme/DocBreadcrumbs';\nimport Unlisted from '@theme/Unlisted';\nimport styles from './styles.module.css';\n/**\n * Decide if the toc should be rendered, on mobile or desktop viewports\n */\nfunction useDocTOC() {\n    const { frontMatter, toc } = useDoc();\n    const windowSize = useWindowSize();\n    const hidden = frontMatter.hide_table_of_contents;\n    const canRender = !hidden && toc.length > 0;\n    const mobile = canRender ? <DocItemTOCMobile /> : undefined;\n    const desktop =\n        canRender && (windowSize === 'desktop' || windowSize === 'ssr') ? (\n            <DocItemTOCDesktop />\n        ) : undefined;\n    return {\n        hidden,\n        mobile,\n        desktop,\n    };\n}\nexport default function DocItemLayout({ children }) {\n    const docTOC = useDocTOC();\n    const {\n        metadata: { unlisted },\n    } = useDoc();\n    return (\n        <div className=\"row\">\n            <div className={clsx('col', !docTOC.hidden && styles.docItemCol)}>\n                {unlisted && <Unlisted />}\n                <DocVersionBanner />\n                <div className={styles.docItemContainer}>\n                    <article>\n                        <DocBreadcrumbs />\n                        <DocVersionBadge />\n                        {docTOC.mobile}\n                        <DocItemContent>{children}</DocItemContent>\n                        <DocItemFooter />\n                    </article>\n                    <DocItemPaginator />\n                </div>\n            </div>\n            {docTOC.desktop && (\n                <div className=\"toc-display col col--3\">{docTOC.desktop}</div>\n            )}\n        </div>\n    );\n}\n","import React from 'react';\n// Import the original mapper\nimport MDXComponents from '@theme-original/MDXComponents';\nimport { FrameworkSpecific } from '@site/src/components/frameworkSpecific';\nimport { CodeRunner } from '../components/ui/codeRunner';\n\nexport default {\n    // Re-use the default mapping\n    ...MDXComponents,\n    // Map the \"<Highlight>\" tag to our Highlight component\n    // `Highlight` will receive all props that were passed to `<Highlight>` in MDX\n    FrameworkSpecific,\n    CodeRunner,\n};\n","import BrowserOnly from '@docusaurus/BrowserOnly';\nimport { DockviewEmitter } from 'dockview';\nimport * as React from 'react';\nimport './frameworkSpecific.css';\n\nexport interface FrameworkDescriptor {\n    value: string;\n    label: string;\n    icon: string;\n}\n\nconst frameworks: FrameworkDescriptor[] = [\n    // { value: 'JavaScript', label: 'JavaScript', icon: 'img/js-icon.svg' },\n    { value: 'React', label: 'React', icon: 'img/react-icon.svg' },\n    { value: 'Vue', label: 'Vue', icon: 'img/vue-icon.svg' },\n    // { value: 'Angular', label: 'Angular' },\n];\n\nconst activeFrameworkGlobal = new DockviewEmitter<string>({ replay: true });\n\nexport function useActiveFramework(): [\n    FrameworkDescriptor,\n    (value: string) => void\n] {\n    const [value, setValue] = React.useState<string>(\n        localStorage.getItem('dv-docs-framework') ?? frameworks[0].value\n    );\n\n    React.useEffect(() => {\n        const disposable = activeFrameworkGlobal.event((value) => [\n            setValue(value),\n        ]);\n\n        activeFrameworkGlobal.fire(\n            localStorage.getItem('dv-docs-framework') ?? frameworks[0].value\n        );\n\n        return () => {\n            disposable.dispose();\n        };\n    }, []);\n\n    const setter = React.useCallback((value: string) => {\n        localStorage.setItem('dv-docs-framework', value);\n        setValue(value);\n        activeFrameworkGlobal.fire(value);\n    }, []);\n\n    const option = frameworks.find((_) => _.value === value);\n\n    return [option, setter];\n}\n\nimport * as DropdownMenu from '@radix-ui/react-dropdown-menu';\nimport useBaseUrl from '@docusaurus/useBaseUrl';\n\nconst FrameworkSelector1 = () => {\n    const [activeFramework, setActiveFramework] = useActiveFramework();\n\n    const onChange = (event: React.ChangeEvent<HTMLSelectElement>) => [\n        setActiveFramework(event.target.value),\n    ];\n\n    return (\n        <DropdownMenu.Root>\n            <DropdownMenu.Trigger asChild={true}>\n                <div className=\"framework-menu-item-select\">\n                    <span style={{ padding: '0px 8px' }}>\n                        {activeFramework.label}\n                    </span>\n                    <img\n                        width={20}\n                        height={20}\n                        src={useBaseUrl(activeFramework.icon)}\n                        style={{ marginRight: '8px' }}\n                    />\n                </div>\n            </DropdownMenu.Trigger>\n            <DropdownMenu.Content\n                side=\"bottom\"\n                align=\"end\"\n                sideOffset={10}\n                className=\"DropdownMenuContent\"\n            >\n                {frameworks.map((framework) => {\n                    return (\n                        <DropdownMenu.Item\n                            onClick={() => setActiveFramework(framework.label)}\n                            className=\"DropdownMenuItem\"\n                        >\n                            <div className=\"framework-menu-item\">\n                                <span style={{ paddingRight: '8px' }}>\n                                    {framework.label}\n                                </span>\n                                <img\n                                    width={20}\n                                    height={20}\n                                    src={useBaseUrl(framework.icon)}\n                                />\n                            </div>\n                        </DropdownMenu.Item>\n                    );\n                })}\n            </DropdownMenu.Content>\n        </DropdownMenu.Root>\n    );\n};\n\nexport const FrameworkSelector = () => {\n    return <BrowserOnly>{() => <FrameworkSelector1 />}</BrowserOnly>;\n};\n\nconst FrameworkSpecific1 = (props: {\n    framework: string;\n    children: React.ReactNode;\n}) => {\n    const [activeFramework] = useActiveFramework();\n\n    if (activeFramework.value === props.framework) {\n        return props.children;\n    }\n\n    return null;\n};\n\nexport const FrameworkSpecific = (props: {\n    framework: string;\n    children: React.ReactNode;\n}) => {\n    return <BrowserOnly>{() => <FrameworkSpecific1 {...props} />}</BrowserOnly>;\n};\n","import * as React from 'react';\nimport { useActiveFramework } from '../frameworkSpecific';\nimport BrowserOnly from '@docusaurus/BrowserOnly';\n\nconst BASE_SANDBOX_URL =\n    'https://codesandbox.io/s/github/mathuo/dockview/tree/gh-pages';\n\nexport const _CodeRunner = (props: { id: string; height: number }) => {\n    const [framework] = useActiveFramework();\n\n    const sandboxUrl = `${BASE_SANDBOX_URL}/templates/${\n        props.id\n    }/${framework.label.toLowerCase()}`;\n    const path = `/templates/${\n        props.id\n    }/${framework.value.toLowerCase()}/index.html`;\n    return (\n        <div>\n            <iframe\n                src={path}\n                style={{ width: '100%', height: `${props.height ?? 300}px` }}\n            />\n            <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\n                <CodeSandbox url={sandboxUrl} />\n                <a\n                    target=\"#blank\"\n                    href={path}\n                    className=\"material-symbols-outlined\"\n                >\n                    open_in_new\n                </a>\n            </div>\n        </div>\n    );\n};\n\nexport const CodeRunner = (props: { id: string; height: number }) => {\n    return <BrowserOnly>{() => <_CodeRunner {...props} />}</BrowserOnly>;\n};\n\nconst CodeSandbox = (props: { url: string }) => {\n    return (\n        <span\n            className=\"codesandbox-button\"\n            style={{ display: 'flex', alignItems: 'center' }}\n        >\n            <span className=\"codesandbox-button-pretext\">{`Open in `}</span>\n            <a\n                href={props.url}\n                target={'_blank'}\n                rel=\"noopener\"\n                className=\"codesandbox-button-content\"\n            >\n                <span\n                    style={{\n                        fontWeight: 'bold',\n                        paddingRight: '4px',\n                    }}\n                >\n                    CodeSandbox\n                </span>\n            </a>\n        </span>\n    );\n};\n"],"names":["TransferObject","PanelTransfer","constructor","viewId","groupId","panelId","super","this","PaneTransfer","paneId","LocalSelectionTransfer","getInstance","INSTANCE","hasData","proto","clearData","undefined","data","getData","setData","getPanelData","panelTransfer","prototype","getPaneData","paneTransfer","Event","Disposable","any","_len","arguments","length","children","Array","_key","listener","disposables","map","child","dispose","forEach","d","DockviewEvent","_defaultPrevented","defaultPrevented","preventDefault","Stacktrace","create","_a","Error","stack","value","print","console","warn","Listener","callback","stacktrace","Emitter","setLeakageMonitorEnabled","isEnabled","ENABLE_TRACKING","MEMORY_LEAK_WATCHER","clear","_last","options","_listeners","_disposed","event","_event","replay","push","index","indexOf","splice","add","fire","e","queueMicrotask","delete","addDisposableWindowListener","element","type","addEventListener","removeEventListener","addDisposableListener","events","Map","size","set","AsapEvent","_onFired","_currentFireCount","_queued","onEvent","fireCountAtTimeOfEventSubscription","NONE","from","func","CompositeDisposable","isDisposed","_isDisposed","args","_disposables","addDisposables","_len2","_key2","arg","MutableDisposable","_disposable","disposable","watchElementResize","cb","observer","ResizeObserver","entires","requestAnimationFrame","firstEntry","observe","unobserve","disconnect","removeClasses","classes","classname","classList","contains","remove","addClasses","toggleClass","className","isToggled","hasClass","isAncestor","testChild","testAncestor","parentNode","getElementsByTagName","tag","slice","call","document","trackFocus","FocusTracker","_onDidFocus","onDidFocus","_onDidBlur","onDidBlur","hasFocus","activeElement","loosingFocus","onFocus","onBlur","window","setTimeout","_refreshStateHandler","HTMLElement","refreshState","QUASI_PREVENT_DEFAULT_KEY","quasiDefaultPrevented","getDomNodePagePosition","domNode","left","top","width","height","getBoundingClientRect","scrollX","scrollY","disableIframePointEvents","iframes","original","WeakMap","iframe","style","pointerEvents","release","get","tail","arr","sequenceEquals","arr1","arr2","i","pushToStart","unshift","pushToEnd","array","findIndex","t","clamp","min","max","Math","sequentialNumberGenerator","next","toString","range","to","result","ViewItem","_size","cachedVisibleSize","_cachedVisibleSize","visible","minimumSize","view","viewMinimumSize","maximumSize","viewMaximumSize","priority","snap","enabled","container","setVisible","toggle","Orientation","SashState","LayoutPriority","Sizing","Distribute","Split","Invisible","Splitview","contentSize","_contentSize","orthogonalSize","_orthogonalSize","viewItems","proportions","_proportions","orientation","_orientation","tmp","HORIZONTAL","reduce","r","item","Number","POSITIVE_INFINITY","startSnappingEnabled","_startSnappingEnabled","updateSashEnablement","endSnappingEnabled","_endSnappingEnabled","disabled","_disabled","margin","_margin","_this","sashes","_onDidSashEnd","onDidSashEnd","_onDidAddView","onDidAddView","_onDidRemoveView","onDidRemoveView","resize","delta","sizes","lowPriorityIndexes","highPriorityIndexes","overloadMinDelta","overloadMaxDelta","snapBefore","snapAfter","x","NEGATIVE_INFINITY","upIndexes","downIndexes","upItems","upSizes","downItems","downSizes","minDeltaUp","_","maxDeltaUp","maxDeltaDown","minDeltaDown","minDelta","maxDelta","snapped","snapView","limitDelta","actualDelta","deltaUp","viewDelta","deltaDown","createContainer","proportionalLayout","viewContainer","createViewContainer","sashContainer","createSashContainer","appendChild","styles","descriptor","views","viewDescriptor","sizing","addView","saveProportions","separatorBorder","removeProperty","setProperty","isViewVisible","setViewVisible","viewItem","distributeEmptySpace","layoutViews","getViewSize","resizeView","indexes","filter","Low","High","round","relayout","getViews","onDidChange","skipLayout","createElement","viewSize","newSize","removeChild","insertBefore","sash","onPointerStart","start","clientX","clientY","sashIndex","fn","firstIndex","s","snapBeforeIndex","findFirstSnapIndex","snapAfterIndex","snappedViewItem","halfSize","floor","onPointerMove","end","sashItem","distributeViewSizes","flexibleViewItems","flexibleSize","removeView","getViewCachedVisibleSize","moveView","layout","previousSize","total","proportion","lowPriorityIndex","emptyDelta","visibleViewItems","sashCount","marginReducedSize","totalLeftOffset","viewLeftOffsets","runningVisiblePanelCount","flag","visiblePanelsBeforeThisView","offset","sashWidth","VERTICAL","previous","collapsesDown","expandsDown","reverseViews","reverse","collapsesUp","expandsUp","position","snappedBefore","snappedAfter","updateSash","MINIMUM","MAXIMUM","DISABLED","ENABLED","state","orientationClassname","Paneview","splitview","paneItems","skipAnimation","_onDidChange","getPanes","pane","onDidChangeExpansionState","setupAnimation","paneItem","addPane","removePane","skipDispose","animationTimer","clearTimeout","LeafNode","minimumWidth","maximumWidth","minimumHeight","maximumHeight","minimumOrthogonalSize","maximumOrthogonalSize","BranchNode","c","Normal","priorities","some","p","childDescriptors","_childrenDisposable","_onDidVisibilityChange","onDidVisibilityChange","childDescriptor","node","setupChildrenEvents","_visible","isChildVisible","setChildVisible","wereAllChildrenHidden","areAllChildrenHidden","moveChild","_removeChild","_addChild","getChildSize","resizeChild","addChild","getChildCachedVisibleSize","_ref","findLeaf","candiateNode","last","flipNode","orthogonal","totalSize","childSize","getGridLocation","parentElement","test","el","firstElementChild","lastElementChild","nextElementSibling","indexInParent","getRelativeLocation","rootOrientation","location","direction","getLocationOrientation","directionOrientation","getDirectionOrientation","rest","_index","serializeBranchNode","box","isGridBranchNode","toJSON","Gridview","_root","root","locked","_locked","branch","pop","maximizedView","_maximizedNode","leaf","hasMaximizedView","maximizeView","getNode","exitMaximizedView","hiddenOnMaximize","hideAllViewsBut","parent","exclude","_onDidMaximizedNodeChange","showViewsInReverseOrder","includes","serialize","getView","_onDidViewVisibilityChange","deserialize","json","deserializer","_deserialize","_deserializeNode","serializedChild","fromJSON","oldRoot","insertOrthogonalSplitviewAtRoot","childReference","progmaticSelect","_getViews","nodeCachedVisibleSize","path","n","l","onDidViewVisibilityChange","onDidMaximizedNodeChange","parentLocation","pathToParent","grandParent","parentIndex","__","newSiblingSize","newSiblingCachedVisibleSize","newParent","newSibling","nodeToRemove","sibling","isSiblingVisible","siblingSizing","Resizable","_element","disableResizing","_disableResizing","entry","offsetParent","currentElement","DocumentFragment","host","isInDocument","contentRect","nextLayoutId","toTarget","BaseGrid","id","_id","_groups","groups","values","gridview","activeGroup","_activeGroup","disableAutoResizing","_onDidRemove","onDidRemove","_onDidAdd","onDidAdd","_onDidActiveChange","onDidActiveChange","_bufferOnDidLayoutChange","onDidLayoutChange","_onDidViewVisibilityChangeMicroTaskQueue","onDidViewVisibilityChangeMicroTaskQueue","panel","isVisible","maximizeGroup","doSetGroupActive","isMaximizedGroup","exitMaximizedGroup","hasMaximizedGroup","onDidMaximizedGroupChange","doAddGroup","group","doRemoveGroup","has","skipActive","getPanel","setActive","removeGroup","moveToNext","moveToPrevious","forceResize","SplitviewApi","component","panels","onDidLayoutFromJSON","removePanel","focus","addPanel","movePanel","updateOptions","PaneviewApi","onDidDrop","emitter","Object","assign","api","GridviewApi","onDidAddPanel","onDidAddGroup","onDidRemovePanel","onDidRemoveGroup","onDidActivePanelChange","onDidActiveGroupChange","force","DockviewApi","totalPanels","gap","onDidMovePanel","onWillDrop","onWillShowOverlay","onWillDragGroup","onWillDragPanel","onUnhandledDragOverEvent","activePanel","getGroupPanel","addGroup","closeAllGroups","getGroup","addFloatingGroup","addPopoutGroup","setGap","DragHandler","dataDisposable","pointerEventsDisposable","_onDragStart","onDragStart","configure","isCancelled","dataTransfer","effectAllowed","items","DragAndDropObserver","callbacks","target","registerListeners","onDragEnter","onDragOver","onDragLeave","onDragEnd","onDrop","WillShowOverlayEvent","nativeEvent","directionToPosition","positionToDirection","DEFAULT_ACTIVATION_SIZE","DEFAULT_SIZE","Droptarget","_state","_onDrop","_onWillShowOverlay","_acceptedTargetZonesSet","Set","acceptedTargetZones","dnd","removeDropTarget","clientWidth","clientHeight","rect","currentTarget","y","quadrant","calculateQuadrant","isAlreadyUsed","canDisplayOverlay","willShowOverlayEvent","markAsUsed","targetElement","overlayElement","append","toggleClasses","stopPropagation","setTargetZones","setOverlayModel","model","overlayModel","USED_EVENT_ID","_b","isSmallX","isSmallY","isLeft","isRight","isTop","isBottom","rightClass","leftClass","topClass","bottomClass","sizeOptions","overlayType","activationSizeOptions","activationSize","threshold","xp","yp","calculateQuadrantAsPercentage","calculateQuadrantAsPixels","WillFocusEvent","PanelApiImpl","isFocused","_isFocused","isActive","_isActive","_isVisible","_width","_height","_parameters","panelUpdatesDisposable","_onDidDimensionChange","onDidDimensionsChange","_onDidChangeFocus","onDidFocusChange","_onWillFocus","onWillFocus","_onWillVisibilityChange","onWillVisibilityChange","_onActiveChange","onActiveChange","_onDidParametersChange","onDidParametersChange","getParameters","initialize","parameters","update","params","updateParameters","SplitviewPanelApiImpl","_onDidConstraintsChangeInternal","onDidConstraintsChangeInternal","_onDidConstraintsChange","onDidConstraintsChange","_onDidSizeChange","onDidSizeChange","setConstraints","setSize","PaneviewPanelApiImpl","_pane","_onDidExpansionChange","onDidExpansionChange","_onMouseEnter","onMouseEnter","_onMouseLeave","onMouseLeave","setExpanded","isExpanded","BasePanelView","_params","tabIndex","outline","overflow","focusTracker","part","init","getComponent","key","keys","PaneviewPanel","headerSize","_minimumBodySize","_maximumBodySize","minimumBodySize","maximumBodySize","headerVisible","_headerVisible","header","display","headerComponent","isHeaderVisible","_onDidChangeExpansionState","_isExpanded","expandedSize","accessor","ev","isPanelExpanded","renderOnce","expanded","body","bodyPart","getBodyComponent","headerPart","getHeaderComponent","title","lineHeight","minHeight","maxHeight","DraggablePaneviewPanel","disableDnd","_onDidDrop","initDragFeatures","accessorId","draggable","handler","showDndOverlay","containerApi","existingPanel","allPanels","fromIndex","toIndex","ContentContainer","dropTarget","shiftKey","show","hide","renderPanel","asActive","doRender","isPanelActive","content","renderer","renderContainer","detatch","attach","referenceContainer","openPanel","closePanel","TabDragHandler","Tab","_onChanged","onChanged","_onDropped","dragHandler","setContent","GroupDragHandler","dragEvent","getComputedStyle","bgColor","getPropertyValue","color","ghostElement","backgroundColor","padding","fontSize","borderRadius","textContent","setDragImage","addGhostImage","VoidContainer","dropTraget","TabsContainer","tabs","hidden","_hidden","setRightActionsElement","rightActions","rightActionsContainer","setLeftActionsElement","leftActions","leftActionsContainer","setPrefixActionsElement","preActions","preActionsContainer","tab","selectedIndex","_onTabDragStart","onTabDragStart","_onGroupDragStart","onGroupDragStart","singleTabMode","tabContainer","voidContainer","WillShowOverlayLocationEvent","kind","disableFloatingGroups","rootTop","rootLeft","inDragMode","button","_isGroupActive","addTab","tabToRemove","setActivePanel","isActivePanel","find","isFloatingGroupsEnabled","isFloatingWithOnePanel","DockviewUnhandledDragOverEvent","isAccepted","_isAccepted","accept","PROPERTY_KEYS","properties","hideBorders","floatingGroupBounds","popoutUrl","defaultRenderer","debug","rootOverlayModel","DockviewDidDropEvent","DockviewWillDropEvent","_kind","DockviewGroupPanelModel","_activePanel","_panels","isEmpty","hasWatermark","watermark","tabsContainer","isContentFocused","contentContainer","_location","groupPanel","_onDidLocationChange","mostRecentlyUsed","_panelDisposables","_onMove","onMove","_onWillDrop","_onDidAddPanel","_onDidPanelTitleChange","onDidPanelTitleChange","_onDidPanelParametersChange","onDidPanelParametersChange","_onDidRemovePanel","_onDidActivePanelChange","_onUnhandledDragOverEvent","_overwriteRenderContainer","_api","hideHeader","handleDropEvent","focusContent","rerender","overlayRenderContainer","doAddPanel","updateContainer","createRightHeaderActionComponent","_rightHeaderActions","createLeftHeaderActionComponent","_leftHeaderActions","createPrefixHeaderActionComponent","_prefixHeaderActions","activeView","normalizedIndex","suppressRoll","containsPanel","skipSetActive","updateParentGroup","doSetActivePanel","skipSetGroupActive","groupItemOrId","panelToRemove","_removePanel","closeAllPanels","arrPanelCpy","doClose","updateActions","isGroupActive","doRemovePanel","nextPanel","skipSetActiveGroup","hasExistingPanel","updateMru","onDidTitleChange","runEvents","createWatermarkComponent","firedEvent","willDropEvent","getKind","itemId","_c","GridviewPanelApiImpl","GridviewPanel","_priority","_snap","_minimumWidth","_evaluatedMinimumWidth","updateConstraints","_minimumHeight","_evaluatedMinimumHeight","_maximumHeight","_evaluatedMaximumHeight","_maximumWidth","_evaluatedMaximumWidth","MAX_SAFE_INTEGER","maximum","minimum","NOT_INITIALIZED_MESSAGE","DockviewGroupPanelApiImpl","_group","_mutableDisposable","onDidLocationChange","close","getWindow","moveTo","moveGroupOrPanel","maximize","isMaximized","exitMaximized","DockviewGroupPanel","_model","DockviewPanelApiImpl","oldGroup","_onDidGroupChange","setupGroupEventListeners","tabComponent","_tabComponent","_onDidTitleChange","_onDidActiveGroupChange","onDidGroupChange","_onDidRendererChange","onDidRendererChange","groupEventsDisposable","setTitle","setRenderer","previousGroup","_trackGroupActive","hasBecomeHidden","hasBecomeVisible","DockviewPanel","_title","_renderer","contentComponent","isPanelVisible","createSvgElementFromPath","svg","createElementNS","setAttributeNS","viewbox","createCloseButton","DefaultTab","_content","action","render","DockviewPanelModel","_tab","createContentComponent","createTabComponent","_isPanelVisible","_d","componentName","createComponent","name","defaultTabComponent","DefaultDockviewDeserialzier","panelData","viewData","Watermark","emptySpace","flexGrow","actionsContainer","closeAnchor","isOneGroup","arialLevelTracker","_orderedList","destroy","setAttribute","zIndex","Overlay","minimumInViewportWidth","minimumInViewportHeight","_onDidChangeEnd","onDidChangeEnd","setupResize","setBounds","bottom","right","bringToFront","bounds","verticalAlignment","horiziontalAlignment","containerRect","overlayRect","xOffset","getMinimumWidth","yOffset","getMinimumHeight","parseFloat","setupDrag","dragTarget","move","track","resizeHandleElement","startPosition","originalY","originalHeight","originalX","originalWidth","moveTop","MAX_VALUE","MINIMUM_HEIGHT","moveBottom","moveLeft","MINIMUM_WIDTH","moveRight","DockviewFloatingGroupPanel","overlay","DEFAULT_FLOATING_GROUP_OVERFLOW_SIZE","DEFAULT_FLOATING_GROUP_POSITION","OverlayRenderContainer","createFocusableElement","focusContainer","box2","visibilityChanged","observerDisposable","correctLayerPosition","floatingGroup","floatingGroups","level","getAttribute","MutationObserver","attributeFilter","attributes","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","rejected","done","then","apply","PopoutWindow","_window","_onWillClose","onWillClose","_onDidClose","onDidClose","dimensions","screenX","screenY","innerWidth","innerHeight","open","url","features","entries","join","externalWindow","createPopoutWindowContainer","onDidOpen","externalDocument","styleSheetList","styleSheets","styleSheet","href","link","rel","head","cssTexts","cssRules","rule","cssText","err","createTextNode","addStyles","DEFAULT_ROOT_OVERLAY_MODEL","moveGroupWithoutDestroying","removedPanel","DockviewComponent","flatMap","_options","_floatingGroups","nextGroupId","_deserializer","_onWillDragPanel","_onWillDragGroup","_onDidLayoutFromJSON","_onDidMovePanel","_popoutGroups","_onDidRemoveGroup","_onDidAddGroup","_moving","updateWatermark","_rootDropTarget","orthogonalize","itemToPopout","theme","toClassList","list","cls","startsWith","getDockviewTheme","overridePopoutGroup","getNextGroupId","popoutWindowDisposable","popoutContainer","gready","referenceGroup","referenceLocation","createGroup","movingLock","returnedGroup","doSetGroupAndPanelActive","popoutGroup","skipPopoutAssociated","removedGroup","catch","error","_e","removeEmptyGroup","popoutReferenceGroupId","popoutReferenceGroup","skipRemoveGroup","skipPopoutReturn","anchoredBox","getAnchoredBox","minimumWidthWithinViewport","minimumHeightWithinViewport","querySelector","floatingGroupPanel","skipActiveGroup","createGroupAtLocation","changed_floatingGroupBounds","changed_rootOverlayOptions","floating","includePanel","collection","floats","popoutGroups","gridReferenceGroup","grid","isArray","createGroupFromSerializedState","createdPanels","serializedFloatingGroups","serializedFloatingGroup","serializedPopoutGroups","serializedPopoutGroup","hasActiveGroup","referencePanel","findGroup","isPanelOptionsWithGroup","createPanel","inactive","floatingGroupOptions","relativeLocation","coordinates","watermarkContainer","isGroupOptionsWithGroup","selectedGroup","refGroup","re","isMoving","destinationGroup","sourceGroupId","sourceItemId","destinationTarget","destinationIndex","sourceGroup","targetLocation","targetParentLocation","sourceLocation","sourceParentLocation","newGroup","targetGroup","updatedReferenceLocation","dropLocation","moveGroup","selectedFloatingGroup","selectedPopoutGroup","components","frameworkComponents","createFrameworkComponent","fallback","Component","FrameworkComponent","GridviewComponent","_onDidLayoutfromJSON","hasOrientationChanged","serializedGridview","queue","frameworkComponentFactory","registerPanel","f","reference","_f","groupItem","SplitviewComponent","_splitview","_splitviewChangeDisposable","_onDidLayoutChange","skipFocus","v","frameworkWrapper","doAddView","serializedSplitview","DefaultHeader","_expandedIcon","_collapsedIcon","apiRef","_expander","updateIcon","PaneFramework","PaneviewComponent","paneview","_paneview","_viewDisposables","headerComponents","headerframeworkComponents","serializedPaneview","SplitviewPanel","_minimumSize","_evaluatedMinimumSize","_maximumSize","_evaluatedMaximumSize","createDockview","createSplitview","createGridview","createPaneview","ReactComponentBridge","props","ref","triggerRender","React","_props","componentProps","current","Date","now","displayName","uniquePortalKeyGenerator","ReactPartContext","ReactPart","portalStore","context","_initialProps","disposed","createPortal","componentInstance","$$typeof","bridgeComponent","Provider","portal","ReactDOM","addPortal","usePortalsLifecycle","portals","setPortals","existingPortals","DockviewDisposable","ReactPanelContentPart","reactPortalStore","DockviewEmitter","ReactPanelHeaderPart","ReactWatermarkPart","ReactHeaderActionsRendererPart","_part","mutableDisposable","DockviewMutableDisposable","DockviewCompositeDisposable","updatePanels","updateActivePanel","updateGroupActive","createGroupControlElement","store","DEFAULT_REACT_TAB","DockviewReact","domRef","dockviewRef","prevProps","changes","propKey","propValue","frameworkTabComponents","tabComponents","frameworkOptions","leftHeaderActionsComponent","rightHeaderActionsComponent","prefixHeaderActionsComponent","watermarkComponent","obj","extractCoreOptions","onReady","CloseButton","viewBox","focusable","__rest","hasOwnProperty","getOwnPropertySymbols","propertyIsEnumerable","DockviewDefaultTab","_containerApi","hideClose","closeActionOverride","useTitle","onClose","onMouseDown","onClick","ReactPanelView","reactComponent","SplitviewReact","splitviewRef","componentId","ReactGridPanelView","GridviewReact","gridviewRef","PanePanelSection","PaneviewReact","paneviewRef","_componentId","AdmonitionContainer","_jsx","clsx","ThemeClassNames","common","admonition","admonitionType","AdmonitionHeading","_ref2","icon","admonitionHeading","admonitionIcon","AdmonitionContent","_ref3","admonitionContent","AdmonitionLayout","_jsxs","AdmonitionIconNote","fillRule","defaultProps","IconNote","Translate","description","AdmonitionTypeNote","AdmonitionIconTip","IconTip","AdmonitionTypeTip","AdmonitionIconInfo","IconInfo","AdmonitionTypeInfo","AdmonitionIconCaution","IconWarning","AdmonitionIconDanger","IconDanger","note","tip","info","warning","danger","secondary","important","success","caution","Admonition","unprocessedProps","processAdmonitionProps","AdmonitionTypeComponent","AdmonitionTypes","DocItemContent","syntheticTitle","metadata","frontMatter","contentTitle","useDoc","hide_title","useSyntheticTitle","docs","docMarkdown","Heading","as","justifyContent","FrameworkSelector","MDXContent","DocItemLayout","docTOC","toc","windowSize","useWindowSize","hide_table_of_contents","canRender","mobile","DocItemTOCMobile","desktop","DocItemTOCDesktop","useDocTOC","unlisted","docItemCol","Unlisted","DocVersionBanner","docItemContainer","DocBreadcrumbs","DocVersionBadge","DocItemFooter","DocItemPaginator","MDXComponents","FrameworkSpecific","CodeRunner","frameworks","label","activeFrameworkGlobal","useActiveFramework","setValue","localStorage","getItem","setter","setItem","FrameworkSelector1","activeFramework","setActiveFramework","DropdownMenu","asChild","src","useBaseUrl","marginRight","side","align","sideOffset","framework","paddingRight","BrowserOnly","FrameworkSpecific1","_CodeRunner","sandboxUrl","toLowerCase","CodeSandbox","alignItems","fontWeight"],"sourceRoot":""}